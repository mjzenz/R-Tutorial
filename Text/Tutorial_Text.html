<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Michael J Zenz">
<meta name="dcterms.date" content="2023-07-28">

<title>Begin R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Tutorial_Text_files/libs/clipboard/clipboard.min.js"></script>
<script src="Tutorial_Text_files/libs/quarto-html/quarto.js"></script>
<script src="Tutorial_Text_files/libs/quarto-html/popper.min.js"></script>
<script src="Tutorial_Text_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Tutorial_Text_files/libs/quarto-html/anchor.min.js"></script>
<link href="Tutorial_Text_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Tutorial_Text_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Tutorial_Text_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Tutorial_Text_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Tutorial_Text_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<style>

      .quarto-title-block .quarto-title-banner {
        background: #c5050c;
      }
</style>


</head>

<body>

<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Begin R</h1>
            <p class="subtitle lead">An Introduction to R for Administrative Professionals</p>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Michael J Zenz </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">July 28, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#getting-started" id="toc-getting-started" class="nav-link active" data-scroll-target="#getting-started">Getting Started</a>
  <ul class="collapse">
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#installation" id="toc-installation" class="nav-link" data-scroll-target="#installation">Installation</a></li>
  <li><a href="#loading-and-visually-examining-data" id="toc-loading-and-visually-examining-data" class="nav-link" data-scroll-target="#loading-and-visually-examining-data">Loading and Visually Examining Data</a>
  <ul class="collapse">
  <li><a href="#variables" id="toc-variables" class="nav-link" data-scroll-target="#variables">Variables</a></li>
  <li><a href="#loading-data-from-excel" id="toc-loading-data-from-excel" class="nav-link" data-scroll-target="#loading-data-from-excel">Loading Data from Excel</a></li>
  <li><a href="#exercise-looking-at-data" id="toc-exercise-looking-at-data" class="nav-link" data-scroll-target="#exercise-looking-at-data">Exercise: Looking at Data</a></li>
  </ul></li>
  <li><a href="#examining-and-summarizing-data-with-code" id="toc-examining-and-summarizing-data-with-code" class="nav-link" data-scroll-target="#examining-and-summarizing-data-with-code">Examining and Summarizing Data with Code</a>
  <ul class="collapse">
  <li><a href="#exercise-making-changes-to-code" id="toc-exercise-making-changes-to-code" class="nav-link" data-scroll-target="#exercise-making-changes-to-code">Exercise: Making Changes to Code</a></li>
  <li><a href="#filter" id="toc-filter" class="nav-link" data-scroll-target="#filter">Filter</a></li>
  <li><a href="#select" id="toc-select" class="nav-link" data-scroll-target="#select">Select</a></li>
  <li><a href="#group-by" id="toc-group-by" class="nav-link" data-scroll-target="#group-by">Group By</a></li>
  <li><a href="#mutate" id="toc-mutate" class="nav-link" data-scroll-target="#mutate">Mutate</a></li>
  <li><a href="#summarize" id="toc-summarize" class="nav-link" data-scroll-target="#summarize">Summarize</a></li>
  <li><a href="#other-helpful-functions" id="toc-other-helpful-functions" class="nav-link" data-scroll-target="#other-helpful-functions">Other helpful functions</a></li>
  </ul></li>
  <li><a href="#combining-multiple-data-sources" id="toc-combining-multiple-data-sources" class="nav-link" data-scroll-target="#combining-multiple-data-sources">Combining Multiple Data Sources</a>
  <ul class="collapse">
  <li><a href="#exercise-making-variable-comparable" id="toc-exercise-making-variable-comparable" class="nav-link" data-scroll-target="#exercise-making-variable-comparable">Exercise: Making variable comparable</a></li>
  <li><a href="#fixing-mismatched-columns" id="toc-fixing-mismatched-columns" class="nav-link" data-scroll-target="#fixing-mismatched-columns">Fixing mismatched columns</a></li>
  <li><a href="#joins" id="toc-joins" class="nav-link" data-scroll-target="#joins">Joins</a></li>
  </ul></li>
  <li><a href="#section-exercise" id="toc-section-exercise" class="nav-link" data-scroll-target="#section-exercise">Section Exercise</a></li>
  </ul></li>
  <li><a href="#appendix-a-data-types" id="toc-appendix-a-data-types" class="nav-link" data-scroll-target="#appendix-a-data-types">Appendix A: Data Types</a></li>
  <li><a href="#appendix-b-math-and-logical-operators" id="toc-appendix-b-math-and-logical-operators" class="nav-link" data-scroll-target="#appendix-b-math-and-logical-operators">Appendix B: Math and Logical Operators</a></li>
  <li><a href="#appendix-c-vectors-and-matrices" id="toc-appendix-c-vectors-and-matrices" class="nav-link" data-scroll-target="#appendix-c-vectors-and-matrices">Appendix C: Vectors and Matrices</a>
  <ul class="collapse">
  <li><a href="#vectors" id="toc-vectors" class="nav-link" data-scroll-target="#vectors">Vectors</a></li>
  <li><a href="#matrices" id="toc-matrices" class="nav-link" data-scroll-target="#matrices">Matrices</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="getting-started" class="level1">
<h1>Getting Started</h1>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>R is a statistical and data programming language that also is useful for processing data and preparing reports. You perform operations by inputting text commands into a console. This text-based system provides a record of all commands performed, which makes it easy to revise a data process at any point.</p>
<p>You can save text commands to text files called <strong>scripts</strong>. When run, these scripts are processed from top to bottom. You can also run particular lines or chunks of code at a time. Scripts are just regular text files saved with the file extension “.R.” Alternatively, you can run commands that you type directly into the R Console. But by doing this you won’t keep a record of what you have run, and so it is bad form. Almost all of your work with R will be done in scripts.</p>
<p>Most operations are performed through the use of various <strong>functions</strong>, which simplify complex operations into a single line of code. A number of functions come built into R (<strong>Base-R</strong>), but you can expand the set of functions available to you by installing various <strong>packages</strong>.</p>
<p>This introduction will start by using a set of R functions that come in the <strong>tidyverse</strong> package, maintained by the same company that makes the R-Studio program (Posit). This makes relatively complex data functions much easier to manage. This will get you working with actual data very quickly. However, one feature of R is that there are often many ways to accomplish the same task. Later on we will look at more fundamental features of Base-R that will provide a deeper understanding of how R works.</p>
</section>
<section id="installation" class="level2">
<h2 class="anchored" data-anchor-id="installation">Installation</h2>
<p>Although R itself is a command-line program, it is easier to use with a graphical interface. This allows you to see the R command-line, scripts, plots, files, and R objects all in one place. The most popular graphical interface for R is <strong>R Studio</strong>.</p>
<p>First install the <a href="https://cran.r-project.org/bin/windows/base/">R programming language</a>, and then the <a href="https://posit.co/download/rstudio-desktop/">R-studio</a> graphical interface. Accept all defaults during the installation. Once you have completed the installation, open R-studio to get started. It should find your installation of R automatically.</p>
<p>The first thing you need to do is set up a <strong>working directory</strong>, where all of the files you work with will live. In Windows the standard working directly is based in the “Documents” folder. So make a folder entitled “R-Tutorial” in your “Documents” folder. Then in the console change your working directory to that folder (you can also accomplish this in the bottom right Files menu in R-studio, by clicking on the “More” menu item).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"~/R-Tutorial"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next you will need to install a few packages. You can use the menu in R-Studio (Tools -&gt; Install Packages…), inputting the package names below into the “Packages” box. However, you can also run the following commands in the Console (bottom left part of the R-Studio screen). For this you will use two <strong>functions</strong> that are already in Base-R, <strong>install.packages()</strong> and <strong>library()</strong>. Note that any line of text that is preceded by <strong>“#”</strong> is ignored by R, and so is used to place <strong>comments</strong> in R code.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#A variety of functions for data science</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"tidyverse"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Used to read excel files</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"readxl"</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co">#Used to write excel files</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"openxlsx"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Note that you only need to install packages once for your installation of R, so you can just type them in the Console rather than put them in your script.</p>
<p>After installing the packages you will need, it is time to open up a new <strong>script</strong> that will contain all of your code. Again, this is just a text file, but it has a .R extension so R-Studio recognizes it as containing R code. This will allow you to rerun the data process any time you want, make adjustments, and/or share it with others. Code you put in the script will persist, whereas things run in the Console will go away after you leave R.</p>
<p>Go to the top menu in R-Studio and select “File” -&gt; “New File” -&gt; “R Script”. At first it will have a name of “Untitled,” so use “File” -&gt; “Save As…” to save it as “Getting_Started.R”. Because you set the working directory to “R-Tutorial” this should go directly into that folder.</p>
<p>After installing the packages you need to load them with the <strong>library</strong> command. From now on (unless specified otherwise), add commands to the script file open in the upper left pane and run them by highlighting them and pressing the “Run” button (or Control + Enter)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Load tidyverse package</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.2     ✔ readr     2.1.4
✔ forcats   1.0.0     ✔ stringr   1.5.0
✔ ggplot2   3.4.2     ✔ tibble    3.2.1
✔ lubridate 1.9.2     ✔ tidyr     1.3.0
✔ purrr     1.0.1     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Load readxl package</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Load openxlsx package</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(openxlsx)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="loading-and-visually-examining-data" class="level2">
<h2 class="anchored" data-anchor-id="loading-and-visually-examining-data">Loading and Visually Examining Data</h2>
<section id="variables" class="level3">
<h3 class="anchored" data-anchor-id="variables">Variables</h3>
<p>You assign values to variables in memory using the <strong>&lt;-</strong> operator.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This assigns 4.3 to the variable x</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fl">4.3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In the example above you can think of 4.3 as being put into a variable called <em>x</em>. Lines can continue by using a carriage return, as long as an operator is included just before the return. This will help you to keep code from sprawling.</p>
<p>You can see what is in x by just typing those variables into the terminal (or using R-studio’s Environment feature at the top right pane to look at them).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4.3</code></pre>
</div>
</div>
</section>
<section id="loading-data-from-excel" class="level3">
<h3 class="anchored" data-anchor-id="loading-data-from-excel">Loading Data from Excel</h3>
<p>Now you are ready to read in some data and start working with it. For much of this tutorial we will work with anonymized public UW salary data (courtesy of <a href="https://ufas223.org/resources/%22">UFAS#223</a>). It provides a variety of fields and might be similar to data that you may encounter in your job. Find the data <a href="https://github.com/mjzenz/R-Tutorial/tree/master/Example_Data">here</a>, and place it in a new directory called “Example_Data” within the “R-Tutorial” folder you are working in.<br>
Now you are ready to load the data into R using a function from the <strong>readxl</strong> package you just loaded. Note that R can load a variety of file formats, including .csv, as well as from other statistical packages like SPSS, SAS, and Stata. The easiest way to load data is via the upper-right pane and the “Environment” -&gt; “Import Dataset” button. This will write the code to import data for you, but you can always just write it directly.</p>
<p>The following command will read in the excel file, using the <strong>read_excel</strong> function from the readxl package and place that data into the salary.data <strong>object</strong> using <strong>&lt;-</strong>. You can think of that like an arrow, placing whatever is on its right side into the object on the left side in your computer’s memory.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Load salary_data.xlsx into the variable salary.data</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>salary.data <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"Example_Data/salary_data.xlsx"</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Display data frame</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>salary.data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 21,857 × 13
   `Person Num` Division         Department `Employee Category` `Job Code` Title
          &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;      &lt;chr&gt;               &lt;chr&gt;      &lt;chr&gt;
 1            1 UW - Madison Ex… Positive … AS                  OE009      Outr…
 2            2 Intercollegiate… General O… AS                  AE002      Acad…
 3            3 School of Educa… Prof Lear… AS                  OE008      Outr…
 4            4 VC for Rsrch &amp; … Administr… AS                  AD073      Admi…
 5            5 Sch of Med &amp; Pu… UW Compre… AS                  OE009      Outr…
 6            6 Information Tec… Systems E… AS                  IT033      Serv…
 7            7 University Poli… Police Su… CP                  CP033X     Poli…
 8            8 School of Human… School of… AS                  AD059      Chie…
 9            9 Information Tec… User Serv… CP                  IT050      User…
10           10 College of Lett… Interdis … CP                  FP031      Faci…
# ℹ 21,847 more rows
# ℹ 7 more variables: `Full-time Equivalent` &lt;dbl&gt;, `Annual Full Salary` &lt;dbl&gt;,
#   `Annual FTE Adjusted Salary` &lt;dbl&gt;, `FLSA Status` &lt;chr&gt;,
#   `Salary Grade` &lt;chr&gt;, `Date of Hire` &lt;dttm&gt;,
#   `Appointment Type and Length` &lt;chr&gt;</code></pre>
</div>
</div>
<p>The salary.data variable is a <strong>data frame</strong>. This is the primary data object in R, and is akin to a spreadsheet. Because we used a read_excel() function to load in the data frame from the excel file, it is actually a special kind of data frame called a <strong>tibble</strong>. These have a few special features for use in the tidyverse. However, it won’t be important for most of what we do here.</p>
<p>You can see the salary.data data frame in the top-right pane, under “Environment.” Clicking on the little arrow next to its name will show information about data frame’s variables (columns). If you click on it the data frame name it will open in the top left pane.</p>
</section>
<section id="exercise-looking-at-data" class="level3">
<h3 class="anchored" data-anchor-id="exercise-looking-at-data">Exercise: Looking at Data</h3>
<p>Use the Environment pane and the data viewer (top left pane) to answer a few questions about salary.data:</p>
<ol type="1">
<li>How many rows are in the data set? How many columns?</li>
<li>What are the different types of data in the data set? Which columns are numbers and which are character strings. How do they differ? Are there any other types of data?</li>
<li>Use the “filter” button to show only those people with “Professor” in their title.</li>
</ol>
</section>
</section>
<section id="examining-and-summarizing-data-with-code" class="level2">
<h2 class="anchored" data-anchor-id="examining-and-summarizing-data-with-code">Examining and Summarizing Data with Code</h2>
<p>R-Studio provides a number of ways of visually inspecting data. These are similar to some tools found in Excel, but won’t get us very far (and aren’t as good as excel!). Instead, we will need to use R code to examine and transform data.</p>
<p>We’ll start with a complete example of R code (using tidyverse functions) that summarizes the salary data, then we’ll break it down to show how it works. There is a lot going on in this code chunk, so you won’t know what is going on here for a while. Much of what we do will be to understand code chunks like this and be able to reproduce them.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">#This creates a table of job titles as rows, divisions as columns, </span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="do">##with median salary (counts) in cells</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Note that variable (column) names with spaces and special characters are surrounded with ``.</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="do">##Variable names without spaces or special characters don't need ``.</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>salary.fs.as.by.title.div <span class="ot">&lt;-</span> salary.data <span class="sc">%&gt;%</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>                        <span class="co">#Only include Academic Staff appointments that are full-time  </span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">filter</span>(<span class="st">`</span><span class="at">Employee Category</span><span class="st">`</span> <span class="sc">==</span> <span class="st">"AS"</span> <span class="sc">&amp;</span> <span class="st">`</span><span class="at">Full-time Equivalent</span><span class="st">`</span> <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>                        <span class="co">#Only include Colleges with UGRD programs</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">filter</span>(Division <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"College of Ag &amp; Life Science"</span>, </span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>                                               <span class="st">"School of Pharmacy"</span>,</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>                                               <span class="st">"College of Engineering"</span>,</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>                                               <span class="st">"School of Human Ecology"</span>,</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>                                               <span class="st">"School of Education"</span>,</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>                                               <span class="st">"College of Letters &amp; Science"</span>,</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>                                               <span class="st">"School of Nursing"</span>,</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>                                               <span class="st">"Wisconsin School of Business"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>                        <span class="co">#Group by Title and Division</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">group_by</span>(Division, Title) <span class="sc">%&gt;%</span>   </span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>                        <span class="co">#Use Summarize to find salary median (remove NAs) and counts</span></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">summarize</span>(<span class="at">median =</span> <span class="fu">median</span>(<span class="st">`</span><span class="at">Annual Full Salary</span><span class="st">`</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), </span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span> <span class="co">#Counts the number of rows</span></span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>                        <span class="co">#Use ungroup when you are done using a group</span></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>                        <span class="co">#Create a new variable Combining salary (rounded to the dollar) </span></span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a>                        <span class="co">#and counts to in one cell. </span></span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">mutate</span>(<span class="at">median_n =</span> <span class="fu">paste</span>(<span class="fu">round</span>(median, <span class="at">digits =</span> <span class="dv">0</span>), </span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a>                                          <span class="st">" ("</span>, n, <span class="st">")"</span>, <span class="at">sep =</span> <span class="st">""</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a>                        <span class="co">#Keeps only the Division, Title, and median_n columns</span></span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">select</span>(Division, Title, median_n) <span class="sc">%&gt;%</span></span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a>                        <span class="co">#pivots the data so that Divisions become the columns.</span></span>
<span id="cb11-32"><a href="#cb11-32" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">pivot_wider</span>(<span class="at">data =</span> ., <span class="at">names_from =</span> Division, <span class="at">values_from =</span> median_n)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Each line in the above block of code accomplishes a single task. Once one step is finished the data is passed through the <strong>pipe</strong> (<strong>%&gt;%</strong>) to the next level. You can see the resultant data frame by looking at the salary.fs.as.by.title.div data frame in the data viewer.</p>
<section id="exercise-making-changes-to-code" class="level3">
<h3 class="anchored" data-anchor-id="exercise-making-changes-to-code">Exercise: Making Changes to Code</h3>
<p>Try to make some adjustments to the code block above, rerun it, and see what happens. Hint: We haven’t seen how this works yet, but you can refer to a single variable (column) of a data frame using the <strong>$</strong>, and the function <strong>unique()</strong> will show you all unique values for what you put into it. So, for instance, <code>unique(salary.data$`Employee Category`)</code> will show you the unique Employee Categories in the data.</p>
<ol type="1">
<li>Change the Employee Category to Permanent Classified Staff (CP)</li>
<li>Instead of Division group by Department and only include employees in The College of Letters &amp; Science</li>
<li>Find the mean salary instead of the median</li>
<li>Remove the filter for only including full-time employees, but then also change the salary summarized to the Annual FTE Adjusted Salary.</li>
</ol>
</section>
<section id="filter" class="level3">
<h3 class="anchored" data-anchor-id="filter">Filter</h3>
<p>You can use <strong>filter()</strong> to keep rows the the data frame according to a set of conditions. This can include Boolean (TRUE/FALSE) variables and/or logical operators. See <a href="#appendix-b-math-and-logical-operators">Appendix B</a> for a list of logical operators and how to use them.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This keeps salarys above $500k</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>salary.data <span class="sc">%&gt;%</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="st">`</span><span class="at">Annual Full Salary</span><span class="st">`</span> <span class="sc">&gt;</span> <span class="dv">500000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 13
  `Person Num` Division          Department `Employee Category` `Job Code` Title
         &lt;dbl&gt; &lt;chr&gt;             &lt;chr&gt;      &lt;chr&gt;               &lt;chr&gt;      &lt;chr&gt;
1        18003 College of Lette… Economics  FA                  FA020      Prof…
2        20797 School of Veteri… Pathobiol… FA                  FA020      Prof…
# ℹ 7 more variables: `Full-time Equivalent` &lt;dbl&gt;, `Annual Full Salary` &lt;dbl&gt;,
#   `Annual FTE Adjusted Salary` &lt;dbl&gt;, `FLSA Status` &lt;chr&gt;,
#   `Salary Grade` &lt;chr&gt;, `Date of Hire` &lt;dttm&gt;,
#   `Appointment Type and Length` &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use a negation sign (!) to keep rows that don't meet the condition</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>salary.data <span class="sc">%&gt;%</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>(<span class="st">`</span><span class="at">Annual Full Salary</span><span class="st">`</span> <span class="sc">&gt;</span> <span class="dv">500000</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 21,855 × 13
   `Person Num` Division         Department `Employee Category` `Job Code` Title
          &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;      &lt;chr&gt;               &lt;chr&gt;      &lt;chr&gt;
 1            1 UW - Madison Ex… Positive … AS                  OE009      Outr…
 2            2 Intercollegiate… General O… AS                  AE002      Acad…
 3            3 School of Educa… Prof Lear… AS                  OE008      Outr…
 4            4 VC for Rsrch &amp; … Administr… AS                  AD073      Admi…
 5            5 Sch of Med &amp; Pu… UW Compre… AS                  OE009      Outr…
 6            6 Information Tec… Systems E… AS                  IT033      Serv…
 7            7 University Poli… Police Su… CP                  CP033X     Poli…
 8            8 School of Human… School of… AS                  AD059      Chie…
 9            9 Information Tec… User Serv… CP                  IT050      User…
10           10 College of Lett… Interdis … CP                  FP031      Faci…
# ℹ 21,845 more rows
# ℹ 7 more variables: `Full-time Equivalent` &lt;dbl&gt;, `Annual Full Salary` &lt;dbl&gt;,
#   `Annual FTE Adjusted Salary` &lt;dbl&gt;, `FLSA Status` &lt;chr&gt;,
#   `Salary Grade` &lt;chr&gt;, `Date of Hire` &lt;dttm&gt;,
#   `Appointment Type and Length` &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># The == operator keeps exactly one value</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>salary.data <span class="sc">%&gt;%</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="st">`</span><span class="at">Person Num</span><span class="st">`</span> <span class="sc">==</span> <span class="dv">500</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 13
  `Person Num` Division          Department `Employee Category` `Job Code` Title
         &lt;dbl&gt; &lt;chr&gt;             &lt;chr&gt;      &lt;chr&gt;               &lt;chr&gt;      &lt;chr&gt;
1          500 School of Educat… Art        AS                  TL020      Lect…
# ℹ 7 more variables: `Full-time Equivalent` &lt;dbl&gt;, `Annual Full Salary` &lt;dbl&gt;,
#   `Annual FTE Adjusted Salary` &lt;dbl&gt;, `FLSA Status` &lt;chr&gt;,
#   `Salary Grade` &lt;chr&gt;, `Date of Hire` &lt;dttm&gt;,
#   `Appointment Type and Length` &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># The %in% operator keeps a vector of values</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>salary.data <span class="sc">%&gt;%</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="st">`</span><span class="at">Person Num</span><span class="st">`</span> <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">89</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 13
  `Person Num` Division          Department `Employee Category` `Job Code` Title
         &lt;dbl&gt; &lt;chr&gt;             &lt;chr&gt;      &lt;chr&gt;               &lt;chr&gt;      &lt;chr&gt;
1            3 School of Educat… Prof Lear… AS                  OE008      Outr…
2           89 Sch of Med &amp; Pub… Pediatrics AS                  IC016      Assi…
# ℹ 7 more variables: `Full-time Equivalent` &lt;dbl&gt;, `Annual Full Salary` &lt;dbl&gt;,
#   `Annual FTE Adjusted Salary` &lt;dbl&gt;, `FLSA Status` &lt;chr&gt;,
#   `Salary Grade` &lt;chr&gt;, `Date of Hire` &lt;dttm&gt;,
#   `Appointment Type and Length` &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use logical operators like "&amp;" to connect two (or more) statements.</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>salary.data <span class="sc">%&gt;%</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="st">`</span><span class="at">Annual Full Salary</span><span class="st">`</span> <span class="sc">&gt;</span> <span class="dv">400000</span> <span class="sc">&amp;</span> Division <span class="sc">==</span> <span class="st">"College of Letters &amp; Science"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 13
  `Person Num` Division          Department `Employee Category` `Job Code` Title
         &lt;dbl&gt; &lt;chr&gt;             &lt;chr&gt;      &lt;chr&gt;               &lt;chr&gt;      &lt;chr&gt;
1        10831 College of Lette… Economics  FA                  FA020      Prof…
2        12597 College of Lette… Economics  FA                  FA020      Prof…
3        18003 College of Lette… Economics  FA                  FA020      Prof…
# ℹ 7 more variables: `Full-time Equivalent` &lt;dbl&gt;, `Annual Full Salary` &lt;dbl&gt;,
#   `Annual FTE Adjusted Salary` &lt;dbl&gt;, `FLSA Status` &lt;chr&gt;,
#   `Salary Grade` &lt;chr&gt;, `Date of Hire` &lt;dttm&gt;,
#   `Appointment Type and Length` &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use () to determine the order of more complex logical statements</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>salary.data <span class="sc">%&gt;%</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="st">`</span><span class="at">Annual Full Salary</span><span class="st">`</span> <span class="sc">&gt;</span> <span class="dv">400000</span> <span class="sc">&amp;</span> <span class="sc">!</span>(Division <span class="sc">==</span> <span class="st">"College of Letters &amp; Science"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 13
  `Person Num` Division          Department `Employee Category` `Job Code` Title
         &lt;dbl&gt; &lt;chr&gt;             &lt;chr&gt;      &lt;chr&gt;               &lt;chr&gt;      &lt;chr&gt;
1          734 Wisconsin School… Finance    FA                  FA020      Prof…
2          940 Sch of Med &amp; Pub… Biomolecu… FA                  FA020      Prof…
3         2473 Wisconsin School… Real Esta… FA                  FA020      Prof…
4         3084 College of Ag &amp; … Plant Pat… FA                  FA020      Prof…
5         3271 Sch of Med &amp; Pub… Populatio… AS                  IC015      Asso…
6         9616 Wisconsin School… Accting &amp;… FA                  FA020      Prof…
7        14106 Wisconsin School… Managemen… FA                  FA020      Prof…
8        18261 Wisconsin School… Finance    FA                  FA020      Prof…
9        20797 School of Veteri… Pathobiol… FA                  FA020      Prof…
# ℹ 7 more variables: `Full-time Equivalent` &lt;dbl&gt;, `Annual Full Salary` &lt;dbl&gt;,
#   `Annual FTE Adjusted Salary` &lt;dbl&gt;, `FLSA Status` &lt;chr&gt;,
#   `Salary Grade` &lt;chr&gt;, `Date of Hire` &lt;dttm&gt;,
#   `Appointment Type and Length` &lt;chr&gt;</code></pre>
</div>
</div>
</section>
<section id="select" class="level3">
<h3 class="anchored" data-anchor-id="select">Select</h3>
<p>Choose which columns of a data frame to keep (or exclude) with the <strong>select()</strong> function. To keep columns list them, to exclude columns list them with a “-”. You can also rename columns while selecting them by using the = with the new name on the left side and the old name on the right.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This keeps columns "Person_Num", "Title", and "Annual Full Salary"</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>salary.data <span class="sc">%&gt;%</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="st">`</span><span class="at">Person Num</span><span class="st">`</span>, Title, <span class="st">`</span><span class="at">Annual Full Salary</span><span class="st">`</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 21,857 × 3
   `Person Num` Title                      `Annual Full Salary`
          &lt;dbl&gt; &lt;chr&gt;                                     &lt;dbl&gt;
 1            1 Outreach Specialist                       58845
 2            2 Academic Advisor                          54060
 3            3 Outreach Program Manager                  66825
 4            4 Admin Assoc Dir (Inst)                   105000
 5            5 Outreach Specialist                       49683
 6            6 Service Coordinator I                     85301
 7            7 Police Captain                           131539
 8            8 Chief of Staff I (C)                     101301
 9            9 User Support Specialist II                59155
10           10 Facilities Technician III                 54766
# ℹ 21,847 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># You can also exclude columns and keeps all others.</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>salary.data <span class="sc">%&gt;%</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="st">`</span><span class="at">Job Code</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">FLSA Status</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 21,857 × 11
   `Person Num` Division                    Department `Employee Category` Title
          &lt;dbl&gt; &lt;chr&gt;                       &lt;chr&gt;      &lt;chr&gt;               &lt;chr&gt;
 1            1 UW - Madison Extension      Positive … AS                  Outr…
 2            2 Intercollegiate Athletics   General O… AS                  Acad…
 3            3 School of Education         Prof Lear… AS                  Outr…
 4            4 VC for Rsrch &amp; Grad Educat… Administr… AS                  Admi…
 5            5 Sch of Med &amp; Public Health  UW Compre… AS                  Outr…
 6            6 Information Technology      Systems E… AS                  Serv…
 7            7 University Police Dept      Police Su… CP                  Poli…
 8            8 School of Human Ecology     School of… AS                  Chie…
 9            9 Information Technology      User Serv… CP                  User…
10           10 College of Letters &amp; Scien… Interdis … CP                  Faci…
# ℹ 21,847 more rows
# ℹ 6 more variables: `Full-time Equivalent` &lt;dbl&gt;, `Annual Full Salary` &lt;dbl&gt;,
#   `Annual FTE Adjusted Salary` &lt;dbl&gt;, `Salary Grade` &lt;chr&gt;,
#   `Date of Hire` &lt;dttm&gt;, `Appointment Type and Length` &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># You can use select to rename columns too, though this only keeps listed columns</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>salary.data <span class="sc">%&gt;%</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">ID =</span> <span class="st">`</span><span class="at">Person Num</span><span class="st">`</span>, Title, <span class="at">Salary =</span> <span class="st">`</span><span class="at">Annual Full Salary</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 21,857 × 3
      ID Title                      Salary
   &lt;dbl&gt; &lt;chr&gt;                       &lt;dbl&gt;
 1     1 Outreach Specialist         58845
 2     2 Academic Advisor            54060
 3     3 Outreach Program Manager    66825
 4     4 Admin Assoc Dir (Inst)     105000
 5     5 Outreach Specialist         49683
 6     6 Service Coordinator I       85301
 7     7 Police Captain             131539
 8     8 Chief of Staff I (C)       101301
 9     9 User Support Specialist II  59155
10    10 Facilities Technician III   54766
# ℹ 21,847 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A separate function rename will will not exclude those columns not listed.</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>salary.data <span class="sc">%&gt;%</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">ID =</span> <span class="st">`</span><span class="at">Person Num</span><span class="st">`</span>, <span class="at">Salary =</span> <span class="st">`</span><span class="at">Annual Full Salary</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 21,857 × 13
      ID Division                Department `Employee Category` `Job Code` Title
   &lt;dbl&gt; &lt;chr&gt;                   &lt;chr&gt;      &lt;chr&gt;               &lt;chr&gt;      &lt;chr&gt;
 1     1 UW - Madison Extension  Positive … AS                  OE009      Outr…
 2     2 Intercollegiate Athlet… General O… AS                  AE002      Acad…
 3     3 School of Education     Prof Lear… AS                  OE008      Outr…
 4     4 VC for Rsrch &amp; Grad Ed… Administr… AS                  AD073      Admi…
 5     5 Sch of Med &amp; Public He… UW Compre… AS                  OE009      Outr…
 6     6 Information Technology  Systems E… AS                  IT033      Serv…
 7     7 University Police Dept  Police Su… CP                  CP033X     Poli…
 8     8 School of Human Ecology School of… AS                  AD059      Chie…
 9     9 Information Technology  User Serv… CP                  IT050      User…
10    10 College of Letters &amp; S… Interdis … CP                  FP031      Faci…
# ℹ 21,847 more rows
# ℹ 7 more variables: `Full-time Equivalent` &lt;dbl&gt;, Salary &lt;dbl&gt;,
#   `Annual FTE Adjusted Salary` &lt;dbl&gt;, `FLSA Status` &lt;chr&gt;,
#   `Salary Grade` &lt;chr&gt;, `Date of Hire` &lt;dttm&gt;,
#   `Appointment Type and Length` &lt;chr&gt;</code></pre>
</div>
</div>
</section>
<section id="group-by" class="level3">
<h3 class="anchored" data-anchor-id="group-by">Group By</h3>
<p>The <strong>group_by</strong> function does not do anything visible on its own, but groups the data frame for use by other functions (like )</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This groups the data by Division and Title</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Notice that nothing visually changes about the data.</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>salary.data <span class="sc">%&gt;%</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Division, Title)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 21,857 × 13
# Groups:   Division, Title [3,258]
   `Person Num` Division         Department `Employee Category` `Job Code` Title
          &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;      &lt;chr&gt;               &lt;chr&gt;      &lt;chr&gt;
 1            1 UW - Madison Ex… Positive … AS                  OE009      Outr…
 2            2 Intercollegiate… General O… AS                  AE002      Acad…
 3            3 School of Educa… Prof Lear… AS                  OE008      Outr…
 4            4 VC for Rsrch &amp; … Administr… AS                  AD073      Admi…
 5            5 Sch of Med &amp; Pu… UW Compre… AS                  OE009      Outr…
 6            6 Information Tec… Systems E… AS                  IT033      Serv…
 7            7 University Poli… Police Su… CP                  CP033X     Poli…
 8            8 School of Human… School of… AS                  AD059      Chie…
 9            9 Information Tec… User Serv… CP                  IT050      User…
10           10 College of Lett… Interdis … CP                  FP031      Faci…
# ℹ 21,847 more rows
# ℹ 7 more variables: `Full-time Equivalent` &lt;dbl&gt;, `Annual Full Salary` &lt;dbl&gt;,
#   `Annual FTE Adjusted Salary` &lt;dbl&gt;, `FLSA Status` &lt;chr&gt;,
#   `Salary Grade` &lt;chr&gt;, `Date of Hire` &lt;dttm&gt;,
#   `Appointment Type and Length` &lt;chr&gt;</code></pre>
</div>
</div>
</section>
<section id="mutate" class="level3">
<h3 class="anchored" data-anchor-id="mutate">Mutate</h3>
<p>The <strong>mutate()</strong> function has a funny name, but it essentially allows you to create calculated fields. It does not aggregate over the rows, but creates a new column in the same data frame structure. Aggregated values can be used in calculations too.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create new columns with FTE adjusted salary (though this already exists in the data) and years employed.</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a> salary.data <span class="sc">%&gt;%</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">salary =</span> <span class="st">`</span><span class="at">Annual Full Salary</span><span class="st">`</span> <span class="sc">*</span> <span class="st">`</span><span class="at">Full-time Equivalent</span><span class="st">`</span>,</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">years_employed =</span> <span class="fu">time_length</span>(<span class="fu">difftime</span>(<span class="fu">Sys.Date</span>(), <span class="fu">as.Date</span>(<span class="st">`</span><span class="at">Date of Hire</span><span class="st">`</span>)), <span class="st">"years"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 21,857 × 15
   `Person Num` Division         Department `Employee Category` `Job Code` Title
          &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;      &lt;chr&gt;               &lt;chr&gt;      &lt;chr&gt;
 1            1 UW - Madison Ex… Positive … AS                  OE009      Outr…
 2            2 Intercollegiate… General O… AS                  AE002      Acad…
 3            3 School of Educa… Prof Lear… AS                  OE008      Outr…
 4            4 VC for Rsrch &amp; … Administr… AS                  AD073      Admi…
 5            5 Sch of Med &amp; Pu… UW Compre… AS                  OE009      Outr…
 6            6 Information Tec… Systems E… AS                  IT033      Serv…
 7            7 University Poli… Police Su… CP                  CP033X     Poli…
 8            8 School of Human… School of… AS                  AD059      Chie…
 9            9 Information Tec… User Serv… CP                  IT050      User…
10           10 College of Lett… Interdis … CP                  FP031      Faci…
# ℹ 21,847 more rows
# ℹ 9 more variables: `Full-time Equivalent` &lt;dbl&gt;, `Annual Full Salary` &lt;dbl&gt;,
#   `Annual FTE Adjusted Salary` &lt;dbl&gt;, `FLSA Status` &lt;chr&gt;,
#   `Salary Grade` &lt;chr&gt;, `Date of Hire` &lt;dttm&gt;,
#   `Appointment Type and Length` &lt;chr&gt;, salary &lt;dbl&gt;, years_employed &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use mean to calculate relative to all other salaries</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>salary.data <span class="sc">%&gt;%</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">salary_relative_to_title =</span> <span class="st">`</span><span class="at">Annual FTE Adjusted Salary</span><span class="st">`</span> <span class="sc">-</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">Annual FTE Adjusted Salary</span><span class="st">`</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 21,857 × 14
   `Person Num` Division         Department `Employee Category` `Job Code` Title
          &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;      &lt;chr&gt;               &lt;chr&gt;      &lt;chr&gt;
 1            1 UW - Madison Ex… Positive … AS                  OE009      Outr…
 2            2 Intercollegiate… General O… AS                  AE002      Acad…
 3            3 School of Educa… Prof Lear… AS                  OE008      Outr…
 4            4 VC for Rsrch &amp; … Administr… AS                  AD073      Admi…
 5            5 Sch of Med &amp; Pu… UW Compre… AS                  OE009      Outr…
 6            6 Information Tec… Systems E… AS                  IT033      Serv…
 7            7 University Poli… Police Su… CP                  CP033X     Poli…
 8            8 School of Human… School of… AS                  AD059      Chie…
 9            9 Information Tec… User Serv… CP                  IT050      User…
10           10 College of Lett… Interdis … CP                  FP031      Faci…
# ℹ 21,847 more rows
# ℹ 8 more variables: `Full-time Equivalent` &lt;dbl&gt;, `Annual Full Salary` &lt;dbl&gt;,
#   `Annual FTE Adjusted Salary` &lt;dbl&gt;, `FLSA Status` &lt;chr&gt;,
#   `Salary Grade` &lt;chr&gt;, `Date of Hire` &lt;dttm&gt;,
#   `Appointment Type and Length` &lt;chr&gt;, salary_relative_to_title &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use group_by to calculate relative to title mean salary</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>salary.data <span class="sc">%&gt;%</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Title) <span class="sc">%&gt;%</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">salary_relative_to_title =</span> <span class="st">`</span><span class="at">Annual FTE Adjusted Salary</span><span class="st">`</span> <span class="sc">-</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">Annual FTE Adjusted Salary</span><span class="st">`</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 21,857 × 14
# Groups:   Title [1,034]
   `Person Num` Division         Department `Employee Category` `Job Code` Title
          &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;      &lt;chr&gt;               &lt;chr&gt;      &lt;chr&gt;
 1            1 UW - Madison Ex… Positive … AS                  OE009      Outr…
 2            2 Intercollegiate… General O… AS                  AE002      Acad…
 3            3 School of Educa… Prof Lear… AS                  OE008      Outr…
 4            4 VC for Rsrch &amp; … Administr… AS                  AD073      Admi…
 5            5 Sch of Med &amp; Pu… UW Compre… AS                  OE009      Outr…
 6            6 Information Tec… Systems E… AS                  IT033      Serv…
 7            7 University Poli… Police Su… CP                  CP033X     Poli…
 8            8 School of Human… School of… AS                  AD059      Chie…
 9            9 Information Tec… User Serv… CP                  IT050      User…
10           10 College of Lett… Interdis … CP                  FP031      Faci…
# ℹ 21,847 more rows
# ℹ 8 more variables: `Full-time Equivalent` &lt;dbl&gt;, `Annual Full Salary` &lt;dbl&gt;,
#   `Annual FTE Adjusted Salary` &lt;dbl&gt;, `FLSA Status` &lt;chr&gt;,
#   `Salary Grade` &lt;chr&gt;, `Date of Hire` &lt;dttm&gt;,
#   `Appointment Type and Length` &lt;chr&gt;, salary_relative_to_title &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="summarize" class="level3">
<h3 class="anchored" data-anchor-id="summarize">Summarize</h3>
<p>The <strong>summarize()</strong> command aggregates the values in a column. It will reduce the number of rows and columns. Use group_by to set the aggregation groups.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate mean salary of the total data set and how many people are in it.</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a> salary.data <span class="sc">%&gt;%</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_salary =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">Annual FTE Adjusted Salary</span><span class="st">`</span>),</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">n_people =</span> <span class="fu">n_distinct</span>(<span class="st">`</span><span class="at">Person Num</span><span class="st">`</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  mean_salary n_people
        &lt;dbl&gt;    &lt;int&gt;
1      65729.    21231</code></pre>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Find mean salary and number of people by Division and Department</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a> salary.data <span class="sc">%&gt;%</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">group_by</span>(Division, Department) <span class="sc">%&gt;%</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_salary =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">Annual FTE Adjusted Salary</span><span class="st">`</span>),</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">n_people =</span> <span class="fu">n_distinct</span>(<span class="st">`</span><span class="at">Person Num</span><span class="st">`</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 534 × 4
# Groups:   Division [36]
   Division                     Department                  mean_salary n_people
   &lt;chr&gt;                        &lt;chr&gt;                             &lt;dbl&gt;    &lt;int&gt;
 1 Business Services            Accounting Services              68278.       49
 2 Business Services            Administration                   64438         1
 3 Business Services            Bursar                           69852.       12
 4 Business Services            Business Analysis                86755         3
 5 Business Services            Content Mgmt, Comm &amp; Train…      74119.        4
 6 Business Services            Materials Distribution Svcs      54225.       22
 7 Business Services            Purchasing Services              78259.       21
 8 Business Services            Risk Management                  91040.        4
 9 College of Ag &amp; Life Science Admin - Cooperative Extens…      20686.        1
10 College of Ag &amp; Life Science Admin - Dean &amp; Director          59947.       10
# ℹ 524 more rows</code></pre>
</div>
</div>
</section>
<section id="other-helpful-functions" class="level3">
<h3 class="anchored" data-anchor-id="other-helpful-functions">Other helpful functions</h3>
<p>As mentioned already, there are several helpful functions for exploring a data set. The ones we look at here are all from base-r, and so it is easiest to use them with the $ to denote columns. Here I will show <strong>unique()</strong> which provides all of the unique values for a column, <strong>table()</strong> which counts the rows that match each possible value for the column, and <strong>hist()</strong> which produces a histogram of the column. <strong>Note that these tools are for quick exploration rather than presentation and reporting. There are other functions, like the <a href="https://ggplot2.tidyverse.org/">ggplot2</a> and <a href="https://cran.r-project.org/web/packages/kableExtra/vignettes/awesome_table_in_html.html">kable</a> set of functions, useful for making graphs and tables that look good.</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Shows the unique values for the Division column</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(salary.data<span class="sc">$</span><span class="st">`</span><span class="at">Division</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "UW - Madison Extension"         "Intercollegiate Athletics"     
 [3] "School of Education"            "VC for Rsrch &amp; Grad Education" 
 [5] "Sch of Med &amp; Public Health"     "Information Technology"        
 [7] "University Police Dept"         "School of Human Ecology"       
 [9] "College of Letters &amp; Science"   "Div for Teaching and Learning" 
[11] "Law School"                     "Business Services"             
[13] "College of Ag &amp; Life Science"   "General Services"              
[15] "Wi Veterinary Diagnostic Lab"   "International Division"        
[17] "Facilities Planning &amp; Mgmt"     "Wisconsin Public Media"        
[19] "School of Pharmacy"             "School of Veterinary Medicine" 
[21] "University Housing"             "College of Engineering"        
[23] "Division of Student Life"       "Wi State Laboratory Hygiene"   
[25] "Division of Continuing Studies" "General Library"               
[27] "School of Nursing"              "Nelson Inst Envrnmntal Study"  
[29] "Recreation &amp; Wellbeing"         "Wisconsin School of Business"  
[31] "Univ Health Services"           "Wisconsin Union"               
[33] "Enrollment Management"          "General Educational Admin"     
[35] "Officer Education"              "Division of The Arts"          </code></pre>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Shows the number of rows corresponding to each Division</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(salary.data<span class="sc">$</span>Division)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
             Business Services   College of Ag &amp; Life Science 
                           116                           1185 
        College of Engineering   College of Letters &amp; Science 
                           803                           2601 
 Div for Teaching and Learning Division of Continuing Studies 
                           111                            165 
      Division of Student Life           Division of The Arts 
                           113                              9 
         Enrollment Management     Facilities Planning &amp; Mgmt 
                           164                           1167 
     General Educational Admin                General Library 
                            38                            183 
              General Services         Information Technology 
                           464                            529 
     Intercollegiate Athletics         International Division 
                           300                            131 
                    Law School   Nelson Inst Envrnmntal Study 
                           175                             89 
             Officer Education         Recreation &amp; Wellbeing 
                            36                             70 
    Sch of Med &amp; Public Health            School of Education 
                          5998                            856 
       School of Human Ecology              School of Nursing 
                           161                            145 
            School of Pharmacy  School of Veterinary Medicine 
                          1628                            617 
          Univ Health Services             University Housing 
                           192                            465 
        University Police Dept         UW - Madison Extension 
                           129                            617 
 VC for Rsrch &amp; Grad Education    Wi State Laboratory Hygiene 
                          1101                            361 
  Wi Veterinary Diagnostic Lab         Wisconsin Public Media 
                            95                            297 
  Wisconsin School of Business                Wisconsin Union 
                           381                            365 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Shows a 2X2 table for Division and Employee Category</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(salary.data<span class="sc">$</span>Division, salary.data<span class="sc">$</span><span class="st">`</span><span class="at">Employee Category</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                
                                   AS   CJ   CP   FA
  Business Services                63    3   50    0
  College of Ag &amp; Life Science    693   23  224  245
  College of Engineering          538    2   52  211
  College of Letters &amp; Science   1497    7  224  873
  Div for Teaching and Learning   107    0    4    0
  Division of Continuing Studies  138    2   14   11
  Division of Student Life        101    0   12    0
  Division of The Arts              9    0    0    0
  Enrollment Management           144    1   19    0
  Facilities Planning &amp; Mgmt      267    0  900    0
  General Educational Admin        34    0    4    0
  General Library                 122    2   59    0
  General Services                408    6   50    0
  Information Technology          296    6  227    0
  Intercollegiate Athletics       198    0  102    0
  International Division          115    2   14    0
  Law School                      124    0   18   33
  Nelson Inst Envrnmntal Study     69    1    7   12
  Officer Education                33    0    3    0
  Recreation &amp; Wellbeing           48    0   22    0
  Sch of Med &amp; Public Health     5108   18  417  455
  School of Education             646    4   41  165
  School of Human Ecology         106    2   14   39
  School of Nursing               112    1   11   21
  School of Pharmacy             1590    0    7   31
  School of Veterinary Medicine   359   18  192   48
  Univ Health Services            130    0   62    0
  University Housing              140    5  320    0
  University Police Dept           16    3  110    0
  UW - Madison Extension          520   10   30   57
  VC for Rsrch &amp; Grad Education   944    3  154    0
  Wi State Laboratory Hygiene     236    5  120    0
  Wi Veterinary Diagnostic Lab     62    0   33    0
  Wisconsin Public Media          272    2   23    0
  Wisconsin School of Business    281    0   11   89
  Wisconsin Union                 124    4  237    0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Shows a histogram for Annual FTE Adjusted Salary</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Note that you can use various parameters to make this not look terrible.</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(salary.data<span class="sc">$</span><span class="st">`</span><span class="at">Annual FTE Adjusted Salary</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Tutorial_Text_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Sets the number of bins in the histogram to a 50 from the default.</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(salary.data<span class="sc">$</span><span class="st">`</span><span class="at">Annual FTE Adjusted Salary</span><span class="st">`</span>, <span class="at">breaks =</span> <span class="dv">50</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Tutorial_Text_files/figure-html/unnamed-chunk-13-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="combining-multiple-data-sources" class="level2">
<h2 class="anchored" data-anchor-id="combining-multiple-data-sources">Combining Multiple Data Sources</h2>
<p>We’ve looked at a few functions that will help to summarize or change the contents of a data set, but one of the reasons to use R is that it is easy to combine data sets as well.</p>
<p><a href="https://github.com/mjzenz/R-Tutorial/tree/master/Example_Data">Download</a> the pay grades .xlsx file and place it into the same “Example_Data” folder as the salary file. We are going to load it and then join it to our existing data set.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Load pay_grades.xlsx into the variable pay.grades</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>pay.grades <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"Example_Data/pay_grades.xlsx"</span>)</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Display data frame</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>pay.grades</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 52 × 2
   `Salary Grade` `Annual Salary Range`
            &lt;dbl&gt; &lt;chr&gt;                
 1             15 $31,200–63,800       
 2             16 $33,700–68,970       
 3             17 $36,500–74,470       
 4             18 $39,400–80,520       
 5             19 $42,600–86,900       
 6             20 $46,000–93,940       
 7             21 $49,700–101,530      
 8             22 $53,700–109,670      
 9             23 $58,000–118,360      
10             24 $63,800–130,240      
# ℹ 42 more rows</code></pre>
</div>
</div>
<section id="exercise-making-variable-comparable" class="level3">
<h3 class="anchored" data-anchor-id="exercise-making-variable-comparable">Exercise: Making variable comparable</h3>
<p>Examine the “Salary Grade” variables in the pay.grades and salary.data to figure out whether they can be the matching columns for our join. If not, how do they need to change to make them comparable?</p>
</section>
<section id="fixing-mismatched-columns" class="level3">
<h3 class="anchored" data-anchor-id="fixing-mismatched-columns">Fixing mismatched columns</h3>
<p>There are two ways of taking care of this. One is simpler than the other. We will look at both methods, but will only apply the more difficult to the data sets.</p>
<p>The first method (simpler) just converts “Salary Grade” in salary.data to a number using the <strong>as.numeric()</strong> function. There are several other similar functions (<strong>as.character()</strong>, <strong>as.Date()</strong>, <strong>as.logical()</strong>) that convert columns to other types of data. The downside of this is that it changes the original form of Salary Grade as a three digit value with a leading 0.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Convert Salary Grade to a number</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>salary.data <span class="ot">&lt;-</span> salary.data <span class="sc">%&gt;%</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>          <span class="fu">mutate</span>(<span class="st">`</span><span class="at">Salary Grade</span><span class="st">`</span> <span class="ot">=</span>  <span class="fu">as.numeric</span>(<span class="st">`</span><span class="at">Salary Grade</span><span class="st">`</span>))</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>salary.data<span class="sc">$</span><span class="st">`</span><span class="at">Salary Grade</span><span class="st">`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The second method edits pay.grades using the <strong>str_pad()</strong> function, adding a leading 0 to all values in the “Salary Grade” column so that they match the column in salary.data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co">#This makes Salary Grade into a character (as.character()) and then pads it on the</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="co">#left side to 3 spaces using the "0" character.</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>pay.grades <span class="ot">&lt;-</span> pay.grades <span class="sc">%&gt;%</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>          <span class="fu">mutate</span>(<span class="st">`</span><span class="at">Salary Grade</span><span class="st">`</span> <span class="ot">=</span>  <span class="fu">str_pad</span>(<span class="fu">as.character</span>(<span class="st">`</span><span class="at">Salary Grade</span><span class="st">`</span>), <span class="at">width =</span> <span class="dv">3</span>, </span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">side =</span> <span class="st">"left"</span>, <span class="at">pad =</span> <span class="st">"0"</span>))</span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>pay.grades<span class="sc">$</span><span class="st">`</span><span class="at">Salary Grade</span><span class="st">`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "015" "016" "017" "018" "019" "020" "021" "022" "023" "024" "025" "026"
[13] "027" "028" "029" "030" "031" "032" "033" "034" "035" "051" "052" "053"
[25] "054" "055" "056" "057" "058" "059" "060" "061" "062" "063" "064" "065"
[37] "066" "067" "068" "069" "070" "072" "073" "074" "075" "077" "078" "079"
[49] "080" "097" "098" "099"</code></pre>
</div>
</div>
</section>
<section id="joins" class="level3">
<h3 class="anchored" data-anchor-id="joins">Joins</h3>
<p>After we know that the columns will match correctly, we can use <strong>inner_join()</strong> to add the “Annual Salary Range” data to each row of salary.data (saving the result to a new variable). Note that there are four types of joins we will discuss - inner_join will only keep rows that match in both data frames. Joins in R are similar to <a href="https://www.edureka.co/blog/sql-joins-types">joins in SQL</a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Join the two data sets and save the resultant data frame to </span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="co">#salary.data.with.pay.grades</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Note that you can also use a %&gt;% for joins, but then you leave out x.</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>salary.data.with.pay.grades <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(<span class="at">x =</span> salary.data, <span class="at">y =</span> pay.grades, <span class="at">by =</span> <span class="st">"Salary Grade"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The problem with inner joins is that you lose data if it does not match in the other data set. For instance, consider a version of pay.grades that is missing a bunch of the pay.grades</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Using inner_join will eliminate rows in salary.data that don't show up in pay.grades.</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Use as.numeric to convert the Salary Grade to a number for the filter.</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>pay.grades.shorter <span class="ot">&lt;-</span> pay.grades <span class="sc">%&gt;%</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">filter</span>(<span class="fu">as.numeric</span>(<span class="st">`</span><span class="at">Salary Grade</span><span class="st">`</span>) <span class="sc">&lt;</span> <span class="dv">20</span>)</span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>pay.grades.shorter</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  `Salary Grade` `Annual Salary Range`
  &lt;chr&gt;          &lt;chr&gt;                
1 015            $31,200–63,800       
2 016            $33,700–68,970       
3 017            $36,500–74,470       
4 018            $39,400–80,520       
5 019            $42,600–86,900       </code></pre>
</div>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Inner_join will only keep rows found in both salary.data and pay.grades.shorter</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>salary.data.shorter <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(<span class="at">x =</span> salary.data, <span class="at">y =</span> pay.grades.shorter, <span class="at">by =</span> <span class="st">"Salary Grade"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Compare salary.data.shorter with the original salary.data. We’ve lost a lot of rows!</p>
<p>Perhaps we want to keep all of the rows in salary.data, but just have NA values where pay.grades.shorter doesn’t match. A <strong>left_join()</strong> will do this. A <strong>right_join()</strong> will do the same thing, but will keep all rows in the y data frame instead of the x data frame. Finally a **full_join()* will keep all rows in both data frames regardless of whether they match.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>pay.grades.shorter</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  `Salary Grade` `Annual Salary Range`
  &lt;chr&gt;          &lt;chr&gt;                
1 015            $31,200–63,800       
2 016            $33,700–68,970       
3 017            $36,500–74,470       
4 018            $39,400–80,520       
5 019            $42,600–86,900       </code></pre>
</div>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Left_join will keep all rows found in both salary.data and those in pay.grades.shorter that match.</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>salary.data.left <span class="ot">&lt;-</span> <span class="fu">left_join</span>(<span class="at">x =</span> salary.data, <span class="at">y =</span> pay.grades.shorter, <span class="at">by =</span> <span class="st">"Salary Grade"</span>)</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Right_join will keep all rows found in pay.grades.shorter and those in salary.data that match.</span></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>salary.data.right <span class="ot">&lt;-</span> <span class="fu">right_join</span>(<span class="at">x =</span> salary.data, <span class="at">y =</span> pay.grades.shorter, <span class="at">by =</span> <span class="st">"Salary Grade"</span>)</span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a><span class="co">#Full_join will keep all rows found in both data sets regardless of whether they match.</span></span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a>salary.data.full <span class="ot">&lt;-</span> <span class="fu">full_join</span>(<span class="at">x =</span> salary.data, <span class="at">y =</span> pay.grades.shorter, <span class="at">by =</span> <span class="st">"Salary Grade"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="section-exercise" class="level2">
<h2 class="anchored" data-anchor-id="section-exercise">Section Exercise</h2>
<p>Let’s take everything you’ve learned in this section and apply to the data that we’ve been working with.</p>
<p>Start out by making sure that you have a fresh copy of the data, by loading it again. It might also be a good idea to do this work in a fresh script called “Section1_Exercise.R”. If you still need to download the salary and/or pay grade data find descriptions of how to do that (and where to put it) above.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Sets the working directory to the proper folder if necessary</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"~/R-Tutorial"</span>)</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Load the salary data</span></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>salary.data <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"Example_Data/salary_data.xlsx"</span>)</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a><span class="co">#Load the pay grade data</span></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>pay.grades <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"Example_Data/pay_grades.xlsx"</span>)</span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a><span class="co">#Change the pay grade data salary grades to match format in salary data.</span></span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a><span class="co">#Then join together (not the "." stands for the data coming through the pipe above.)</span></span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a>salary.data <span class="ot">&lt;-</span> pay.grades <span class="sc">%&gt;%</span></span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a>          <span class="fu">mutate</span>(<span class="st">`</span><span class="at">Salary Grade</span><span class="st">`</span> <span class="ot">=</span>  <span class="fu">str_pad</span>(<span class="fu">as.character</span>(<span class="st">`</span><span class="at">Salary Grade</span><span class="st">`</span>), <span class="at">width =</span> <span class="dv">3</span>, </span>
<span id="cb64-11"><a href="#cb64-11" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">side =</span> <span class="st">"left"</span>, <span class="at">pad =</span> <span class="st">"0"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb64-12"><a href="#cb64-12" aria-hidden="true" tabindex="-1"></a>          <span class="fu">inner_join</span>(<span class="at">x =</span> ., <span class="at">y =</span> salary.data, <span class="at">by =</span> <span class="st">"Salary Grade"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Use this data to determine the mean (average) percent of the maximum salary of full-time positions for each salary grade. This is going to require quite a few steps because of the current state of the data. Here are those steps (with a few hints).</p>
<ol type="1">
<li><p>Split the column “Annual Salary Range” into two variables (the minimum and maximum salaries for the grade) using <a href="https://stringr.tidyverse.org/reference/str_split.html">str_split()</a>. We haven’t looked at this function before, but this will be good practice for figuring out how to use a novel function. Play around with it until you get the result you want.</p></li>
<li><p>Eliminated the “$” and “,” from the two variables you created in step 1. This one is harder so I’ll just give you the code for the gsub() function, which will substitute instances of some set of characters with instances of another. In this case, “$” and “,” are made into “” (no space). You’ll need to use this in a mutate statement and substitute “COLUMN” for the column you are changing. Finally make sure to convert the minimum and maximum salaries to numbers from character strings.</p></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">"[$,]"</span>, <span class="st">""</span>, COLUMN)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="3" type="1">
<li><p>Filter for only “Full-time Equivalent” that is 1 (full-time positions).</p></li>
<li><p>In each row divide the “Annual Full Salary” by the maximum salary in the salary range and then multiply that by 100 to get the percentage of the maximum for each salary.</p></li>
<li><p>Group by salary grade</p></li>
<li><p>Calculate the mean percentage (from 4) and number of people in each group.</p></li>
<li><p>Do you see any patterns from the data you’ve calculated?</p></li>
</ol>
</section>
</section>
<section id="appendix-a-data-types" class="level1">
<h1>Appendix A: Data Types</h1>
<p>R will assign a <strong>variable type</strong> when you assign a value to a variable. You can always write over a variable with new values. Here are a few types. There are more types that I will introduce later, because they are a bit more complex.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># number</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a><span class="co"># character string</span></span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="st">"Wisconsin"</span></span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="st">"Texas"</span></span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a><span class="co"># logical</span></span>
<span id="cb66-9"><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a>tf.a <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span>
<span id="cb66-10"><a href="#cb66-10" aria-hidden="true" tabindex="-1"></a>tf.b <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb66-11"><a href="#cb66-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-12"><a href="#cb66-12" aria-hidden="true" tabindex="-1"></a><span class="co"># date - these are like character strings, but allow for useful functions for dates</span></span>
<span id="cb66-13"><a href="#cb66-13" aria-hidden="true" tabindex="-1"></a>date1 <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2020-06-23"</span>)</span>
<span id="cb66-14"><a href="#cb66-14" aria-hidden="true" tabindex="-1"></a><span class="fu">weekdays</span>(date1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Tuesday"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co"># factor - these are like character strings, but only allow for a set of levels as values. </span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="co">#         They will be more useful when they are vectors, described below.</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>factor1 <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="st">"Wisconsin"</span>, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"California"</span>, <span class="st">"Idaho"</span>, </span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>                                          <span class="st">"New York"</span>, <span class="st">"Wisconsin"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="appendix-b-math-and-logical-operators" class="level1">
<h1>Appendix B: Math and Logical Operators</h1>
<p>There are mathematical and logical operators. For the expected outputs of logical operators see their <a href="https://sites.millersville.edu/bikenaga/math-proof/truth-tables/truth-tables.html">truth tables</a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mathematical Operators output numerical values</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">+</span><span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>x<span class="sc">+</span>y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7.3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>x<span class="sc">/</span>y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.433333</code></pre>
</div>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>x<span class="sc">^</span><span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 18.49</code></pre>
</div>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>x<span class="sc">^</span>y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 79.507</code></pre>
</div>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Square root requires a function rather than an operator</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.073644</code></pre>
</div>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co"># These can be output to variables too.</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> x<span class="sc">*</span>y</span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>z</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 12.9</code></pre>
</div>
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Logical Operators output logical values, </span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a><span class="co">#some use mathematical inputs...</span></span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a><span class="co"># is greater than</span></span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a>x <span class="sc">&gt;</span> y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co"># is less than</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>x <span class="sc">&lt;</span> y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co"># is equal to, notice that you use == for logical equals</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>x <span class="sc">==</span> y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co"># is not equal to</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>x <span class="sc">!=</span> y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="co"># these can also be output to variables</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>tf.c <span class="ot">&lt;-</span> x <span class="sc">&gt;</span> y</span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>tf.c</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="co"># others use logical inputs...</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a><span class="co"># logical "and"</span></span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a><span class="cn">TRUE</span> <span class="sc">&amp;</span> <span class="cn">TRUE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="cn">TRUE</span> <span class="sc">&amp;</span> <span class="cn">FALSE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span> <span class="sc">&amp;</span> <span class="cn">FALSE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>tf.a <span class="sc">&amp;</span> tf.c</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="co"># logical "or" (inclusive)</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a><span class="cn">TRUE</span> <span class="sc">|</span> <span class="cn">TRUE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="cn">TRUE</span> <span class="sc">|</span> <span class="cn">FALSE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span> <span class="sc">|</span> <span class="cn">FALSE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>tf.a <span class="sc">|</span> tf.c</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co"># logical "not"</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="cn">TRUE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="cn">FALSE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span>(tf.a <span class="sc">&amp;</span> tf.c)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="co"># equal and not equal, can be used with </span></span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a><span class="co">#any data type to determine if the two values are equal.</span></span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a><span class="cn">TRUE</span> <span class="sc">==</span> <span class="cn">FALSE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="st">"Wisconsin"</span> <span class="sc">==</span> <span class="st">"Texas"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="st">"Wisconsin"</span> <span class="sc">==</span> <span class="st">"Wisconsin"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="st">"Wisconsin"</span> <span class="sc">!=</span> <span class="st">"Texas"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</section>
<section id="appendix-c-vectors-and-matrices" class="level1">
<h1>Appendix C: Vectors and Matrices</h1>
<section id="vectors" class="level2">
<h2 class="anchored" data-anchor-id="vectors">Vectors</h2>
<p>You can also construct sets of values called <strong>vectors</strong>. A vector in programming (distinct from its use in math or physics) is a one-dimensional array of values (examples below). One way to create a vector is with the combine function, <strong>c()</strong>. This provides a chance to “call” (use) a <strong>function</strong>. Functions are called using their name (“c” in this case) and the parentheses containing <strong>parameters</strong>. Parameters contain the information the function needs to do what it is meant to do. Some functions will have lots of different types of information they need to operate, whereas others will need only one piece of information (or even none). Functions can also be set up with various default parameters, which can be omitted when it is called if you want to keep those defaults. Some functions like “[]” and “:” don’t use this format, but those are special and rare.</p>
<p>Below I create several vectors. Notice that they can be created out of any type of data and even existing variables. The variable is shown right after the code for creating it.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="co">#A number vector inputting all values</span></span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a>vnum1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">56</span>, <span class="dv">9</span>, <span class="dv">11</span>)</span>
<span id="cb123-3"><a href="#cb123-3" aria-hidden="true" tabindex="-1"></a>vnum1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  5 10 56  9 11</code></pre>
</div>
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A number vector where some values are already stored in variables</span></span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>vnum2 <span class="ot">&lt;-</span> <span class="fu">c</span>(x, y, <span class="dv">8</span> )</span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a>vnum2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4.3 3.0 8.0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A number vector that is a combination of two existing vectors</span></span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a>vnum3 <span class="ot">&lt;-</span> <span class="fu">c</span>(vnum1,vnum2)</span>
<span id="cb127-3"><a href="#cb127-3" aria-hidden="true" tabindex="-1"></a>vnum3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  5.0 10.0 56.0  9.0 11.0  4.3  3.0  8.0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A character vector</span></span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a>vchar1 <span class="ot">&lt;-</span> <span class="fu">c</span>(z, i, <span class="st">"Maryland"</span>, <span class="st">"California"</span>)</span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a>vchar1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "12.9"       "Texas"      "Maryland"   "California"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A logical vector</span></span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a>vlogic1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, tf.a, tf.b)</span>
<span id="cb131-3"><a href="#cb131-3" aria-hidden="true" tabindex="-1"></a>vlogic1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE FALSE  TRUE FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Vectors can only contain the same data type, </span></span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a><span class="co">#so mixed vectors will be converted to characters, which is the most inclusive type.</span></span>
<span id="cb133-3"><a href="#cb133-3" aria-hidden="true" tabindex="-1"></a>vlogic.mixed1 <span class="ot">&lt;-</span> <span class="fu">c</span>(vnum3, vchar1, vlogic1)</span>
<span id="cb133-4"><a href="#cb133-4" aria-hidden="true" tabindex="-1"></a>vlogic.mixed1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "5"          "10"         "56"         "9"          "11"        
 [6] "4.3"        "3"          "8"          "12.9"       "Texas"     
[11] "Maryland"   "California" "TRUE"       "TRUE"       "FALSE"     
[16] "TRUE"       "FALSE"     </code></pre>
</div>
</div>
<p>There are a number of ways to create a vector without naming each item. A couple of commonly used methods are the “<strong>:</strong>” and the <strong>seq()</strong> functions, which produce <strong>sequences</strong> of numbers. In seq() “from”, “to”, and “by” are all parameters. Unlike for variables, you use the <strong>=</strong> to assign values to them instead of the “&lt;-”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A sequence of numbers from 2 to 18</span></span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a>sq1 <span class="ot">&lt;-</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">18</span></span>
<span id="cb135-3"><a href="#cb135-3" aria-hidden="true" tabindex="-1"></a>sq1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18</code></pre>
</div>
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A sequence of numbers from 2 to 18 by 2s</span></span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a>sq2 <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">2</span>, <span class="at">to =</span> <span class="dv">18</span>, <span class="at">by  =</span> <span class="dv">2</span>)</span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true" tabindex="-1"></a>sq2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  2  4  6  8 10 12 14 16 18</code></pre>
</div>
</div>
<p>You can specify the location in a vector by using an <strong>index</strong>. This also allows you to <strong>subset</strong> with the “[]” function. At this point you should also realize that the “[1]” you see at the beginning of all R output is the index at that point in the vector. With each new row of output, R will tell you the first index in that row by using the “[]”. There are a variety of ways to subset using these indexes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="co"># The 3rd number in the vnum1 vector</span></span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a>subsetnum1 <span class="ot">&lt;-</span> vnum1[<span class="dv">3</span>]</span>
<span id="cb139-3"><a href="#cb139-3" aria-hidden="true" tabindex="-1"></a>subsetnum1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 56</code></pre>
</div>
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="co"># The 2nd through 5th index in vnum3</span></span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a>subsetnum2 <span class="ot">&lt;-</span> vnum3[<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>]</span>
<span id="cb141-4"><a href="#cb141-4" aria-hidden="true" tabindex="-1"></a>subsetnum2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10 56  9 11</code></pre>
</div>
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using the sequence saved above, </span></span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a><span class="co">#the 2nd through 18th items, by 2s of vlogic.mixed1</span></span>
<span id="cb143-3"><a href="#cb143-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-4"><a href="#cb143-4" aria-hidden="true" tabindex="-1"></a>subsetmixed1 <span class="ot">&lt;-</span> vlogic.mixed1[sq2]</span>
<span id="cb143-5"><a href="#cb143-5" aria-hidden="true" tabindex="-1"></a>subsetmixed1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "10"         "9"          "4.3"        "8"          "Texas"     
[6] "California" "TRUE"       "TRUE"       NA          </code></pre>
</div>
</div>
<p>Once you can use vectors, you can start describing those vectors using a number of important functions. There is also the “<strong>%in%</strong>” operator that returns true if the value on the left is in the vector on the right.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="co"># vnum3</span></span>
<span id="cb145-2"><a href="#cb145-2" aria-hidden="true" tabindex="-1"></a>vnum3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  5.0 10.0 56.0  9.0 11.0  4.3  3.0  8.0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mean of vnum3</span></span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(vnum3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 13.2875</code></pre>
</div>
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="co"># median of vnum3</span></span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(vnum3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8.5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="co"># number of items in vnum3</span></span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(vnum3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8</code></pre>
</div>
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="co"># in the vector</span></span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb153-3"><a href="#cb153-3" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="sc">%in%</span> vnum3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>Operations and functions can also be applied to vectors much like they are to values. When vectors of the same size are used in an operation, the operation applies to each index in the vectors in turn and the results are in a new vector. For instance if one vector is added to another, the first index of the first vector is added to the first index in the second vector and so on. When one <em>value</em> is involved in an operation with a vector that value is used with all indexes of the vector. When two vectors of different size are involved in an operation, the result is more complex. So you should avoid this unless you know what you are doing.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Single number operation</span></span>
<span id="cb155-2"><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a>vnum4 <span class="ot">&lt;-</span> vnum3 <span class="sc">*</span> <span class="dv">2</span></span>
<span id="cb155-3"><a href="#cb155-3" aria-hidden="true" tabindex="-1"></a>vnum4</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  10.0  20.0 112.0  18.0  22.0   8.6   6.0  16.0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Operation between two vectors</span></span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a>vnum3 <span class="sc">+</span> vnum4</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  15.0  30.0 168.0  27.0  33.0  12.9   9.0  24.0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Operations can be complex as well and can utilize as many vectors as needed</span></span>
<span id="cb159-2"><a href="#cb159-2" aria-hidden="true" tabindex="-1"></a>vnum5 <span class="ot">&lt;-</span> vnum4 <span class="sc">-</span> (vnum3 <span class="sc">+</span> <span class="dv">10</span>)</span>
<span id="cb159-3"><a href="#cb159-3" aria-hidden="true" tabindex="-1"></a>vnum5</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -5.0  0.0 46.0 -1.0  1.0 -5.7 -7.0 -2.0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Logical vectors also work in the same way</span></span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-3"><a href="#cb161-3" aria-hidden="true" tabindex="-1"></a>vnum5 <span class="sc">&gt;</span> vnum4</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</code></pre>
</div>
</div>
<p>It is a bit obscure at this point why operations between vectors are so important, but this will serve the basis of creating new data columns using two (or more) existing columns.</p>
</section>
<section id="matrices" class="level2">
<h2 class="anchored" data-anchor-id="matrices">Matrices</h2>
<p>Whereas a vector is a single dimensional set of values, a <strong>matrix</strong> is multidimensional. Like vectors, matrices can only contain values of the same type. They are primarily mathematical objects that probably won’t be of great use to you. However, they are similar enough to data frames, which are the primary multi-dimensional data structures in R, so I will spend some time introducing them. In particular, the process of subsetting matrices is instructive for subsetting data frames.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb163"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a matrix by providing a vector and the number of rows and/or columns (ncol).</span></span>
<span id="cb163-2"><a href="#cb163-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-3"><a href="#cb163-3" aria-hidden="true" tabindex="-1"></a>matrix1 <span class="ot">&lt;-</span> <span class="fu">matrix</span>(sq2, <span class="at">ncol =</span> <span class="dv">3</span>)</span>
<span id="cb163-4"><a href="#cb163-4" aria-hidden="true" tabindex="-1"></a>matrix1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]    2    8   14
[2,]    4   10   16
[3,]    6   12   18</code></pre>
</div>
</div>
<p>The column and row labels for this matrix should be familiar to you as the subset brackets (“[]”). However, now they also contain a comma: for rows it is just after the index and for columns it is just before the index. This is how two dimensional indexes are specified in R, and it will be very important for understanding how this is used to subset data.</p>
<p>Let’s begin exploring how you subset two dimensional data in R by extracting cells from this matrix.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="co"># value in the 2nd row and 1st column</span></span>
<span id="cb165-2"><a href="#cb165-2" aria-hidden="true" tabindex="-1"></a>matrix1[<span class="dv">2</span>,<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb167"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="co"># all values in the 2nd row</span></span>
<span id="cb167-2"><a href="#cb167-2" aria-hidden="true" tabindex="-1"></a>matrix1[<span class="dv">2</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  4 10 16</code></pre>
</div>
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="co">#all values in the 1st column</span></span>
<span id="cb169-2"><a href="#cb169-2" aria-hidden="true" tabindex="-1"></a>matrix1[,<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 4 6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="co">#all values in the 2nd and 3rd columns</span></span>
<span id="cb171-2"><a href="#cb171-2" aria-hidden="true" tabindex="-1"></a>matrix1[,<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2]
[1,]    8   14
[2,]   10   16
[3,]   12   18</code></pre>
</div>
</div>
<p>Notice that the last subset produces another matrix rather than just a vector, because there are still two columns - it is still two-dimensional.</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>
