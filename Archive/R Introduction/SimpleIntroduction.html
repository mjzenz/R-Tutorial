<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Michael J Zenz">

<title>R for Office Drones</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="SimpleIntroduction_files/libs/clipboard/clipboard.min.js"></script>
<script src="SimpleIntroduction_files/libs/quarto-html/quarto.js"></script>
<script src="SimpleIntroduction_files/libs/quarto-html/popper.min.js"></script>
<script src="SimpleIntroduction_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="SimpleIntroduction_files/libs/quarto-html/anchor.min.js"></script>
<link href="SimpleIntroduction_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="SimpleIntroduction_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="SimpleIntroduction_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="SimpleIntroduction_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="SimpleIntroduction_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#basics" id="toc-basics" class="nav-link active" data-scroll-target="#basics">Basics</a>
  <ul class="collapse">
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#installation" id="toc-installation" class="nav-link" data-scroll-target="#installation">Installation</a></li>
  <li><a href="#variables" id="toc-variables" class="nav-link" data-scroll-target="#variables">Variables</a></li>
  <li><a href="#data-types" id="toc-data-types" class="nav-link" data-scroll-target="#data-types">Data Types</a></li>
  <li><a href="#operators" id="toc-operators" class="nav-link" data-scroll-target="#operators">Operators</a></li>
  <li><a href="#vectors" id="toc-vectors" class="nav-link" data-scroll-target="#vectors">Vectors</a></li>
  </ul></li>
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data">Data</a>
  <ul class="collapse">
  <li><a href="#matrices-and-data-frames" id="toc-matrices-and-data-frames" class="nav-link" data-scroll-target="#matrices-and-data-frames">Matrices and Data Frames</a></li>
  <li><a href="#merging" id="toc-merging" class="nav-link" data-scroll-target="#merging">Merging</a></li>
  <li><a href="#aggregation" id="toc-aggregation" class="nav-link" data-scroll-target="#aggregation">Aggregation</a></li>
  </ul></li>
  <li><a href="#packages-and-functions" id="toc-packages-and-functions" class="nav-link" data-scroll-target="#packages-and-functions">Packages and Functions</a>
  <ul class="collapse">
  <li><a href="#cran-packages" id="toc-cran-packages" class="nav-link" data-scroll-target="#cran-packages">CRAN Packages</a></li>
  <li><a href="#functions" id="toc-functions" class="nav-link" data-scroll-target="#functions">Functions</a></li>
  <li><a href="#frequently-used-functions" id="toc-frequently-used-functions" class="nav-link" data-scroll-target="#frequently-used-functions">Frequently Used Functions</a></li>
  <li><a href="#installing-from-githubgitlab" id="toc-installing-from-githubgitlab" class="nav-link" data-scroll-target="#installing-from-githubgitlab">Installing from github/gitlab</a></li>
  </ul></li>
  <li><a href="#tidyverse" id="toc-tidyverse" class="nav-link" data-scroll-target="#tidyverse">Tidyverse</a>
  <ul class="collapse">
  <li><a href="#pipes-and-overall-structure" id="toc-pipes-and-overall-structure" class="nav-link" data-scroll-target="#pipes-and-overall-structure">Pipes and Overall Structure</a></li>
  <li><a href="#useful-tidy-functions" id="toc-useful-tidy-functions" class="nav-link" data-scroll-target="#useful-tidy-functions">Useful Tidy Functions</a></li>
  </ul></li>
  <li><a href="#connecting-to-data" id="toc-connecting-to-data" class="nav-link" data-scroll-target="#connecting-to-data">Connecting to Data</a>
  <ul class="collapse">
  <li><a href="#storing-credentials" id="toc-storing-credentials" class="nav-link" data-scroll-target="#storing-credentials">Storing Credentials</a></li>
  <li><a href="#connecting-to-uw-madison-data-sources" id="toc-connecting-to-uw-madison-data-sources" class="nav-link" data-scroll-target="#connecting-to-uw-madison-data-sources">Connecting to UW-Madison Data Sources</a></li>
  <li><a href="#querying-databases." id="toc-querying-databases." class="nav-link" data-scroll-target="#querying-databases.">Querying Databases.</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">R for Office Drones</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Michael J Zenz </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<!-- ::: {.panel-tabset} -->
<section id="basics" class="level2">
<h2 class="anchored" data-anchor-id="basics">Basics</h2>
<section id="introduction" class="level3">
<h3 class="anchored" data-anchor-id="introduction">Introduction</h3>
<p>R is a statistical and data programming language that also is useful for processing data and preparing reports. You perform operations by inputting text commands into a console. This text-based system provides a record of all commands performed, which makes it easy to revise a data process at any point.</p>
<p>You can save text commands to text files called <strong>scripts</strong>. When run, these scripts are processed from top to bottom. You can also run particular lines or chunks of code at a time. Scripts are just regular text files saved with the file extension .R. Alternatively, you can run commands that you type directly into the R console. But by doing this you won’t keep a record of what you have run, and so it is bad form. Almost all of your work with R will be done in scripts.</p>
<p>Most operations are performed through the use of various <strong>functions</strong>, which simplify complex operations into a single line of text. A number of functions come built into R (<strong>Base-R</strong>), but you can expand the set of functions available to you by installing various <strong>packages</strong>. More on this in a later section.</p>
<p>In this section, I will describe a number of Base-R functions (along with a few functions outside of Base that are vital). Most of these are foundational to the language, and so are important to understand before moving on to other functions that make using R easier. Note that in later sections I will show you how to use a different style of R code that is possible with the <strong>tidyverse</strong> set of packages, maintained by the same company that makes the R-Studio program. Some people skip right to this way of coding, but I think it misses something important about how R works. Anyway, that’s my view of it!</p>
</section>
<section id="installation" class="level3">
<h3 class="anchored" data-anchor-id="installation">Installation</h3>
<p>Although R itself is a command-line program, it is easier to use with a graphical interface. This allows you to see the R command-line, scripts, plots, files, and R objects all in one place. The most popular graphical interface for R is <strong>R Studio</strong>.</p>
<p>First install the <a href="https://cran.r-project.org/bin/windows/base/">R programming language</a>, and then the <a href="https://posit.co/download/rstudio-desktop/">R-studio</a> graphical interface. Accept all defaults during the installation. Once you have completed the installation, open R-studio to get started. It should find your installation of R automatically.</p>
</section>
<section id="variables" class="level3">
<h3 class="anchored" data-anchor-id="variables">Variables</h3>
<p>You assign values to variables in memory using the <strong>&lt;-</strong> operator.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This assigns 4.3 to the variable x</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fl">4.3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In the example above you can think of 4.3 as being put into a variable called <em>x</em>. Any line with a <strong>#</strong> in front of it is interpreted by R as a <strong>comment</strong>, and so is ignored by it when it runs. Lines can continue by using a carriage return, as long as an operator is included just before the return. This will help you to keep code from sprawling.</p>
<p>You can see what is in x by just typing those variables into the terminal (or using R-studio’s Environment feature at the top right pane to look at them).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4.3</code></pre>
</div>
</div>
</section>
<section id="data-types" class="level3">
<h3 class="anchored" data-anchor-id="data-types">Data Types</h3>
<p>The <strong>output</strong> of the R command “x” can be seen in the box below that command (“## [1] 4.3”). “##” in this introduction just indicates that this is R output printed here - you won’t see that part in your R terminal. You will just see “[1]”, which is the item index (more on that later), and the value in the variable “4.3”.</p>
<p>R will assign a <strong>variable type</strong> when you assign a value to a variable. You can always write over a variable with new values. Here are a few types. There are more types that I will introduce later, because they are a bit more complex.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># number</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"># character string</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="st">"Wisconsin"</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="st">"Texas"</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co"># logical</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>tf.a <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>tf.b <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="co"># date - these are like character strings, but allow for useful functions for dates</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>date1 <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2020-06-23"</span>)</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="fu">weekdays</span>(date1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Tuesday"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># factor - these are like character strings, but only allow for a set of levels as values. </span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co">#         They will be more useful when they are vectors, described below.</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>factor1 <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="st">"Wisconsin"</span>, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"California"</span>, <span class="st">"Idaho"</span>, </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>                                          <span class="st">"New York"</span>, <span class="st">"Wisconsin"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="operators" class="level3">
<h3 class="anchored" data-anchor-id="operators">Operators</h3>
<p>Along with data types there are mathematical and logical operators. For the expected outputs of logical operators see their <a href="https://sites.millersville.edu/bikenaga/math-proof/truth-tables/truth-tables.html">truth tables</a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mathematical Operators output numerical values</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">+</span><span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>x<span class="sc">+</span>y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7.3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>x<span class="sc">/</span>y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.433333</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>x<span class="sc">^</span><span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 18.49</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>x<span class="sc">^</span>y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 79.507</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Square root requires a function rather than an operator</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.073644</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># These can be output to variables too.</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> x<span class="sc">*</span>y</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>z</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 12.9</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Logical Operators output logical values, </span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="co">#some use mathematical inputs...</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co"># is greater than</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>x <span class="sc">&gt;</span> y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># is less than</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>x <span class="sc">&lt;</span> y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># is equal to, notice that you use == for logical equals</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>x <span class="sc">==</span> y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># is not equal to</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>x <span class="sc">!=</span> y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># these can also be output to variables</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>tf.c <span class="ot">&lt;-</span> x <span class="sc">&gt;</span> y</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>tf.c</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># others use logical inputs...</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="co"># logical "and"</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="cn">TRUE</span> <span class="sc">&amp;</span> <span class="cn">TRUE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="cn">TRUE</span> <span class="sc">&amp;</span> <span class="cn">FALSE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span> <span class="sc">&amp;</span> <span class="cn">FALSE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>tf.a <span class="sc">&amp;</span> tf.c</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># logical "or" (inclusive)</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="cn">TRUE</span> <span class="sc">|</span> <span class="cn">TRUE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="cn">TRUE</span> <span class="sc">|</span> <span class="cn">FALSE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span> <span class="sc">|</span> <span class="cn">FALSE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>tf.a <span class="sc">|</span> tf.c</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># logical "not"</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="cn">TRUE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="cn">FALSE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span>(tf.a <span class="sc">&amp;</span> tf.c)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># equal and not equal, can be used with </span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="co">#any data type to determine if the two values are equal.</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="cn">TRUE</span> <span class="sc">==</span> <span class="cn">FALSE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="st">"Wisconsin"</span> <span class="sc">==</span> <span class="st">"Texas"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="st">"Wisconsin"</span> <span class="sc">==</span> <span class="st">"Wisconsin"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="st">"Wisconsin"</span> <span class="sc">!=</span> <span class="st">"Texas"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</section>
<section id="vectors" class="level3">
<h3 class="anchored" data-anchor-id="vectors">Vectors</h3>
<p>You can also construct sets of values called <strong>vectors</strong>. A vector in programming (distinct from its use in math or physics) is a one-dimensional array of values (examples below). One way to create a vector is with the combine function, <strong>c()</strong>. This provides a chance to “call” (use) a <strong>function</strong>. Functions are called using their name (“c” in this case) and the parentheses containing <strong>parameters</strong>. Parameters contain the information the function needs to do what it is meant to do. Some functions will have lots of different types of information they need to operate, whereas others will need only one piece of information (or even none). Functions can also be set up with various default parameters, which can be omitted when it is called if you want to keep those defaults. Some functions like “[]” and “:” don’t use this format, but those are special and rare.</p>
<p>Below I create several vectors. Notice that they can be created out of any type of data and even existing variables. The variable is shown right after the code for creating it.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co">#A number vector inputting all values</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>vnum1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">56</span>, <span class="dv">9</span>, <span class="dv">11</span>)</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>vnum1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  5 10 56  9 11</code></pre>
</div>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A number vector where some values are already stored in variables</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>vnum2 <span class="ot">&lt;-</span> <span class="fu">c</span>(x, y, <span class="dv">8</span> )</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>vnum2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4.3 3.0 8.0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A number vector that is a combination of two existing vectors</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>vnum3 <span class="ot">&lt;-</span> <span class="fu">c</span>(vnum1,vnum2)</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>vnum3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  5.0 10.0 56.0  9.0 11.0  4.3  3.0  8.0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A character vector</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>vchar1 <span class="ot">&lt;-</span> <span class="fu">c</span>(z, i, <span class="st">"Maryland"</span>, <span class="st">"California"</span>)</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>vchar1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "12.9"       "Texas"      "Maryland"   "California"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A logical vector</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>vlogic1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, tf.a, tf.b)</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>vlogic1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE FALSE  TRUE FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Vectors can only contain the same data type, </span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="co">#so mixed vectors will be converted to characters, which is the most inclusive type.</span></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>vlogic.mixed1 <span class="ot">&lt;-</span> <span class="fu">c</span>(vnum3, vchar1, vlogic1)</span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>vlogic.mixed1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "5"          "10"         "56"         "9"          "11"        
 [6] "4.3"        "3"          "8"          "12.9"       "Texas"     
[11] "Maryland"   "California" "TRUE"       "TRUE"       "FALSE"     
[16] "TRUE"       "FALSE"     </code></pre>
</div>
</div>
<p>There are a number of ways to create a vector without naming each item. A couple of commonly used methods are the “<strong>:</strong>” and the <strong>seq()</strong> functions, which produce <strong>sequences</strong> of numbers. In seq() “from”, “to”, and “by” are all parameters. Unlike for variables, you use the <strong>=</strong> to assign values to them instead of the “&lt;-”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A sequence of numbers from 2 to 18</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>sq1 <span class="ot">&lt;-</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">18</span></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>sq1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18</code></pre>
</div>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A sequence of numbers from 2 to 18 by 2s</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>sq2 <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">2</span>, <span class="at">to =</span> <span class="dv">18</span>, <span class="at">by  =</span> <span class="dv">2</span>)</span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>sq2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  2  4  6  8 10 12 14 16 18</code></pre>
</div>
</div>
<p>You can specify the location in a vector by using an <strong>index</strong>. This also allows you to <strong>subset</strong> with the “[]” function. At this point you should also realize that the “[1]” you see at the beginning of all R output is the index at that point in the vector. With each new row of output, R will tell you the first index in that row by using the “[]”. There are a variety of ways to subset using these indexes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co"># The 3rd number in the vnum1 vector</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>subsetnum1 <span class="ot">&lt;-</span> vnum1[<span class="dv">3</span>]</span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>subsetnum1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 56</code></pre>
</div>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co"># The 2nd through 5th index in vnum3</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>subsetnum2 <span class="ot">&lt;-</span> vnum3[<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>]</span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>subsetnum2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10 56  9 11</code></pre>
</div>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using the sequence saved above, </span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="co">#the 2nd through 18th items, by 2s of vlogic.mixed1</span></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>subsetmixed1 <span class="ot">&lt;-</span> vlogic.mixed1[sq2]</span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a>subsetmixed1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "10"         "9"          "4.3"        "8"          "Texas"     
[6] "California" "TRUE"       "TRUE"       NA          </code></pre>
</div>
</div>
<p>Once you can use vectors, you can start describing those vectors using a number of important functions. There is also the “<strong>%in%</strong>” operator that returns true if the value on the left is in the vector on the right.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="co"># vnum3</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>vnum3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  5.0 10.0 56.0  9.0 11.0  4.3  3.0  8.0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mean of vnum3</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(vnum3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 13.2875</code></pre>
</div>
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co"># median of vnum3</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(vnum3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8.5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co"># number of items in vnum3</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(vnum3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8</code></pre>
</div>
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="co"># in the vector</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="sc">%in%</span> vnum3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>Operations and functions can also be applied to vectors much like they are to values. When vectors of the same size are used in an operation, the operation applies to each index in the vectors in turn and the results are in a new vector. For instance if one vector is added to another, the first index of the first vector is added to the first index in the second vector and so on. When one <em>value</em> is involved in an operation with a vector that value is used with all indexes of the vector. When two vectors of different size are involved in an operation, the result is more complex. So you should avoid this unless you know what you are doing.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Single number operation</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>vnum4 <span class="ot">&lt;-</span> vnum3 <span class="sc">*</span> <span class="dv">2</span></span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>vnum4</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  10.0  20.0 112.0  18.0  22.0   8.6   6.0  16.0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Operation between two vectors</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>vnum3 <span class="sc">+</span> vnum4</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  15.0  30.0 168.0  27.0  33.0  12.9   9.0  24.0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Operations can be complex as well and can utilize as many vectors as needed</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>vnum5 <span class="ot">&lt;-</span> vnum4 <span class="sc">-</span> (vnum3 <span class="sc">+</span> <span class="dv">10</span>)</span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>vnum5</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -5.0  0.0 46.0 -1.0  1.0 -5.7 -7.0 -2.0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Logical vectors also work in the same way</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a>vnum5 <span class="sc">&gt;</span> vnum4</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</code></pre>
</div>
</div>
<p>It is a bit obscure at this point why operations between vectors are so important, but this will serve the basis of creating new data columns using two (or more) existing columns.</p>
</section>
</section>
<section id="data" class="level2">
<h2 class="anchored" data-anchor-id="data">Data</h2>
<section id="matrices-and-data-frames" class="level3">
<h3 class="anchored" data-anchor-id="matrices-and-data-frames">Matrices and Data Frames</h3>
<p>Whereas a vector is a single dimensional set of values, a <strong>matrix</strong> is multidimensional. Like vectors, matrices can only contain values of the same type. They are primarily mathematical objects that probably won’t be of great use to you. However, they are similar enough to data frames, which are the primary multi-dimensional data structures in R, so I will spend some time introducing them. In particular, the process of subsetting matrices is instructive for subsetting data frames.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a matrix by providing a vector and the number of rows and/or columns (ncol).</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>matrix1 <span class="ot">&lt;-</span> <span class="fu">matrix</span>(sq2, <span class="at">ncol =</span> <span class="dv">3</span>)</span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a>matrix1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]    2    8   14
[2,]    4   10   16
[3,]    6   12   18</code></pre>
</div>
</div>
<p>The column and row labels for this matrix should be familiar to you as the subset brackets (“[]”). However, now they also contain a comma: for rows it is just after the index and for columns it is just before the index. This is how two dimensional indexes are specified in R, and it will be very important for understanding how this is used to subset data.</p>
<p>Let’s begin exploring how you subset two dimensional data in R by extracting cells from this matrix.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co"># value in the 2nd row and 1st column</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>matrix1[<span class="dv">2</span>,<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="co"># all values in the 2nd row</span></span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>matrix1[<span class="dv">2</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  4 10 16</code></pre>
</div>
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="co">#all values in the 1st column</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>matrix1[,<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 4 6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co">#all values in the 2nd and 3rd columns</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a>matrix1[,<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2]
[1,]    8   14
[2,]   10   16
[3,]   12   18</code></pre>
</div>
</div>
<p>Notice that the last subset produces another matrix rather than just a vector, because there are still two columns - it is still two-dimensional.</p>
<p><strong>Data frames</strong> are also two-dimensional data but they have a number of additional features that make them the primary data structures in R. Most importantly, they allow for columns of different data types and descriptive names. A data frame requires that a set of equally long vectors be bound, such that each vector forms a column. Later I’ll be introducing some example data frames that come with R, but they can also be made out of vectors using the data.frame() function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Each column in a data frame is a vector</span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>rabbit_names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Ruthie"</span>, <span class="st">"Smokey"</span>, <span class="st">"Bug"</span>, <span class="st">"Wicket"</span>, <span class="st">"Wesley"</span>, </span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"Heather"</span>, <span class="st">"Ava"</span>, <span class="st">"Cinnabun"</span>, <span class="st">"Oliver"</span> , <span class="st">"Chestnut"</span>, </span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"Daisy"</span>, <span class="st">"Cadbury"</span>, <span class="st">"Chickpea"</span>, <span class="st">"Storm"</span>, <span class="st">"Mr. Fuzzy Foot"</span>, </span>
<span id="cb111-5"><a href="#cb111-5" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"Bouncer"</span>, <span class="st">"Midnight"</span>)</span>
<span id="cb111-6"><a href="#cb111-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-7"><a href="#cb111-7" aria-hidden="true" tabindex="-1"></a>rabbit_ears <span class="ot">&lt;-</span> <span class="fu">c</span>( <span class="st">"lop"</span>, <span class="st">"up"</span> , <span class="st">"up"</span>, <span class="st">"up"</span>, <span class="st">"up"</span>, <span class="st">"lop"</span>, <span class="st">"up"</span>, </span>
<span id="cb111-8"><a href="#cb111-8" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"up"</span>, <span class="st">"lop"</span>, <span class="st">"up"</span>, <span class="st">"up"</span>, <span class="st">"up"</span>, <span class="st">"up"</span>, <span class="st">"up"</span>, <span class="st">"up"</span>, <span class="st">"up"</span>, <span class="st">"up"</span>)</span>
<span id="cb111-9"><a href="#cb111-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-10"><a href="#cb111-10" aria-hidden="true" tabindex="-1"></a>rabbit_sex <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"F"</span>,<span class="st">"F"</span> ,<span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, </span>
<span id="cb111-11"><a href="#cb111-11" aria-hidden="true" tabindex="-1"></a>                <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>)</span>
<span id="cb111-12"><a href="#cb111-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-13"><a href="#cb111-13" aria-hidden="true" tabindex="-1"></a>rabbit_partner <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, </span>
<span id="cb111-14"><a href="#cb111-14" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"Chickpea"</span>, <span class="st">"Cadbury"</span>, <span class="cn">NA</span>, <span class="st">"Bouncer"</span>, </span>
<span id="cb111-15"><a href="#cb111-15" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"Mr. Fuzzy Foot"</span>, <span class="cn">NA</span>)</span>
<span id="cb111-16"><a href="#cb111-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-17"><a href="#cb111-17" aria-hidden="true" tabindex="-1"></a>rabbit_weight_lbs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">3.5</span>, <span class="fl">5.8</span> ,<span class="fl">2.5</span> , <span class="fl">2.6</span>, <span class="fl">3.2</span>, <span class="fl">4.2</span>,<span class="fl">3.9</span>, <span class="fl">2.7</span>, </span>
<span id="cb111-18"><a href="#cb111-18" aria-hidden="true" tabindex="-1"></a>                       <span class="fl">3.3</span>, <span class="fl">4.5</span>, <span class="fl">2.9</span>, <span class="dv">6</span>, <span class="fl">5.9</span>, <span class="fl">4.9</span>, <span class="fl">3.9</span>, <span class="dv">4</span>, <span class="fl">4.3</span>)</span>
<span id="cb111-19"><a href="#cb111-19" aria-hidden="true" tabindex="-1"></a>rabbit_length_inch <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">17</span>, <span class="dv">8</span>, <span class="fl">7.5</span>, <span class="dv">9</span>, <span class="dv">14</span>, <span class="dv">12</span>, <span class="dv">8</span>, <span class="dv">10</span>, <span class="dv">13</span>, <span class="fl">8.5</span>, </span>
<span id="cb111-20"><a href="#cb111-20" aria-hidden="true" tabindex="-1"></a>                        <span class="dv">18</span>, <span class="dv">19</span>, <span class="dv">14</span>, <span class="dv">12</span>, <span class="dv">12</span>, <span class="dv">14</span>)</span>
<span id="cb111-21"><a href="#cb111-21" aria-hidden="true" tabindex="-1"></a>rabbit_age_years <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>,  <span class="dv">5</span>, <span class="fl">1.5</span>, .<span class="dv">5</span>,.<span class="dv">8</span>, <span class="dv">2</span>,<span class="dv">3</span>, <span class="fl">1.3</span>,.<span class="dv">7</span>,<span class="dv">2</span>, <span class="fl">2.5</span>, <span class="dv">3</span>, <span class="dv">3</span>,</span>
<span id="cb111-22"><a href="#cb111-22" aria-hidden="true" tabindex="-1"></a>                      <span class="fl">1.5</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="fl">2.5</span>)</span>
<span id="cb111-23"><a href="#cb111-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-24"><a href="#cb111-24" aria-hidden="true" tabindex="-1"></a><span class="co"># You can use the data.frame() function to create a data frame out of vectors.</span></span>
<span id="cb111-25"><a href="#cb111-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Each vector (right) is assigned to a column name (left) using the "=".</span></span>
<span id="cb111-26"><a href="#cb111-26" aria-hidden="true" tabindex="-1"></a>rabbits <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">rabbit_name =</span> rabbit_names, <span class="at">ear_type =</span> rabbit_ears, </span>
<span id="cb111-27"><a href="#cb111-27" aria-hidden="true" tabindex="-1"></a>                      <span class="at">sex =</span> rabbit_sex,</span>
<span id="cb111-28"><a href="#cb111-28" aria-hidden="true" tabindex="-1"></a>                      <span class="at">partner =</span> rabbit_partner, <span class="at">weight_lbs =</span> rabbit_weight_lbs, </span>
<span id="cb111-29"><a href="#cb111-29" aria-hidden="true" tabindex="-1"></a>                      <span class="at">length_inches =</span> rabbit_length_inch, <span class="at">age =</span> rabbit_age_years)</span>
<span id="cb111-30"><a href="#cb111-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-31"><a href="#cb111-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Data frame can be output to the terminal or viewed in Environment.</span></span>
<span id="cb111-32"><a href="#cb111-32" aria-hidden="true" tabindex="-1"></a>rabbits</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      rabbit_name ear_type sex        partner weight_lbs length_inches age
1          Ruthie      lop   F           &lt;NA&gt;        3.5          10.0 2.0
2          Smokey       up   F           &lt;NA&gt;        5.8          17.0 5.0
3             Bug       up   M           &lt;NA&gt;        2.5           8.0 1.5
4          Wicket       up   M           &lt;NA&gt;        2.6           7.5 0.5
5          Wesley       up   M           &lt;NA&gt;        3.2           9.0 0.8
6         Heather      lop   F           &lt;NA&gt;        4.2          14.0 2.0
7             Ava       up   F           &lt;NA&gt;        3.9          12.0 3.0
8        Cinnabun       up   M           &lt;NA&gt;        2.7           8.0 1.3
9          Oliver      lop   M           &lt;NA&gt;        3.3          10.0 0.7
10       Chestnut       up   F           &lt;NA&gt;        4.5          13.0 2.0
11          Daisy       up   F           &lt;NA&gt;        2.9           8.5 2.5
12        Cadbury       up   F       Chickpea        6.0          18.0 3.0
13       Chickpea       up   F        Cadbury        5.9          19.0 3.0
14          Storm       up   M           &lt;NA&gt;        4.9          14.0 1.5
15 Mr. Fuzzy Foot       up   M        Bouncer        3.9          12.0 1.0
16        Bouncer       up   M Mr. Fuzzy Foot        4.0          12.0 1.0
17       Midnight       up   F           &lt;NA&gt;        4.3          14.0 2.5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="co"># You can see the structure of the data frame with the str() function.</span></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(rabbits)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   17 obs. of  7 variables:
 $ rabbit_name  : chr  "Ruthie" "Smokey" "Bug" "Wicket" ...
 $ ear_type     : chr  "lop" "up" "up" "up" ...
 $ sex          : chr  "F" "F" "M" "M" ...
 $ partner      : chr  NA NA NA NA ...
 $ weight_lbs   : num  3.5 5.8 2.5 2.6 3.2 4.2 3.9 2.7 3.3 4.5 ...
 $ length_inches: num  10 17 8 7.5 9 14 12 8 10 13 ...
 $ age          : num  2 5 1.5 0.5 0.8 2 3 1.3 0.7 2 ...</code></pre>
</div>
</div>
<p>Column names can be used to retrieve a column (a vector) by using the “<strong>$</strong>” function. New columns can also be created, and column values can be changed this way. I make a silly BMI metric for rabbits.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="co"># "$" extracts one column just like [] can</span></span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a>rabbits<span class="sc">$</span>rabbit_names</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculating a new column from values in other columns.</span></span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a><span class="co"># This follows the same rules as vector multiplication</span></span>
<span id="cb117-3"><a href="#cb117-3" aria-hidden="true" tabindex="-1"></a>rabbits<span class="sc">$</span>BMI <span class="ot">&lt;-</span> rabbits<span class="sc">$</span>weight_lbs<span class="sc">/</span>(rabbits<span class="sc">$</span>length_inches<span class="sc">^</span><span class="dv">2</span>) <span class="sc">*</span> <span class="dv">703</span></span>
<span id="cb117-4"><a href="#cb117-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-5"><a href="#cb117-5" aria-hidden="true" tabindex="-1"></a>rabbits<span class="sc">$</span>BMI</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 24.60500 14.10865 27.46094 32.49422 27.77284 15.06429 19.03958 29.65781
 [9] 23.19900 18.71893 28.21730 13.01852 11.48947 17.57500 19.03958 19.52778
[17] 15.42296</code></pre>
</div>
</div>
<p>A data frame can be <strong>subset</strong> much like a matrix using indexes, but there are also more convenient ways of subsetting. For instance, you can select columns by <strong>column name</strong> instead of index. You can also subset rows using a <strong>logical condition</strong>. Finally, you can recode columns, either by creating a new column or changing an existing column, by selecting a subset of the data frame to change.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Data frames have column names that you can access using the function colnames()</span></span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a><span class="co"># the column names are just an ordered vector of character strings.</span></span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(rabbits)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "rabbit_name"   "ear_type"      "sex"           "partner"      
[5] "weight_lbs"    "length_inches" "age"           "BMI"          </code></pre>
</div>
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="co"># You can also alter colnames using the same function.</span></span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(rabbits) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Name"</span>, <span class="st">"EarType"</span>, <span class="st">"Sex"</span>, <span class="st">"BondPartner"</span>, </span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a>                       <span class="st">"Weight"</span>, <span class="st">"Length"</span>, <span class="st">"Age"</span>, <span class="st">"BMI"</span>)</span>
<span id="cb121-4"><a href="#cb121-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-5"><a href="#cb121-5" aria-hidden="true" tabindex="-1"></a><span class="co"># You can provide [] a vector of character strings to subset those columns.</span></span>
<span id="cb121-6"><a href="#cb121-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-7"><a href="#cb121-7" aria-hidden="true" tabindex="-1"></a>rabbits.sex <span class="ot">&lt;-</span> rabbits[,<span class="fu">c</span>(<span class="st">"Name"</span>, <span class="st">"Sex"</span>)]</span>
<span id="cb121-8"><a href="#cb121-8" aria-hidden="true" tabindex="-1"></a>rabbits.sex</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             Name Sex
1          Ruthie   F
2          Smokey   F
3             Bug   M
4          Wicket   M
5          Wesley   M
6         Heather   F
7             Ava   F
8        Cinnabun   M
9          Oliver   M
10       Chestnut   F
11          Daisy   F
12        Cadbury   F
13       Chickpea   F
14          Storm   M
15 Mr. Fuzzy Foot   M
16        Bouncer   M
17       Midnight   F</code></pre>
</div>
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="co"># To subset rows by condition, you can use the which() function. It outputs the indexes </span></span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a><span class="co"># of rows satisfying the condition. The logical condition can be as complex as necessary.</span></span>
<span id="cb123-3"><a href="#cb123-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-4"><a href="#cb123-4" aria-hidden="true" tabindex="-1"></a>rabbits.female <span class="ot">&lt;-</span> rabbits[<span class="fu">which</span>(rabbits<span class="sc">$</span>Sex <span class="sc">==</span> <span class="st">"F"</span>),]</span>
<span id="cb123-5"><a href="#cb123-5" aria-hidden="true" tabindex="-1"></a><span class="co"># this only contains female rabbits</span></span>
<span id="cb123-6"><a href="#cb123-6" aria-hidden="true" tabindex="-1"></a>rabbits.female</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       Name EarType Sex BondPartner Weight Length Age      BMI
1    Ruthie     lop   F        &lt;NA&gt;    3.5   10.0 2.0 24.60500
2    Smokey      up   F        &lt;NA&gt;    5.8   17.0 5.0 14.10865
6   Heather     lop   F        &lt;NA&gt;    4.2   14.0 2.0 15.06429
7       Ava      up   F        &lt;NA&gt;    3.9   12.0 3.0 19.03958
10 Chestnut      up   F        &lt;NA&gt;    4.5   13.0 2.0 18.71893
11    Daisy      up   F        &lt;NA&gt;    2.9    8.5 2.5 28.21730
12  Cadbury      up   F    Chickpea    6.0   18.0 3.0 13.01852
13 Chickpea      up   F     Cadbury    5.9   19.0 3.0 11.48947
17 Midnight      up   F        &lt;NA&gt;    4.3   14.0 2.5 15.42296</code></pre>
</div>
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="co"># You can also subset columns and rows at the same time.</span></span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a> rabbits.sex.female <span class="ot">&lt;-</span> rabbits[<span class="fu">which</span>(rabbits<span class="sc">$</span>Sex <span class="sc">==</span> <span class="st">"F"</span>),<span class="fu">c</span>(<span class="st">"Name"</span>, <span class="st">"Sex"</span>)]</span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb125-4"><a href="#cb125-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's look a bit closer at what each part of the row subset outputs.</span></span>
<span id="cb125-5"><a href="#cb125-5" aria-hidden="true" tabindex="-1"></a><span class="co"># The logical conditional outputs a logical vector </span></span>
<span id="cb125-6"><a href="#cb125-6" aria-hidden="true" tabindex="-1"></a><span class="co">#   that corresponds to which rows match the condition.</span></span>
<span id="cb125-7"><a href="#cb125-7" aria-hidden="true" tabindex="-1"></a>rabbits<span class="sc">$</span>Sex <span class="sc">==</span> <span class="st">"F"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  TRUE  TRUE FALSE FALSE FALSE  TRUE  TRUE FALSE FALSE  TRUE  TRUE  TRUE
[13]  TRUE FALSE FALSE FALSE  TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="co"># The which() function takes that vector as input and outputs the indexes that are TRUE</span></span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(rabbits<span class="sc">$</span>Sex <span class="sc">==</span> <span class="st">"F"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  1  2  6  7 10 11 12 13 17</code></pre>
</div>
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remember that the [] takes indexes as inputs and so outputs the rows </span></span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a><span class="co">#that match the condition.</span></span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a>rabbits[<span class="fu">which</span>(rabbits<span class="sc">$</span>Sex <span class="sc">==</span> <span class="st">"F"</span>),]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       Name EarType Sex BondPartner Weight Length Age      BMI
1    Ruthie     lop   F        &lt;NA&gt;    3.5   10.0 2.0 24.60500
2    Smokey      up   F        &lt;NA&gt;    5.8   17.0 5.0 14.10865
6   Heather     lop   F        &lt;NA&gt;    4.2   14.0 2.0 15.06429
7       Ava      up   F        &lt;NA&gt;    3.9   12.0 3.0 19.03958
10 Chestnut      up   F        &lt;NA&gt;    4.5   13.0 2.0 18.71893
11    Daisy      up   F        &lt;NA&gt;    2.9    8.5 2.5 28.21730
12  Cadbury      up   F    Chickpea    6.0   18.0 3.0 13.01852
13 Chickpea      up   F     Cadbury    5.9   19.0 3.0 11.48947
17 Midnight      up   F        &lt;NA&gt;    4.3   14.0 2.5 15.42296</code></pre>
</div>
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a new variable that makes weight categorical.</span></span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a><span class="do">##You need to create the column first with NA data, </span></span>
<span id="cb131-3"><a href="#cb131-3" aria-hidden="true" tabindex="-1"></a><span class="do">##because otherwise you will only create the variable for a subset of rows.</span></span>
<span id="cb131-4"><a href="#cb131-4" aria-hidden="true" tabindex="-1"></a><span class="do">##That would create an error.</span></span>
<span id="cb131-5"><a href="#cb131-5" aria-hidden="true" tabindex="-1"></a><span class="do">##Notice that this is coded in a way that is very clear but more complex than needed.</span></span>
<span id="cb131-6"><a href="#cb131-6" aria-hidden="true" tabindex="-1"></a>rabbits<span class="sc">$</span>BMI_category <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb131-7"><a href="#cb131-7" aria-hidden="true" tabindex="-1"></a>rabbits[<span class="fu">which</span>(rabbits<span class="sc">$</span>BMI <span class="sc">&lt;</span> <span class="dv">15</span>),]<span class="sc">$</span>BMI_category <span class="ot">&lt;-</span><span class="st">"Underweight"</span></span>
<span id="cb131-8"><a href="#cb131-8" aria-hidden="true" tabindex="-1"></a>rabbits[<span class="fu">which</span>(rabbits<span class="sc">$</span>BMI <span class="sc">&gt;=</span> <span class="dv">15</span> <span class="sc">&amp;</span> rabbits<span class="sc">$</span>BMI <span class="sc">&lt;</span> <span class="dv">25</span>),]<span class="sc">$</span>BMI_category <span class="ot">&lt;-</span><span class="st">"Healthy Weight"</span></span>
<span id="cb131-9"><a href="#cb131-9" aria-hidden="true" tabindex="-1"></a>rabbits[<span class="fu">which</span>(rabbits<span class="sc">$</span>BMI <span class="sc">&gt;=</span> <span class="dv">25</span> <span class="sc">&amp;</span> rabbits<span class="sc">$</span>BMI <span class="sc">&lt;</span> <span class="dv">32</span>),]<span class="sc">$</span>BMI_category <span class="ot">&lt;-</span><span class="st">"Overweight"</span></span>
<span id="cb131-10"><a href="#cb131-10" aria-hidden="true" tabindex="-1"></a>rabbits[<span class="fu">which</span>(rabbits<span class="sc">$</span>BMI <span class="sc">&gt;=</span> <span class="dv">32</span>),]<span class="sc">$</span>BMI_category <span class="ot">&lt;-</span><span class="st">"Very Overweight"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="merging" class="level3">
<h3 class="anchored" data-anchor-id="merging">Merging</h3>
<p>Two data frames can be <strong>merged</strong> on a set of common columns using the “merge()” function. This is similar to a “join” in sql. The default behavior of merge() is to retain only those rows that match on the specified columns. You can user the all.x and all.y parameters to retain all rows from the first data frame, all rows from the second data frame, or all rows from both data frames.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Here is a compliment data frame to the rabbits data frame. </span></span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a>adoption.applications <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">applicants =</span> <span class="fu">c</span>(<span class="st">"John Smith"</span>, <span class="st">"Jane Goodwin"</span>, </span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a>                                                   <span class="st">"Katie Walker"</span>,  <span class="st">"Katie Walker"</span>, </span>
<span id="cb132-4"><a href="#cb132-4" aria-hidden="true" tabindex="-1"></a>                                                   <span class="st">"Fred Flinstone"</span>, <span class="st">"Liz Cooper"</span>,</span>
<span id="cb132-5"><a href="#cb132-5" aria-hidden="true" tabindex="-1"></a>                                                   <span class="st">"Liz Cooper"</span>,  <span class="st">"Liz Cooper"</span>,</span>
<span id="cb132-6"><a href="#cb132-6" aria-hidden="true" tabindex="-1"></a>                                                   <span class="st">"Dylan Strong"</span>, <span class="st">"Amy Cohen"</span>), </span>
<span id="cb132-7"><a href="#cb132-7" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">rabbit_name=</span> <span class="fu">c</span>(<span class="st">"Oliver"</span>, <span class="st">"Oliver"</span>, <span class="st">"Cadbury"</span>, </span>
<span id="cb132-8"><a href="#cb132-8" aria-hidden="true" tabindex="-1"></a>                                                   <span class="st">"Chickpea"</span>, <span class="st">"Cinnabun"</span>, <span class="st">"Storm"</span>, </span>
<span id="cb132-9"><a href="#cb132-9" aria-hidden="true" tabindex="-1"></a>                                                   <span class="st">"Ruthie"</span>, <span class="st">"Wicket"</span>, <span class="st">""</span>, <span class="st">""</span>), </span>
<span id="cb132-10"><a href="#cb132-10" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">OtherPets =</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>,</span>
<span id="cb132-11"><a href="#cb132-11" aria-hidden="true" tabindex="-1"></a>                                                  <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>), </span>
<span id="cb132-12"><a href="#cb132-12" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">Children =</span> <span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, </span>
<span id="cb132-13"><a href="#cb132-13" aria-hidden="true" tabindex="-1"></a>                                                 <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>))</span>
<span id="cb132-14"><a href="#cb132-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-15"><a href="#cb132-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-16"><a href="#cb132-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Notice that adoption.applications shares a column with the rabbits data frame.</span></span>
<span id="cb132-17"><a href="#cb132-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-18"><a href="#cb132-18" aria-hidden="true" tabindex="-1"></a><span class="co"># This keeps only rows that match</span></span>
<span id="cb132-19"><a href="#cb132-19" aria-hidden="true" tabindex="-1"></a>rabbits.applications <span class="ot">&lt;-</span> <span class="fu">merge</span>(<span class="at">x =</span> rabbits, <span class="at">y =</span> adoption.applications, </span>
<span id="cb132-20"><a href="#cb132-20" aria-hidden="true" tabindex="-1"></a>                              <span class="at">by.x =</span> <span class="st">"Name"</span>, <span class="at">by.y =</span> <span class="st">"rabbit_name"</span>)</span>
<span id="cb132-21"><a href="#cb132-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-22"><a href="#cb132-22" aria-hidden="true" tabindex="-1"></a>rabbits.applications</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Name EarType Sex BondPartner Weight Length Age      BMI    BMI_category
1  Cadbury      up   F    Chickpea    6.0   18.0 3.0 13.01852     Underweight
2 Chickpea      up   F     Cadbury    5.9   19.0 3.0 11.48947     Underweight
3 Cinnabun      up   M        &lt;NA&gt;    2.7    8.0 1.3 29.65781      Overweight
4   Oliver     lop   M        &lt;NA&gt;    3.3   10.0 0.7 23.19900  Healthy Weight
5   Oliver     lop   M        &lt;NA&gt;    3.3   10.0 0.7 23.19900  Healthy Weight
6   Ruthie     lop   F        &lt;NA&gt;    3.5   10.0 2.0 24.60500  Healthy Weight
7    Storm      up   M        &lt;NA&gt;    4.9   14.0 1.5 17.57500  Healthy Weight
8   Wicket      up   M        &lt;NA&gt;    2.6    7.5 0.5 32.49422 Very Overweight
      applicants OtherPets Children
1   Katie Walker     FALSE    FALSE
2   Katie Walker     FALSE    FALSE
3 Fred Flinstone     FALSE    FALSE
4   Jane Goodwin     FALSE     TRUE
5     John Smith      TRUE    FALSE
6     Liz Cooper      TRUE    FALSE
7     Liz Cooper      TRUE    FALSE
8     Liz Cooper      TRUE    FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This keeps all rows in rabbits ("left join")</span></span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a>all.rabbits.applications <span class="ot">&lt;-</span> <span class="fu">merge</span>(<span class="at">x =</span> rabbits, <span class="at">y =</span> adoption.applications, </span>
<span id="cb134-3"><a href="#cb134-3" aria-hidden="true" tabindex="-1"></a>                              <span class="at">by.x =</span> <span class="st">"Name"</span>, <span class="at">by.y =</span> <span class="st">"rabbit_name"</span>, <span class="at">all.x =</span> <span class="cn">TRUE</span>)</span>
<span id="cb134-4"><a href="#cb134-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-5"><a href="#cb134-5" aria-hidden="true" tabindex="-1"></a>all.rabbits.applications</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             Name EarType Sex    BondPartner Weight Length Age      BMI
1             Ava      up   F           &lt;NA&gt;    3.9   12.0 3.0 19.03958
2         Bouncer      up   M Mr. Fuzzy Foot    4.0   12.0 1.0 19.52778
3             Bug      up   M           &lt;NA&gt;    2.5    8.0 1.5 27.46094
4         Cadbury      up   F       Chickpea    6.0   18.0 3.0 13.01852
5        Chestnut      up   F           &lt;NA&gt;    4.5   13.0 2.0 18.71893
6        Chickpea      up   F        Cadbury    5.9   19.0 3.0 11.48947
7        Cinnabun      up   M           &lt;NA&gt;    2.7    8.0 1.3 29.65781
8           Daisy      up   F           &lt;NA&gt;    2.9    8.5 2.5 28.21730
9         Heather     lop   F           &lt;NA&gt;    4.2   14.0 2.0 15.06429
10       Midnight      up   F           &lt;NA&gt;    4.3   14.0 2.5 15.42296
11 Mr. Fuzzy Foot      up   M        Bouncer    3.9   12.0 1.0 19.03958
12         Oliver     lop   M           &lt;NA&gt;    3.3   10.0 0.7 23.19900
13         Oliver     lop   M           &lt;NA&gt;    3.3   10.0 0.7 23.19900
14         Ruthie     lop   F           &lt;NA&gt;    3.5   10.0 2.0 24.60500
15         Smokey      up   F           &lt;NA&gt;    5.8   17.0 5.0 14.10865
16          Storm      up   M           &lt;NA&gt;    4.9   14.0 1.5 17.57500
17         Wesley      up   M           &lt;NA&gt;    3.2    9.0 0.8 27.77284
18         Wicket      up   M           &lt;NA&gt;    2.6    7.5 0.5 32.49422
      BMI_category     applicants OtherPets Children
1   Healthy Weight           &lt;NA&gt;        NA       NA
2   Healthy Weight           &lt;NA&gt;        NA       NA
3       Overweight           &lt;NA&gt;        NA       NA
4      Underweight   Katie Walker     FALSE    FALSE
5   Healthy Weight           &lt;NA&gt;        NA       NA
6      Underweight   Katie Walker     FALSE    FALSE
7       Overweight Fred Flinstone     FALSE    FALSE
8       Overweight           &lt;NA&gt;        NA       NA
9   Healthy Weight           &lt;NA&gt;        NA       NA
10  Healthy Weight           &lt;NA&gt;        NA       NA
11  Healthy Weight           &lt;NA&gt;        NA       NA
12  Healthy Weight   Jane Goodwin     FALSE     TRUE
13  Healthy Weight     John Smith      TRUE    FALSE
14  Healthy Weight     Liz Cooper      TRUE    FALSE
15     Underweight           &lt;NA&gt;        NA       NA
16  Healthy Weight     Liz Cooper      TRUE    FALSE
17      Overweight           &lt;NA&gt;        NA       NA
18 Very Overweight     Liz Cooper      TRUE    FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This keeps all rows in adoption.applications ("right join")</span></span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a>rabbits.all.applications <span class="ot">&lt;-</span> <span class="fu">merge</span>(<span class="at">x =</span> rabbits, <span class="at">y =</span> adoption.applications, </span>
<span id="cb136-3"><a href="#cb136-3" aria-hidden="true" tabindex="-1"></a>                              <span class="at">by.x =</span> <span class="st">"Name"</span>, <span class="at">by.y =</span> <span class="st">"rabbit_name"</span>, <span class="at">all.y =</span> <span class="cn">TRUE</span>)</span>
<span id="cb136-4"><a href="#cb136-4" aria-hidden="true" tabindex="-1"></a>rabbits.all.applications</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       Name EarType  Sex BondPartner Weight Length Age      BMI    BMI_category
1              &lt;NA&gt; &lt;NA&gt;        &lt;NA&gt;     NA     NA  NA       NA            &lt;NA&gt;
2              &lt;NA&gt; &lt;NA&gt;        &lt;NA&gt;     NA     NA  NA       NA            &lt;NA&gt;
3   Cadbury      up    F    Chickpea    6.0   18.0 3.0 13.01852     Underweight
4  Chickpea      up    F     Cadbury    5.9   19.0 3.0 11.48947     Underweight
5  Cinnabun      up    M        &lt;NA&gt;    2.7    8.0 1.3 29.65781      Overweight
6    Oliver     lop    M        &lt;NA&gt;    3.3   10.0 0.7 23.19900  Healthy Weight
7    Oliver     lop    M        &lt;NA&gt;    3.3   10.0 0.7 23.19900  Healthy Weight
8    Ruthie     lop    F        &lt;NA&gt;    3.5   10.0 2.0 24.60500  Healthy Weight
9     Storm      up    M        &lt;NA&gt;    4.9   14.0 1.5 17.57500  Healthy Weight
10   Wicket      up    M        &lt;NA&gt;    2.6    7.5 0.5 32.49422 Very Overweight
       applicants OtherPets Children
1    Dylan Strong     FALSE     TRUE
2       Amy Cohen      TRUE     TRUE
3    Katie Walker     FALSE    FALSE
4    Katie Walker     FALSE    FALSE
5  Fred Flinstone     FALSE    FALSE
6    Jane Goodwin     FALSE     TRUE
7      John Smith      TRUE    FALSE
8      Liz Cooper      TRUE    FALSE
9      Liz Cooper      TRUE    FALSE
10     Liz Cooper      TRUE    FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This keeps all rows from both tables ("full outer join")</span></span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a>all.rabbits.all.applications <span class="ot">&lt;-</span> <span class="fu">merge</span>(<span class="at">x =</span> rabbits, <span class="at">y =</span> adoption.applications, </span>
<span id="cb138-3"><a href="#cb138-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">by.x =</span> <span class="st">"Name"</span>, <span class="at">by.y =</span> <span class="st">"rabbit_name"</span>, <span class="at">all.x =</span> <span class="cn">TRUE</span> ,<span class="at">all.y =</span> <span class="cn">TRUE</span>)</span>
<span id="cb138-4"><a href="#cb138-4" aria-hidden="true" tabindex="-1"></a>all.rabbits.all.applications</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             Name EarType  Sex    BondPartner Weight Length Age      BMI
1                    &lt;NA&gt; &lt;NA&gt;           &lt;NA&gt;     NA     NA  NA       NA
2                    &lt;NA&gt; &lt;NA&gt;           &lt;NA&gt;     NA     NA  NA       NA
3             Ava      up    F           &lt;NA&gt;    3.9   12.0 3.0 19.03958
4         Bouncer      up    M Mr. Fuzzy Foot    4.0   12.0 1.0 19.52778
5             Bug      up    M           &lt;NA&gt;    2.5    8.0 1.5 27.46094
6         Cadbury      up    F       Chickpea    6.0   18.0 3.0 13.01852
7        Chestnut      up    F           &lt;NA&gt;    4.5   13.0 2.0 18.71893
8        Chickpea      up    F        Cadbury    5.9   19.0 3.0 11.48947
9        Cinnabun      up    M           &lt;NA&gt;    2.7    8.0 1.3 29.65781
10          Daisy      up    F           &lt;NA&gt;    2.9    8.5 2.5 28.21730
11        Heather     lop    F           &lt;NA&gt;    4.2   14.0 2.0 15.06429
12       Midnight      up    F           &lt;NA&gt;    4.3   14.0 2.5 15.42296
13 Mr. Fuzzy Foot      up    M        Bouncer    3.9   12.0 1.0 19.03958
14         Oliver     lop    M           &lt;NA&gt;    3.3   10.0 0.7 23.19900
15         Oliver     lop    M           &lt;NA&gt;    3.3   10.0 0.7 23.19900
16         Ruthie     lop    F           &lt;NA&gt;    3.5   10.0 2.0 24.60500
17         Smokey      up    F           &lt;NA&gt;    5.8   17.0 5.0 14.10865
18          Storm      up    M           &lt;NA&gt;    4.9   14.0 1.5 17.57500
19         Wesley      up    M           &lt;NA&gt;    3.2    9.0 0.8 27.77284
20         Wicket      up    M           &lt;NA&gt;    2.6    7.5 0.5 32.49422
      BMI_category     applicants OtherPets Children
1             &lt;NA&gt;   Dylan Strong     FALSE     TRUE
2             &lt;NA&gt;      Amy Cohen      TRUE     TRUE
3   Healthy Weight           &lt;NA&gt;        NA       NA
4   Healthy Weight           &lt;NA&gt;        NA       NA
5       Overweight           &lt;NA&gt;        NA       NA
6      Underweight   Katie Walker     FALSE    FALSE
7   Healthy Weight           &lt;NA&gt;        NA       NA
8      Underweight   Katie Walker     FALSE    FALSE
9       Overweight Fred Flinstone     FALSE    FALSE
10      Overweight           &lt;NA&gt;        NA       NA
11  Healthy Weight           &lt;NA&gt;        NA       NA
12  Healthy Weight           &lt;NA&gt;        NA       NA
13  Healthy Weight           &lt;NA&gt;        NA       NA
14  Healthy Weight   Jane Goodwin     FALSE     TRUE
15  Healthy Weight     John Smith      TRUE    FALSE
16  Healthy Weight     Liz Cooper      TRUE    FALSE
17     Underweight           &lt;NA&gt;        NA       NA
18  Healthy Weight     Liz Cooper      TRUE    FALSE
19      Overweight           &lt;NA&gt;        NA       NA
20 Very Overweight     Liz Cooper      TRUE    FALSE</code></pre>
</div>
</div>
</section>
<section id="aggregation" class="level3">
<h3 class="anchored" data-anchor-id="aggregation">Aggregation</h3>
<p>I’ve already shown above how you can aggregate vectors and data frame columns using functions like “mean()”, “median()”, and “sum()”. These aggregate the entire contents of a vector, but you might also want to aggregate by categories provided in another column of a data frame. You can do this using the “aggregate()” function</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Notice that every parameter is a vector (data frame column)</span></span>
<span id="cb140-2"><a href="#cb140-2" aria-hidden="true" tabindex="-1"></a><span class="do">##The categories are contained within a list - </span></span>
<span id="cb140-3"><a href="#cb140-3" aria-hidden="true" tabindex="-1"></a><span class="do">##this is like a vector but it contains other objects.</span></span>
<span id="cb140-4"><a href="#cb140-4" aria-hidden="true" tabindex="-1"></a><span class="do">##FUN can be assigned to any function, including mean(), median(), sum(), count()</span></span>
<span id="cb140-5"><a href="#cb140-5" aria-hidden="true" tabindex="-1"></a><span class="do">##Note also that there is another syntax for aggregate that is found in the help entry.</span></span>
<span id="cb140-6"><a href="#cb140-6" aria-hidden="true" tabindex="-1"></a><span class="do">##It will give you similar results but assign different headers - try it out.</span></span>
<span id="cb140-7"><a href="#cb140-7" aria-hidden="true" tabindex="-1"></a>mean.weight.by.sex <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(rabbits<span class="sc">$</span>Weight, </span>
<span id="cb140-8"><a href="#cb140-8" aria-hidden="true" tabindex="-1"></a>                                <span class="at">by =</span> <span class="fu">list</span>(rabbits<span class="sc">$</span>Sex),</span>
<span id="cb140-9"><a href="#cb140-9" aria-hidden="true" tabindex="-1"></a>                                <span class="at">FUN =</span> <span class="st">"mean"</span>)</span>
<span id="cb140-10"><a href="#cb140-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-11"><a href="#cb140-11" aria-hidden="true" tabindex="-1"></a>mean.weight.by.sex</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Group.1        x
1       F 4.555556
2       M 3.387500</code></pre>
</div>
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This aggregates by both Sex and EarType, </span></span>
<span id="cb142-2"><a href="#cb142-2" aria-hidden="true" tabindex="-1"></a><span class="co">#so the list contains those two vectors (columns).</span></span>
<span id="cb142-3"><a href="#cb142-3" aria-hidden="true" tabindex="-1"></a>median.weight.by.sex.eartype <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(rabbits<span class="sc">$</span>Weight,</span>
<span id="cb142-4"><a href="#cb142-4" aria-hidden="true" tabindex="-1"></a>                                <span class="at">by =</span> <span class="fu">list</span>(rabbits<span class="sc">$</span>Sex, rabbits<span class="sc">$</span>EarType),</span>
<span id="cb142-5"><a href="#cb142-5" aria-hidden="true" tabindex="-1"></a>                                <span class="at">FUN =</span> <span class="st">"median"</span>)</span>
<span id="cb142-6"><a href="#cb142-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-7"><a href="#cb142-7" aria-hidden="true" tabindex="-1"></a>median.weight.by.sex.eartype</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Group.1 Group.2    x
1       F     lop 3.85
2       M     lop 3.30
3       F      up 4.50
4       M      up 3.20</code></pre>
</div>
<div class="sourceCode cell-code" id="cb144"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This counts the rows by Sex and EarType. Length says how many rows are in each group.</span></span>
<span id="cb144-2"><a href="#cb144-2" aria-hidden="true" tabindex="-1"></a>count.by.sex.eartype <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(rabbits<span class="sc">$</span>Weight,</span>
<span id="cb144-3"><a href="#cb144-3" aria-hidden="true" tabindex="-1"></a>                                <span class="at">by =</span> <span class="fu">list</span>(rabbits<span class="sc">$</span>Sex, rabbits<span class="sc">$</span>EarType),</span>
<span id="cb144-4"><a href="#cb144-4" aria-hidden="true" tabindex="-1"></a>                                <span class="at">FUN =</span> <span class="st">"length"</span>)</span>
<span id="cb144-5"><a href="#cb144-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-6"><a href="#cb144-6" aria-hidden="true" tabindex="-1"></a>count.by.sex.eartype </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Group.1 Group.2 x
1       F     lop 2
2       M     lop 1
3       F      up 7
4       M      up 7</code></pre>
</div>
<div class="sourceCode cell-code" id="cb146"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Notice that these data frames have column names that we probably don't want,</span></span>
<span id="cb146-2"><a href="#cb146-2" aria-hidden="true" tabindex="-1"></a><span class="do">##so you should rename them.</span></span>
<span id="cb146-3"><a href="#cb146-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-4"><a href="#cb146-4" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(mean.weight.by.sex) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Sex"</span>, <span class="st">"Mean_Weight"</span>)</span>
<span id="cb146-5"><a href="#cb146-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-6"><a href="#cb146-6" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(median.weight.by.sex.eartype) <span class="ot">&lt;-</span>  <span class="fu">c</span>(<span class="st">"Sex"</span>, <span class="st">"EarType"</span>, <span class="st">"Median_Weight"</span>)</span>
<span id="cb146-7"><a href="#cb146-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-8"><a href="#cb146-8" aria-hidden="true" tabindex="-1"></a><span class="co"># You can also specify column names of the group columns using aggregation</span></span>
<span id="cb146-9"><a href="#cb146-9" aria-hidden="true" tabindex="-1"></a><span class="do">##But you still need to name the aggregate column using colnames, giving the index</span></span>
<span id="cb146-10"><a href="#cb146-10" aria-hidden="true" tabindex="-1"></a><span class="do">##of the final column</span></span>
<span id="cb146-11"><a href="#cb146-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-12"><a href="#cb146-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-13"><a href="#cb146-13" aria-hidden="true" tabindex="-1"></a>median.weight.by.sex.eartype <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(rabbits<span class="sc">$</span>Weight,</span>
<span id="cb146-14"><a href="#cb146-14" aria-hidden="true" tabindex="-1"></a>                                <span class="at">by =</span> <span class="fu">list</span>(<span class="at">Sex =</span> rabbits<span class="sc">$</span>Sex, <span class="at">EarType =</span> rabbits<span class="sc">$</span>EarType),</span>
<span id="cb146-15"><a href="#cb146-15" aria-hidden="true" tabindex="-1"></a>                                <span class="at">FUN =</span> <span class="st">"median"</span>)</span>
<span id="cb146-16"><a href="#cb146-16" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(median.weight.by.sex.eartype)[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="st">"Median_Weight"</span></span>
<span id="cb146-17"><a href="#cb146-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-18"><a href="#cb146-18" aria-hidden="true" tabindex="-1"></a>median.weight.by.sex.eartype</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Sex EarType Median_Weight
1   F     lop          3.85
2   M     lop          3.30
3   F      up          4.50
4   M      up          3.20</code></pre>
</div>
<div class="sourceCode cell-code" id="cb148"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Or if you are feeling fancy you can calculate the index last column, </span></span>
<span id="cb148-2"><a href="#cb148-2" aria-hidden="true" tabindex="-1"></a><span class="do">##because we know that the index</span></span>
<span id="cb148-3"><a href="#cb148-3" aria-hidden="true" tabindex="-1"></a><span class="do">##of the last column equals the length of the column names vector.</span></span>
<span id="cb148-4"><a href="#cb148-4" aria-hidden="true" tabindex="-1"></a><span class="do">##Given what you know about subset, why does this work?</span></span>
<span id="cb148-5"><a href="#cb148-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-6"><a href="#cb148-6" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(median.weight.by.sex.eartype)[<span class="fu">length</span>(colnames)] <span class="ot">&lt;-</span> <span class="st">"Median_Weight"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="packages-and-functions" class="level2">
<h2 class="anchored" data-anchor-id="packages-and-functions">Packages and Functions</h2>
<section id="cran-packages" class="level3">
<h3 class="anchored" data-anchor-id="cran-packages">CRAN Packages</h3>
<p>In R, <strong>packages</strong> contain a set of <strong>functions</strong> beyond what comes with Base R. This large set of functions available in packages is one of the strengths of R. It means that you don’t have to reinvent the wheel. These packages come from a variety of sources. Some are so essential that they may have come with your installation of R. Others can be loaded from the official repository of R packages called CRAN. You can generally count on these to work well, because they have been vetted by the R community. You can also install custom packages that you find on websites like github or gitlab. When installing these you should make sure that you know what you are installing, because these have not been vetted by the R community.</p>
<p>First I’ll look at installing and loading packages from CRAN. You must first install the package using <strong>install.packages()</strong> (or the menu) and then load it using <strong>library()</strong> or the Packages menu on the bottom right pane in Rstudio. If you want to update a package with the latest version, you just install it again. If you want to update all (or a number of) your CRAN packages, you can use <strong>update.packages()</strong>. This is generally not necessary to do this too often, because established packages do not change much over time.</p>
<p>So for instance, for the package “openxlsx”, you would install and load it like this (including packages it depends upon):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"openxlsx"</span>)</span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb149-3"><a href="#cb149-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(openxlsx)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Once you load a package you can run functions with just their name, but you can also omit the library() call and use functions by first listing the package, “::”, and then the function name. R contains a built in help system. You can look at the “Help” tab in Rstudio, or use console commands with <strong>?</strong> if you know the function you want and <strong>??</strong> if you want to search for a function using key words.</p>
<p><strong>openxlsx</strong> allows us to read and write excel files. Rstudio has a built in data import tool that you can find in the Environment tab, but you can only write data out by way of the terminal using scripts.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ? provides the help page for the particular function in the package.</span></span>
<span id="cb150-2"><a href="#cb150-2" aria-hidden="true" tabindex="-1"></a><span class="co"># When looking for help files it is usually easiest to use the full notation,</span></span>
<span id="cb150-3"><a href="#cb150-3" aria-hidden="true" tabindex="-1"></a><span class="co">#with a colon. </span></span>
<span id="cb150-4"><a href="#cb150-4" aria-hidden="true" tabindex="-1"></a><span class="co">#?openxlsx::write.xlsx</span></span>
<span id="cb150-5"><a href="#cb150-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb150-6"><a href="#cb150-6" aria-hidden="true" tabindex="-1"></a>xlsx<span class="sc">::</span><span class="fu">write.xlsx</span>(<span class="at">x =</span> all.rabbits.all.applications, </span>
<span id="cb150-7"><a href="#cb150-7" aria-hidden="true" tabindex="-1"></a>                 <span class="at">file =</span> <span class="st">"rabbit_applications.xlsx"</span>)</span>
<span id="cb150-8"><a href="#cb150-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb150-9"><a href="#cb150-9" aria-hidden="true" tabindex="-1"></a><span class="co">#You could do the same command with first calling the library() function</span></span>
<span id="cb150-10"><a href="#cb150-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb150-11"><a href="#cb150-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(xlsx)</span>
<span id="cb150-12"><a href="#cb150-12" aria-hidden="true" tabindex="-1"></a><span class="fu">write.xlsx</span>(<span class="at">x =</span> all.rabbits.all.applications, </span>
<span id="cb150-13"><a href="#cb150-13" aria-hidden="true" tabindex="-1"></a>                 <span class="at">file =</span> <span class="st">"rabbit_applications.xlsx"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If you only give the file name for output, rather than the full extension, it is put into your “working directory.” This is, to put it simply, where R is working. All reading and writing will take place in this directory if a full extension hasn’t been provided. You can use the R-studio commands under the “Files” -&gt; “More” tabs to interact with this, or use console/script commands. You can also create new folders in the “File” tab in R-studio.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Output the current working directory</span></span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "C:/Users/zenz/Documents/R-Tutorial/R Introduction"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Change the current working directory "~" means your documents folder</span></span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"~/R-Tutorial/Homework"</span>)</span>
<span id="cb153-3"><a href="#cb153-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb153-4"><a href="#cb153-4" aria-hidden="true" tabindex="-1"></a><span class="co">#And change it back</span></span>
<span id="cb153-5"><a href="#cb153-5" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"~/R-Tutorial"</span>)</span>
<span id="cb153-6"><a href="#cb153-6" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "C:/Users/zenz/Documents/R-Tutorial"</code></pre>
</div>
</div>
</section>
<section id="functions" class="level3">
<h3 class="anchored" data-anchor-id="functions">Functions</h3>
<p>You will get most of the functions you use in R from packages from CRAN. But it is easy to write your own custom functions, and you can also install custom functions that others have written. Consider the function below that computes standard error, which is missing from the standard set of base R stats functions.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Little function to compute standard error. "x" here is the parameter.</span></span>
<span id="cb155-2"><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a><span class="do">##The results of the "return" function is what is returned by the function.</span></span>
<span id="cb155-3"><a href="#cb155-3" aria-hidden="true" tabindex="-1"></a>st.err <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb155-4"><a href="#cb155-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">sd</span>(x)<span class="sc">/</span><span class="fu">sqrt</span>(<span class="fu">length</span>(x)))</span>
<span id="cb155-5"><a href="#cb155-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb155-6"><a href="#cb155-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-7"><a href="#cb155-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a vector of values to use with the function</span></span>
<span id="cb155-8"><a href="#cb155-8" aria-hidden="true" tabindex="-1"></a>nums <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">3</span>, <span class="dv">9</span>, <span class="dv">2</span>, <span class="dv">7</span>)</span>
<span id="cb155-9"><a href="#cb155-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-10"><a href="#cb155-10" aria-hidden="true" tabindex="-1"></a><span class="co"># After loading the function (putting the function in a variable) </span></span>
<span id="cb155-11"><a href="#cb155-11" aria-hidden="true" tabindex="-1"></a><span class="co">#you can call the function just like others. </span></span>
<span id="cb155-12"><a href="#cb155-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Note that like other functions the parameter name </span></span>
<span id="cb155-13"><a href="#cb155-13" aria-hidden="true" tabindex="-1"></a><span class="co">#does not need to match what you named it in "function" above.</span></span>
<span id="cb155-14"><a href="#cb155-14" aria-hidden="true" tabindex="-1"></a>se <span class="ot">&lt;-</span> <span class="fu">st.err</span>(nums)</span>
<span id="cb155-15"><a href="#cb155-15" aria-hidden="true" tabindex="-1"></a>mean <span class="ot">&lt;-</span> <span class="fu">mean</span>(nums)</span>
<span id="cb155-16"><a href="#cb155-16" aria-hidden="true" tabindex="-1"></a>sd <span class="ot">&lt;-</span> <span class="fu">sd</span>(nums)</span>
<span id="cb155-17"><a href="#cb155-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-18"><a href="#cb155-18" aria-hidden="true" tabindex="-1"></a><span class="co"># You can use more functions to customize the output.</span></span>
<span id="cb155-19"><a href="#cb155-19" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">"mean:"</span>, <span class="fu">round</span>(mean, <span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "mean: 5"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">"standard deviation:"</span>, <span class="fu">round</span>(sd, <span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "standard deviation: 2.45"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">"standard error:"</span>, <span class="fu">round</span>(se, <span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "standard error: 0.87"</code></pre>
</div>
</div>
<p>The standard error function above is very simple, with only one parameter. But just like the functions from CRAN, homemade functions can be more complex. Consider the following function, which is actually a version of a function found in a custom package at https://git.doit.wisc.edu/lsaim/AIMutils that I will show how to install below. A lot is going on here. This takes as input a UW-Madison semester-year term code from one of two student information systems (SIS and DARS) and outputs the academic year of the term.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a>acad.year <span class="ot">&lt;-</span> <span class="cf">function</span>(Term, <span class="at">TermType =</span> <span class="st">"SIS"</span>){</span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a>  Data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(Term, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb161-3"><a href="#cb161-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-4"><a href="#cb161-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">#if a SIS term.</span></span>
<span id="cb161-5"><a href="#cb161-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(TermType <span class="sc">==</span> <span class="st">"SIS"</span>){</span>
<span id="cb161-6"><a href="#cb161-6" aria-hidden="true" tabindex="-1"></a>    Data<span class="sc">$</span>cent <span class="ot">&lt;-</span> <span class="fu">substr</span>(Data<span class="sc">$</span>Term, <span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb161-7"><a href="#cb161-7" aria-hidden="true" tabindex="-1"></a>    Data<span class="sc">$</span>year <span class="ot">&lt;-</span> <span class="fu">substr</span>(Data<span class="sc">$</span>Term, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb161-8"><a href="#cb161-8" aria-hidden="true" tabindex="-1"></a>    Data<span class="sc">$</span>semester <span class="ot">&lt;-</span> <span class="fu">substr</span>(Data<span class="sc">$</span>Term, <span class="dv">4</span>, <span class="dv">4</span>)</span>
<span id="cb161-9"><a href="#cb161-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-10"><a href="#cb161-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">#century</span></span>
<span id="cb161-11"><a href="#cb161-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">length</span>(Data[<span class="fu">which</span>(Data<span class="sc">$</span>cent <span class="sc">==</span> <span class="st">"0"</span>),]<span class="sc">$</span>cent) <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb161-12"><a href="#cb161-12" aria-hidden="true" tabindex="-1"></a>      {Data[<span class="fu">which</span>(Data<span class="sc">$</span>cent <span class="sc">==</span> <span class="st">"0"</span>),]<span class="sc">$</span>cent <span class="ot">&lt;-</span> <span class="st">"19"</span>}</span>
<span id="cb161-13"><a href="#cb161-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">length</span>(Data[<span class="fu">which</span>(Data<span class="sc">$</span>cent <span class="sc">==</span> <span class="st">"1"</span>),]<span class="sc">$</span>cent) <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb161-14"><a href="#cb161-14" aria-hidden="true" tabindex="-1"></a>      {Data[<span class="fu">which</span>(Data<span class="sc">$</span>cent <span class="sc">==</span> <span class="st">"1"</span>),]<span class="sc">$</span>cent <span class="ot">&lt;-</span> <span class="st">"20"</span>}</span>
<span id="cb161-15"><a href="#cb161-15" aria-hidden="true" tabindex="-1"></a>    Data<span class="sc">$</span>acadYear <span class="ot">&lt;-</span> <span class="fu">paste</span>(Data<span class="sc">$</span>cent, Data<span class="sc">$</span>year, <span class="at">sep =</span> <span class="st">""</span>)</span>
<span id="cb161-16"><a href="#cb161-16" aria-hidden="true" tabindex="-1"></a>    <span class="co">#for summer term it sets to next acad year from what is in SIS term</span></span>
<span id="cb161-17"><a href="#cb161-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">length</span>(Data[<span class="fu">which</span>(Data<span class="sc">$</span>semester <span class="sc">==</span> <span class="st">"6"</span>),]<span class="sc">$</span>cent) <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb161-18"><a href="#cb161-18" aria-hidden="true" tabindex="-1"></a>    {Data[<span class="fu">which</span>(Data<span class="sc">$</span>semester <span class="sc">==</span> <span class="st">"6"</span>),]<span class="sc">$</span>acadYear <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(Data[</span>
<span id="cb161-19"><a href="#cb161-19" aria-hidden="true" tabindex="-1"></a>        <span class="fu">which</span>(Data<span class="sc">$</span>semester <span class="sc">==</span> <span class="st">"6"</span>),]<span class="sc">$</span>acadYear) <span class="sc">+</span> <span class="dv">1</span>}</span>
<span id="cb161-20"><a href="#cb161-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-21"><a href="#cb161-21" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb161-22"><a href="#cb161-22" aria-hidden="true" tabindex="-1"></a>  <span class="co">#if DARS term</span></span>
<span id="cb161-23"><a href="#cb161-23" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(TermType <span class="sc">==</span> <span class="st">"DARS"</span>){</span>
<span id="cb161-24"><a href="#cb161-24" aria-hidden="true" tabindex="-1"></a>    Data<span class="sc">$</span>acadYear <span class="ot">&lt;-</span> <span class="fu">substr</span>(Data<span class="sc">$</span>Term, <span class="dv">1</span>, <span class="dv">4</span>)</span>
<span id="cb161-25"><a href="#cb161-25" aria-hidden="true" tabindex="-1"></a>    Data<span class="sc">$</span>semester <span class="ot">&lt;-</span> <span class="fu">substr</span>(Data<span class="sc">$</span>Term, <span class="dv">5</span>, <span class="dv">5</span>)</span>
<span id="cb161-26"><a href="#cb161-26" aria-hidden="true" tabindex="-1"></a>     <span class="co">#for summer term it sets to next acad year from what is in DARS term</span></span>
<span id="cb161-27"><a href="#cb161-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">length</span>(Data[<span class="fu">which</span>(Data<span class="sc">$</span>semester <span class="sc">==</span> <span class="st">"3"</span>),]<span class="sc">$</span>semester) <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb161-28"><a href="#cb161-28" aria-hidden="true" tabindex="-1"></a>    {Data[<span class="fu">which</span>(Data<span class="sc">$</span>semester <span class="sc">==</span> <span class="st">"3"</span>),]<span class="sc">$</span>acadYear <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(Data[</span>
<span id="cb161-29"><a href="#cb161-29" aria-hidden="true" tabindex="-1"></a>        <span class="fu">which</span>(Data<span class="sc">$</span>semester <span class="sc">==</span> <span class="st">"3"</span>),]<span class="sc">$</span>acadYear) <span class="sc">+</span> <span class="dv">1</span>}</span>
<span id="cb161-30"><a href="#cb161-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-31"><a href="#cb161-31" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb161-32"><a href="#cb161-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-33"><a href="#cb161-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(Data<span class="sc">$</span>acadYear)</span>
<span id="cb161-34"><a href="#cb161-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-35"><a href="#cb161-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-36"><a href="#cb161-36" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb161-37"><a href="#cb161-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-38"><a href="#cb161-38" aria-hidden="true" tabindex="-1"></a><span class="co">#These vectors contain identical terms in the two formats</span></span>
<span id="cb161-39"><a href="#cb161-39" aria-hidden="true" tabindex="-1"></a>terms.sis <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"1224"</span>, <span class="st">"1212"</span>, <span class="st">"1156"</span>, <span class="st">"0992"</span>, <span class="st">"1052"</span>)</span>
<span id="cb161-40"><a href="#cb161-40" aria-hidden="true" tabindex="-1"></a>terms.dars <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"20222"</span>, <span class="st">"20211"</span>, <span class="st">"20153"</span>, <span class="st">"19991"</span>, <span class="st">"20051"</span>)</span>
<span id="cb161-41"><a href="#cb161-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-42"><a href="#cb161-42" aria-hidden="true" tabindex="-1"></a><span class="co">#Because SIS is the default, you can either provide that parameter or </span></span>
<span id="cb161-43"><a href="#cb161-43" aria-hidden="true" tabindex="-1"></a><span class="co">#not if that is the input.</span></span>
<span id="cb161-44"><a href="#cb161-44" aria-hidden="true" tabindex="-1"></a>acad.year.sis <span class="ot">&lt;-</span> <span class="fu">acad.year</span>(terms.sis)</span>
<span id="cb161-45"><a href="#cb161-45" aria-hidden="true" tabindex="-1"></a>acad.year.sis</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2022" "2021" "2016" "1999" "2005"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb163"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a>acad.year.sis <span class="ot">&lt;-</span> <span class="fu">acad.year</span>(terms.sis, <span class="st">"SIS"</span>)</span>
<span id="cb163-2"><a href="#cb163-2" aria-hidden="true" tabindex="-1"></a>acad.year.sis</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2022" "2021" "2016" "1999" "2005"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="co">#If you use DARS terms, you must provide the TermType parameter</span></span>
<span id="cb165-2"><a href="#cb165-2" aria-hidden="true" tabindex="-1"></a>acad.year.dars <span class="ot">&lt;-</span> <span class="fu">acad.year</span>(terms.dars, <span class="st">"DARS"</span>)</span>
<span id="cb165-3"><a href="#cb165-3" aria-hidden="true" tabindex="-1"></a>acad.year.dars</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2022" "2021" "2016" "1999" "2005"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb167"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="co">#If you call parameters out of order (or are skipping some) </span></span>
<span id="cb167-2"><a href="#cb167-2" aria-hidden="true" tabindex="-1"></a><span class="co">#you need to provide the parameter name </span></span>
<span id="cb167-3"><a href="#cb167-3" aria-hidden="true" tabindex="-1"></a><span class="co">#with a single "=" to assign the value.</span></span>
<span id="cb167-4"><a href="#cb167-4" aria-hidden="true" tabindex="-1"></a>acad.year.dars <span class="ot">&lt;-</span> <span class="fu">acad.year</span>(<span class="at">TermType =</span> <span class="st">"DARS"</span>, <span class="at">Term =</span> terms.dars)</span>
<span id="cb167-5"><a href="#cb167-5" aria-hidden="true" tabindex="-1"></a>acad.year.dars</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2022" "2021" "2016" "1999" "2005"</code></pre>
</div>
</div>
</section>
<section id="frequently-used-functions" class="level3">
<h3 class="anchored" data-anchor-id="frequently-used-functions">Frequently Used Functions</h3>
<p>Although you can make your own functions, you will most often use functions from CRAN. If you use R a bit you will compile your own list of functions that you find useful - the internet is a good place to find them - but here is a list of useful functions to get you started. Some of these I’ve already presented, but others are new and I’ll describe them further in this section. Note that for now I won’t mention the “tidyverse” functions. I’ll present this set of functions in its own section, because they constitute a pretty dramatic change in how you use R.</p>
<ul>
<li>merge(x, y, by): merge data frame x with y, by a set of columns.</li>
<li>aggregate(x, by, FUN): aggregate values in column x by a set of columns using a particular function (FUN).</li>
<li>which(condition): returns the indexes of the rows in the column meeting a condition.</li>
<li>colnames(df): the columns in a data frame. Can be used to display or change.</li>
<li>$: access a column by name.</li>
<li>seq(from, to, by): a sequence of numbers from a number to another and by an increment.</li>
<li>x:y : a sequence of integers from x to y</li>
<li>“[rows,columns]”: subset</li>
<li>write.xlsx(df, file): write data frame to excel file</li>
<li>read_excel(df, file): read an excel file</li>
<li>read.csv(file): read a csv file</li>
<li>write.csv(df, file): write data frame to csv</li>
<li>rbind(x, y): bind two data frames x and y, by their rows. They must have the same columns.</li>
<li>cbind(x, y): bind two data frames x and y, by their columns. They must have the same number of rows and be in the same order.</li>
<li>table(column1, column2, column3): create a count table with up to three dimensions</li>
<li>prop.table(table, margin): provides proportion of counts, based upon the margin</li>
<li>summary(): provides summary information for all columns in data frame</li>
<li>substr(string, first, last): substring of provided string, with a given first and last letter index</li>
<li>str_trim(string, side): trim a string on the provided side</li>
<li>paste(string, string, sep): combines two strings in order with a certain separator</li>
<li>is.na(column): provides a TRUE/FALSE vector for whether the cell is NA</li>
<li>NROW(df): provides the number of rows in a data frame</li>
<li>length(vector): provides the length of a vector</li>
<li>unique(df): provide the unique rows of a data frame (or vector)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Here is the rabbits data frame along with some extra data frames.</span></span>
<span id="cb169-2"><a href="#cb169-2" aria-hidden="true" tabindex="-1"></a>rabbits</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             Name EarType Sex    BondPartner Weight Length Age      BMI
1          Ruthie     lop   F           &lt;NA&gt;    3.5   10.0 2.0 24.60500
2          Smokey      up   F           &lt;NA&gt;    5.8   17.0 5.0 14.10865
3             Bug      up   M           &lt;NA&gt;    2.5    8.0 1.5 27.46094
4          Wicket      up   M           &lt;NA&gt;    2.6    7.5 0.5 32.49422
5          Wesley      up   M           &lt;NA&gt;    3.2    9.0 0.8 27.77284
6         Heather     lop   F           &lt;NA&gt;    4.2   14.0 2.0 15.06429
7             Ava      up   F           &lt;NA&gt;    3.9   12.0 3.0 19.03958
8        Cinnabun      up   M           &lt;NA&gt;    2.7    8.0 1.3 29.65781
9          Oliver     lop   M           &lt;NA&gt;    3.3   10.0 0.7 23.19900
10       Chestnut      up   F           &lt;NA&gt;    4.5   13.0 2.0 18.71893
11          Daisy      up   F           &lt;NA&gt;    2.9    8.5 2.5 28.21730
12        Cadbury      up   F       Chickpea    6.0   18.0 3.0 13.01852
13       Chickpea      up   F        Cadbury    5.9   19.0 3.0 11.48947
14          Storm      up   M           &lt;NA&gt;    4.9   14.0 1.5 17.57500
15 Mr. Fuzzy Foot      up   M        Bouncer    3.9   12.0 1.0 19.03958
16        Bouncer      up   M Mr. Fuzzy Foot    4.0   12.0 1.0 19.52778
17       Midnight      up   F           &lt;NA&gt;    4.3   14.0 2.5 15.42296
      BMI_category
1   Healthy Weight
2      Underweight
3       Overweight
4  Very Overweight
5       Overweight
6   Healthy Weight
7   Healthy Weight
8       Overweight
9   Healthy Weight
10  Healthy Weight
11      Overweight
12     Underweight
13     Underweight
14  Healthy Weight
15  Healthy Weight
16  Healthy Weight
17  Healthy Weight</code></pre>
</div>
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a>more.rabbits <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Name =</span> <span class="fu">c</span>(<span class="st">"Willy"</span>, <span class="st">"Dotty"</span>, <span class="st">"Rabbit"</span>), </span>
<span id="cb171-2"><a href="#cb171-2" aria-hidden="true" tabindex="-1"></a>                           <span class="at">EarType =</span> <span class="fu">c</span>(<span class="st">"lop"</span>, <span class="st">"up"</span>, <span class="st">"up"</span>),</span>
<span id="cb171-3"><a href="#cb171-3" aria-hidden="true" tabindex="-1"></a>                           <span class="at">Sex =</span> <span class="fu">c</span>(<span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"M"</span>), </span>
<span id="cb171-4"><a href="#cb171-4" aria-hidden="true" tabindex="-1"></a>                           <span class="at">BondPartner =</span> <span class="fu">c</span>(<span class="st">"Dotty"</span>, <span class="st">"Willy"</span>, <span class="cn">NA</span>),</span>
<span id="cb171-5"><a href="#cb171-5" aria-hidden="true" tabindex="-1"></a>                           <span class="at">Weight =</span> <span class="fu">c</span>(<span class="fl">2.2</span>, <span class="fl">5.3</span>, <span class="fl">3.1</span>),</span>
<span id="cb171-6"><a href="#cb171-6" aria-hidden="true" tabindex="-1"></a>                           <span class="at">Length =</span> <span class="fu">c</span>(<span class="dv">9</span>, <span class="dv">18</span>, <span class="dv">12</span>), </span>
<span id="cb171-7"><a href="#cb171-7" aria-hidden="true" tabindex="-1"></a>                           <span class="at">Age =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">2</span>))</span>
<span id="cb171-8"><a href="#cb171-8" aria-hidden="true" tabindex="-1"></a>more.rabbits<span class="sc">$</span>BMI <span class="ot">&lt;-</span>  more.rabbits<span class="sc">$</span>Weight<span class="sc">/</span>(more.rabbits<span class="sc">$</span>Length<span class="sc">^</span><span class="dv">2</span>) <span class="sc">*</span> <span class="dv">703</span></span>
<span id="cb171-9"><a href="#cb171-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-10"><a href="#cb171-10" aria-hidden="true" tabindex="-1"></a>more.rabbits<span class="sc">$</span>BMI_category <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb171-11"><a href="#cb171-11" aria-hidden="true" tabindex="-1"></a>more.rabbits[<span class="fu">which</span>(more.rabbits<span class="sc">$</span>BMI <span class="sc">&lt;</span> <span class="dv">15</span>),]<span class="sc">$</span>BMI_category <span class="ot">&lt;-</span><span class="st">"Underweight"</span></span>
<span id="cb171-12"><a href="#cb171-12" aria-hidden="true" tabindex="-1"></a>more.rabbits[<span class="fu">which</span>(more.rabbits<span class="sc">$</span>BMI <span class="sc">&gt;=</span> <span class="dv">15</span> <span class="sc">&amp;</span> more.rabbits<span class="sc">$</span>BMI <span class="sc">&lt;</span> <span class="dv">25</span>),</span>
<span id="cb171-13"><a href="#cb171-13" aria-hidden="true" tabindex="-1"></a>             ]<span class="sc">$</span>BMI_category <span class="ot">&lt;-</span><span class="st">"Healthy Weight"</span></span>
<span id="cb171-14"><a href="#cb171-14" aria-hidden="true" tabindex="-1"></a><span class="co">#more.rabbits[which(more.rabbits$BMI &gt;= 25 &amp; more.rabbits$BMI &lt; 32),</span></span>
<span id="cb171-15"><a href="#cb171-15" aria-hidden="true" tabindex="-1"></a><span class="co">#             ]$BMI_category &lt;-"Overweight"</span></span>
<span id="cb171-16"><a href="#cb171-16" aria-hidden="true" tabindex="-1"></a><span class="co">#more.rabbits[which(more.rabbits$BMI &gt;= 32),</span></span>
<span id="cb171-17"><a href="#cb171-17" aria-hidden="true" tabindex="-1"></a><span class="co">#             ]$BMI_category &lt;-"Very Overweight"</span></span>
<span id="cb171-18"><a href="#cb171-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-19"><a href="#cb171-19" aria-hidden="true" tabindex="-1"></a><span class="co">#Notice that I am including entries for the more.rabbits rows.</span></span>
<span id="cb171-20"><a href="#cb171-20" aria-hidden="true" tabindex="-1"></a>rabbits.extra.columns <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Vaccinated =</span> <span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>,</span>
<span id="cb171-21"><a href="#cb171-21" aria-hidden="true" tabindex="-1"></a>                                                    <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>,</span>
<span id="cb171-22"><a href="#cb171-22" aria-hidden="true" tabindex="-1"></a>                                                    <span class="cn">TRUE</span>, <span class="cn">TRUE</span>,  <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>,</span>
<span id="cb171-23"><a href="#cb171-23" aria-hidden="true" tabindex="-1"></a>                                                   <span class="cn">TRUE</span>, <span class="cn">FALSE</span>), </span>
<span id="cb171-24"><a href="#cb171-24" aria-hidden="true" tabindex="-1"></a>                          <span class="at">Date_Entered =</span> <span class="fu">as.Date</span>(<span class="fu">c</span>(<span class="st">"2022-06-24"</span>,<span class="st">"2022-06-24"</span>,<span class="st">"2022-06-24"</span>,</span>
<span id="cb171-25"><a href="#cb171-25" aria-hidden="true" tabindex="-1"></a>                                    <span class="st">"2022-06-24"</span>, <span class="st">"2022-06-24"</span>,<span class="st">"2022-06-24"</span>,</span>
<span id="cb171-26"><a href="#cb171-26" aria-hidden="true" tabindex="-1"></a>                                    <span class="st">"2022-06-24"</span>, <span class="st">"2022-06-24"</span>,<span class="st">"2022-06-24"</span>,                                                                                   <span class="st">"2022-06-24"</span>, <span class="st">"2022-06-24"</span>,<span class="st">"2022-06-24"</span>,</span>
<span id="cb171-27"><a href="#cb171-27" aria-hidden="true" tabindex="-1"></a>                                    <span class="st">"2022-06-24"</span>, <span class="st">"2022-06-24"</span>,<span class="st">"2022-06-24"</span>,</span>
<span id="cb171-28"><a href="#cb171-28" aria-hidden="true" tabindex="-1"></a>                                    <span class="st">"2022-06-24"</span>, <span class="st">"2022-06-24"</span>,<span class="st">"2022-07-25"</span>,</span>
<span id="cb171-29"><a href="#cb171-29" aria-hidden="true" tabindex="-1"></a>                                    <span class="st">"2022-07-25"</span>, <span class="st">"2022-07-25"</span> )))</span>
<span id="cb171-30"><a href="#cb171-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-31"><a href="#cb171-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-32"><a href="#cb171-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-33"><a href="#cb171-33" aria-hidden="true" tabindex="-1"></a><span class="co">#Add rows</span></span>
<span id="cb171-34"><a href="#cb171-34" aria-hidden="true" tabindex="-1"></a>rabbits <span class="ot">&lt;-</span> <span class="fu">rbind</span>(rabbits, more.rabbits)</span>
<span id="cb171-35"><a href="#cb171-35" aria-hidden="true" tabindex="-1"></a>rabbits</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             Name EarType Sex    BondPartner Weight Length Age      BMI
1          Ruthie     lop   F           &lt;NA&gt;    3.5   10.0 2.0 24.60500
2          Smokey      up   F           &lt;NA&gt;    5.8   17.0 5.0 14.10865
3             Bug      up   M           &lt;NA&gt;    2.5    8.0 1.5 27.46094
4          Wicket      up   M           &lt;NA&gt;    2.6    7.5 0.5 32.49422
5          Wesley      up   M           &lt;NA&gt;    3.2    9.0 0.8 27.77284
6         Heather     lop   F           &lt;NA&gt;    4.2   14.0 2.0 15.06429
7             Ava      up   F           &lt;NA&gt;    3.9   12.0 3.0 19.03958
8        Cinnabun      up   M           &lt;NA&gt;    2.7    8.0 1.3 29.65781
9          Oliver     lop   M           &lt;NA&gt;    3.3   10.0 0.7 23.19900
10       Chestnut      up   F           &lt;NA&gt;    4.5   13.0 2.0 18.71893
11          Daisy      up   F           &lt;NA&gt;    2.9    8.5 2.5 28.21730
12        Cadbury      up   F       Chickpea    6.0   18.0 3.0 13.01852
13       Chickpea      up   F        Cadbury    5.9   19.0 3.0 11.48947
14          Storm      up   M           &lt;NA&gt;    4.9   14.0 1.5 17.57500
15 Mr. Fuzzy Foot      up   M        Bouncer    3.9   12.0 1.0 19.03958
16        Bouncer      up   M Mr. Fuzzy Foot    4.0   12.0 1.0 19.52778
17       Midnight      up   F           &lt;NA&gt;    4.3   14.0 2.5 15.42296
18          Willy     lop   M          Dotty    2.2    9.0 4.0 19.09383
19          Dotty      up   F          Willy    5.3   18.0 5.0 11.49969
20         Rabbit      up   M           &lt;NA&gt;    3.1   12.0 2.0 15.13403
      BMI_category
1   Healthy Weight
2      Underweight
3       Overweight
4  Very Overweight
5       Overweight
6   Healthy Weight
7   Healthy Weight
8       Overweight
9   Healthy Weight
10  Healthy Weight
11      Overweight
12     Underweight
13     Underweight
14  Healthy Weight
15  Healthy Weight
16  Healthy Weight
17  Healthy Weight
18  Healthy Weight
19     Underweight
20  Healthy Weight</code></pre>
</div>
<div class="sourceCode cell-code" id="cb173"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Add columns</span></span>
<span id="cb173-2"><a href="#cb173-2" aria-hidden="true" tabindex="-1"></a>rabbits <span class="ot">&lt;-</span> <span class="fu">cbind</span>(rabbits, rabbits.extra.columns)</span>
<span id="cb173-3"><a href="#cb173-3" aria-hidden="true" tabindex="-1"></a>rabbits</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             Name EarType Sex    BondPartner Weight Length Age      BMI
1          Ruthie     lop   F           &lt;NA&gt;    3.5   10.0 2.0 24.60500
2          Smokey      up   F           &lt;NA&gt;    5.8   17.0 5.0 14.10865
3             Bug      up   M           &lt;NA&gt;    2.5    8.0 1.5 27.46094
4          Wicket      up   M           &lt;NA&gt;    2.6    7.5 0.5 32.49422
5          Wesley      up   M           &lt;NA&gt;    3.2    9.0 0.8 27.77284
6         Heather     lop   F           &lt;NA&gt;    4.2   14.0 2.0 15.06429
7             Ava      up   F           &lt;NA&gt;    3.9   12.0 3.0 19.03958
8        Cinnabun      up   M           &lt;NA&gt;    2.7    8.0 1.3 29.65781
9          Oliver     lop   M           &lt;NA&gt;    3.3   10.0 0.7 23.19900
10       Chestnut      up   F           &lt;NA&gt;    4.5   13.0 2.0 18.71893
11          Daisy      up   F           &lt;NA&gt;    2.9    8.5 2.5 28.21730
12        Cadbury      up   F       Chickpea    6.0   18.0 3.0 13.01852
13       Chickpea      up   F        Cadbury    5.9   19.0 3.0 11.48947
14          Storm      up   M           &lt;NA&gt;    4.9   14.0 1.5 17.57500
15 Mr. Fuzzy Foot      up   M        Bouncer    3.9   12.0 1.0 19.03958
16        Bouncer      up   M Mr. Fuzzy Foot    4.0   12.0 1.0 19.52778
17       Midnight      up   F           &lt;NA&gt;    4.3   14.0 2.5 15.42296
18          Willy     lop   M          Dotty    2.2    9.0 4.0 19.09383
19          Dotty      up   F          Willy    5.3   18.0 5.0 11.49969
20         Rabbit      up   M           &lt;NA&gt;    3.1   12.0 2.0 15.13403
      BMI_category Vaccinated Date_Entered
1   Healthy Weight      FALSE   2022-06-24
2      Underweight       TRUE   2022-06-24
3       Overweight       TRUE   2022-06-24
4  Very Overweight      FALSE   2022-06-24
5       Overweight       TRUE   2022-06-24
6   Healthy Weight       TRUE   2022-06-24
7   Healthy Weight       TRUE   2022-06-24
8       Overweight      FALSE   2022-06-24
9   Healthy Weight       TRUE   2022-06-24
10  Healthy Weight       TRUE   2022-06-24
11      Overweight       TRUE   2022-06-24
12     Underweight       TRUE   2022-06-24
13     Underweight       TRUE   2022-06-24
14  Healthy Weight       TRUE   2022-06-24
15  Healthy Weight       TRUE   2022-06-24
16  Healthy Weight       TRUE   2022-06-24
17  Healthy Weight       TRUE   2022-06-24
18  Healthy Weight       TRUE   2022-07-25
19     Underweight       TRUE   2022-07-25
20  Healthy Weight      FALSE   2022-07-25</code></pre>
</div>
<div class="sourceCode cell-code" id="cb175"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Table counting EarType and Sex</span></span>
<span id="cb175-2"><a href="#cb175-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(rabbits<span class="sc">$</span>EarType, rabbits<span class="sc">$</span>Sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     
      F M
  lop 2 2
  up  8 8</code></pre>
</div>
<div class="sourceCode cell-code" id="cb177"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="co">#proportions of the entire table</span></span>
<span id="cb177-2"><a href="#cb177-2" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(<span class="fu">table</span>(rabbits<span class="sc">$</span>EarType, rabbits<span class="sc">$</span>Sex))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     
        F   M
  lop 0.1 0.1
  up  0.4 0.4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb179"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="co">#proportions of the rows</span></span>
<span id="cb179-2"><a href="#cb179-2" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(<span class="fu">table</span>(rabbits<span class="sc">$</span>EarType, rabbits<span class="sc">$</span>Sex), <span class="at">margin =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     
        F   M
  lop 0.5 0.5
  up  0.5 0.5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb181"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="co">#proportions of the columns</span></span>
<span id="cb181-2"><a href="#cb181-2" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(<span class="fu">table</span>(rabbits<span class="sc">$</span>EarType, rabbits<span class="sc">$</span>Sex), <span class="at">margin =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     
        F   M
  lop 0.2 0.2
  up  0.8 0.8</code></pre>
</div>
<div class="sourceCode cell-code" id="cb183"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="co">#summary information for all columns in data frame</span></span>
<span id="cb183-2"><a href="#cb183-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(rabbits)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Name             EarType              Sex            BondPartner       
 Length:20          Length:20          Length:20          Length:20         
 Class :character   Class :character   Class :character   Class :character  
 Mode  :character   Mode  :character   Mode  :character   Mode  :character  
                                                                            
                                                                            
                                                                            
     Weight          Length           Age             BMI       
 Min.   :2.200   Min.   : 7.50   Min.   :0.500   Min.   :11.49  
 1st Qu.:3.050   1st Qu.: 9.00   1st Qu.:1.225   1st Qu.:15.12  
 Median :3.900   Median :12.00   Median :2.000   Median :19.04  
 Mean   :3.935   Mean   :12.25   Mean   :2.215   Mean   :20.11  
 3rd Qu.:4.600   3rd Qu.:14.00   3rd Qu.:3.000   3rd Qu.:25.32  
 Max.   :6.000   Max.   :19.00   Max.   :5.000   Max.   :32.49  
 BMI_category       Vaccinated       Date_Entered       
 Length:20          Mode :logical   Min.   :2022-06-24  
 Class :character   FALSE:4         1st Qu.:2022-06-24  
 Mode  :character   TRUE :16        Median :2022-06-24  
                                    Mean   :2022-06-28  
                                    3rd Qu.:2022-06-24  
                                    Max.   :2022-07-25  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb185"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Abbreviate the ear type, going from space 1 to space 1.</span></span>
<span id="cb185-2"><a href="#cb185-2" aria-hidden="true" tabindex="-1"></a>EarType.abv <span class="ot">&lt;-</span> <span class="fu">substr</span>(rabbits<span class="sc">$</span>EarType, <span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb185-3"><a href="#cb185-3" aria-hidden="true" tabindex="-1"></a>EarType.abv</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "l" "u" "u" "u" "u" "l" "u" "u" "l" "u" "u" "u" "u" "u" "u" "u" "u" "l" "u"
[20] "u"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb187"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Adding trailing spaces to the Name for an example</span></span>
<span id="cb187-2"><a href="#cb187-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Here I add a fixed string using paste with no seperation</span></span>
<span id="cb187-3"><a href="#cb187-3" aria-hidden="true" tabindex="-1"></a>rabbits<span class="sc">$</span>Name <span class="ot">&lt;-</span> <span class="fu">paste</span>(rabbits<span class="sc">$</span>Name, <span class="st">"  "</span>, <span class="at">sep =</span> <span class="st">""</span>)</span>
<span id="cb187-4"><a href="#cb187-4" aria-hidden="true" tabindex="-1"></a>rabbits<span class="sc">$</span>Name</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Ruthie  "         "Smokey  "         "Bug  "            "Wicket  "        
 [5] "Wesley  "         "Heather  "        "Ava  "            "Cinnabun  "      
 [9] "Oliver  "         "Chestnut  "       "Daisy  "          "Cadbury  "       
[13] "Chickpea  "       "Storm  "          "Mr. Fuzzy Foot  " "Bouncer  "       
[17] "Midnight  "       "Willy  "          "Dotty  "          "Rabbit  "        </code></pre>
</div>
<div class="sourceCode cell-code" id="cb189"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Trim the trailing spaces (right side)</span></span>
<span id="cb189-2"><a href="#cb189-2" aria-hidden="true" tabindex="-1"></a>rabbits<span class="sc">$</span>Name <span class="ot">&lt;-</span>  stringr<span class="sc">::</span><span class="fu">str_trim</span>(rabbits<span class="sc">$</span>Name, <span class="at">side =</span> <span class="st">"right"</span>)</span>
<span id="cb189-3"><a href="#cb189-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb189-4"><a href="#cb189-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Only subset the rows with an unbonded rabbit (NA for BondPartner).</span></span>
<span id="cb189-5"><a href="#cb189-5" aria-hidden="true" tabindex="-1"></a>rabbits.not.bonded <span class="ot">&lt;-</span> rabbits[<span class="fu">which</span>(<span class="fu">is.na</span>(rabbits<span class="sc">$</span>BondPartner)),]</span>
<span id="cb189-6"><a href="#cb189-6" aria-hidden="true" tabindex="-1"></a>rabbits.not.bonded</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       Name EarType Sex BondPartner Weight Length Age      BMI    BMI_category
1    Ruthie     lop   F        &lt;NA&gt;    3.5   10.0 2.0 24.60500  Healthy Weight
2    Smokey      up   F        &lt;NA&gt;    5.8   17.0 5.0 14.10865     Underweight
3       Bug      up   M        &lt;NA&gt;    2.5    8.0 1.5 27.46094      Overweight
4    Wicket      up   M        &lt;NA&gt;    2.6    7.5 0.5 32.49422 Very Overweight
5    Wesley      up   M        &lt;NA&gt;    3.2    9.0 0.8 27.77284      Overweight
6   Heather     lop   F        &lt;NA&gt;    4.2   14.0 2.0 15.06429  Healthy Weight
7       Ava      up   F        &lt;NA&gt;    3.9   12.0 3.0 19.03958  Healthy Weight
8  Cinnabun      up   M        &lt;NA&gt;    2.7    8.0 1.3 29.65781      Overweight
9    Oliver     lop   M        &lt;NA&gt;    3.3   10.0 0.7 23.19900  Healthy Weight
10 Chestnut      up   F        &lt;NA&gt;    4.5   13.0 2.0 18.71893  Healthy Weight
11    Daisy      up   F        &lt;NA&gt;    2.9    8.5 2.5 28.21730      Overweight
14    Storm      up   M        &lt;NA&gt;    4.9   14.0 1.5 17.57500  Healthy Weight
17 Midnight      up   F        &lt;NA&gt;    4.3   14.0 2.5 15.42296  Healthy Weight
20   Rabbit      up   M        &lt;NA&gt;    3.1   12.0 2.0 15.13403  Healthy Weight
   Vaccinated Date_Entered
1       FALSE   2022-06-24
2        TRUE   2022-06-24
3        TRUE   2022-06-24
4       FALSE   2022-06-24
5        TRUE   2022-06-24
6        TRUE   2022-06-24
7        TRUE   2022-06-24
8       FALSE   2022-06-24
9        TRUE   2022-06-24
10       TRUE   2022-06-24
11       TRUE   2022-06-24
14       TRUE   2022-06-24
17       TRUE   2022-06-24
20      FALSE   2022-07-25</code></pre>
</div>
<div class="sourceCode cell-code" id="cb191"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Number of rows in the data frame</span></span>
<span id="cb191-2"><a href="#cb191-2" aria-hidden="true" tabindex="-1"></a><span class="fu">NROW</span>(rabbits)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 20</code></pre>
</div>
<div class="sourceCode cell-code" id="cb193"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Length of a vector</span></span>
<span id="cb193-2"><a href="#cb193-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(rabbits<span class="sc">$</span>Name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 20</code></pre>
</div>
<div class="sourceCode cell-code" id="cb195"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Unique values in a column. </span></span>
<span id="cb195-2"><a href="#cb195-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Can also be used to output unique rows in a data frame</span></span>
<span id="cb195-3"><a href="#cb195-3" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(rabbits<span class="sc">$</span>Sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "F" "M"</code></pre>
</div>
</div>
</section>
<section id="installing-from-githubgitlab" class="level3">
<h3 class="anchored" data-anchor-id="installing-from-githubgitlab">Installing from github/gitlab</h3>
<p>The process to get a package onto CRAN is involved and lengthy. Therefore, many important packages are located in online git repositories not governed by the CRAN approval process. You should always be wary of such packages, because they have not been vetted. However, it is relatively easy to install packages from these sources.</p>
<p>I will show how to install a package of functions from the AIM gitlab repository. In order to do this you will need to install [the <strong>Rtools</strong> program]{https://cran.r-project.org/bin/windows/Rtools/} and the <strong>devtools</strong> package. Both are on CRAN, but Rtools needs to be installed outside of R. Once you have installed both of these use the following commands.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb197"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Load the devtools package</span></span>
<span id="cb197-2"><a href="#cb197-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(devtools)</span>
<span id="cb197-3"><a href="#cb197-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb197-4"><a href="#cb197-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Install the AIMutils package from the lsaim UW gitlab repository</span></span>
<span id="cb197-5"><a href="#cb197-5" aria-hidden="true" tabindex="-1"></a><span class="fu">install_gitlab</span>(<span class="st">"lsaim/AIMutils"</span>, <span class="at">host =</span> <span class="st">"git.doit.wisc.edu"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="tidyverse" class="level2">
<h2 class="anchored" data-anchor-id="tidyverse">Tidyverse</h2>
<p>One strength of R is its extendability from being open source. Anyone can add onto the R language with additional functions, and by meeting certain conditions they can get added to the CRAN repository. One of the most important additions to CRAN has been a collection of packages (including “dplyr”, “stringr”, “tibble”, “ggplot2”, and others) maintained by R-Studio and packaged together into a library called “tidyverse.” We have already used a few of these packages, and you can install them separately, but when used together they allow you to use R in a different way.</p>
<p>Most of the tidyverse functions can be used in base R, without changing how you code. But a few features included in the tidyverse make more fundamental changes to how you code. These include <strong>pipes</strong> (%&gt;%), functions like <strong>summarize()</strong>, <strong>filter()</strong>, and <strong>inner_join()</strong> to accomplish what we have used functions like aggregate(), [], and merge(), and a souped up version of a data frame called a <strong>tibble</strong>. The tibble is the least interesting part of this, and can sometimes be annoying, but most tidyverse functions will create tibbles instead of data frames. This will almost never matter, but you can always use <strong>as.data.frame()</strong> on a tibble to get an old-fashioned data frame instead. For instance, write.xlsx() will not accept tibbles, and so you will have to convert any tibble to a data frame when outputting an excel file using it.</p>
<section id="pipes-and-overall-structure" class="level3">
<h3 class="anchored" data-anchor-id="pipes-and-overall-structure">Pipes and Overall Structure</h3>
<p>The cornerstone of the tidyverse way of coding is processing of data through a series of steps, passing the data through these “pipes” after each step, and not outputting the data until the end of the process. This makes for more readable and compact code. It also makes it easier to apply a variety of different functions from the tidyverse that make rather complex processes quite simple. To see how this works I’ll compare some tidyverse code to the Base-R code you have already learned. However, in the same script you can use both Base-R code and tidyverse code as you wish. The tidyverse doesn’t replace Base-R, it is just another tool to make your life easier. Note that some tidyverse functions have a short-hand way of coding that also works (for instance omitting the “.”), but I will always include the long-form of the command. I recommend you do too for a while, so that you remember what you are doing.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb198"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Using the rabbits data frame, this filters, selects some columns,</span></span>
<span id="cb198-2"><a href="#cb198-2" aria-hidden="true" tabindex="-1"></a><span class="co"># and then makes some new columns. Finally rename two columns:</span></span>
<span id="cb198-3"><a href="#cb198-3" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb198-4"><a href="#cb198-4" aria-hidden="true" tabindex="-1"></a><span class="do">##Base-R</span></span>
<span id="cb198-5"><a href="#cb198-5" aria-hidden="true" tabindex="-1"></a>overweight.rabbits.base <span class="ot">&lt;-</span> rabbits[<span class="fu">which</span>(rabbits<span class="sc">$</span>BMI_category <span class="sc">%in%</span> </span>
<span id="cb198-6"><a href="#cb198-6" aria-hidden="true" tabindex="-1"></a>                            <span class="fu">c</span>(<span class="st">"Overweight"</span>, <span class="st">"Very Overweight"</span>) ),</span>
<span id="cb198-7"><a href="#cb198-7" aria-hidden="true" tabindex="-1"></a>                            <span class="fu">c</span>(<span class="st">"Name"</span>, <span class="st">"EarType"</span>, <span class="st">"Sex"</span>, </span>
<span id="cb198-8"><a href="#cb198-8" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"Age"</span>,<span class="st">"Weight"</span>,<span class="st">"Length"</span>, <span class="st">"Vaccinated"</span>)]</span>
<span id="cb198-9"><a href="#cb198-9" aria-hidden="true" tabindex="-1"></a>overweight.rabbits.base<span class="sc">$</span>Weight_kg <span class="ot">&lt;-</span> overweight.rabbits.base<span class="sc">$</span>Weight <span class="sc">*</span> <span class="fl">0.45359237</span></span>
<span id="cb198-10"><a href="#cb198-10" aria-hidden="true" tabindex="-1"></a>overweight.rabbits.base<span class="sc">$</span>Length_cm <span class="ot">&lt;-</span> overweight.rabbits.base<span class="sc">$</span>Length <span class="sc">*</span> <span class="fl">2.54</span></span>
<span id="cb198-11"><a href="#cb198-11" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(overweight.rabbits.base) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Name"</span>, <span class="st">"EarType"</span>, <span class="st">"Sex"</span>, </span>
<span id="cb198-12"><a href="#cb198-12" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"Age"</span>,<span class="st">"Weight_lb"</span>,<span class="st">"Length_inch"</span>, </span>
<span id="cb198-13"><a href="#cb198-13" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"Vaccinated"</span>, <span class="st">"Weight_kg"</span>, <span class="st">"Length_cm"</span>)</span>
<span id="cb198-14"><a href="#cb198-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-15"><a href="#cb198-15" aria-hidden="true" tabindex="-1"></a>overweight.rabbits.base</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       Name EarType Sex Age Weight_lb Length_inch Vaccinated Weight_kg
3       Bug      up   M 1.5       2.5         8.0       TRUE  1.133981
4    Wicket      up   M 0.5       2.6         7.5      FALSE  1.179340
5    Wesley      up   M 0.8       3.2         9.0       TRUE  1.451496
8  Cinnabun      up   M 1.3       2.7         8.0      FALSE  1.224699
11    Daisy      up   F 2.5       2.9         8.5       TRUE  1.315418
   Length_cm
3      20.32
4      19.05
5      22.86
8      20.32
11     21.59</code></pre>
</div>
<div class="sourceCode cell-code" id="cb200"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true" tabindex="-1"></a><span class="do">##Tidy R</span></span>
<span id="cb200-2"><a href="#cb200-2" aria-hidden="true" tabindex="-1"></a><span class="co">#You begin with the source data and then you pipe it to each additional step.</span></span>
<span id="cb200-3"><a href="#cb200-3" aria-hidden="true" tabindex="-1"></a><span class="co">#The "." represents the data that goes through the pipe.</span></span>
<span id="cb200-4"><a href="#cb200-4" aria-hidden="true" tabindex="-1"></a><span class="co">#You can use column names without the data frame first (and $) and without quotes.</span></span>
<span id="cb200-5"><a href="#cb200-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) <span class="co">#Install this if it isn't already - see all the packages it installs.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──
✔ ggplot2 3.4.0     ✔ purrr   1.0.1
✔ tibble  3.1.8     ✔ dplyr   1.1.0
✔ tidyr   1.3.0     ✔ stringr 1.5.0
✔ readr   2.1.3     ✔ forcats 1.0.0
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()</code></pre>
</div>
<div class="sourceCode cell-code" id="cb202"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb202-1"><a href="#cb202-1" aria-hidden="true" tabindex="-1"></a>overweight.rabbits.tidy <span class="ot">&lt;-</span> rabbits <span class="sc">%&gt;%</span> </span>
<span id="cb202-2"><a href="#cb202-2" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">filter</span>( . , BMI_category <span class="sc">%in%</span> </span>
<span id="cb202-3"><a href="#cb202-3" aria-hidden="true" tabindex="-1"></a>                                    <span class="fu">c</span>(<span class="st">"Overweight"</span>, <span class="st">"Very Overweight"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb202-4"><a href="#cb202-4" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">select</span>( . , Name, EarType, Sex, Age, </span>
<span id="cb202-5"><a href="#cb202-5" aria-hidden="true" tabindex="-1"></a>                                  Weight, Length, Vaccinated) <span class="sc">%&gt;%</span></span>
<span id="cb202-6"><a href="#cb202-6" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">mutate</span>( . , <span class="at">Weight_kg =</span> Weight <span class="sc">*</span> <span class="fl">0.45359237</span>,</span>
<span id="cb202-7"><a href="#cb202-7" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">Length_cm =</span> Length <span class="sc">*</span> <span class="fl">2.54</span>) <span class="sc">%&gt;%</span></span>
<span id="cb202-8"><a href="#cb202-8" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">rename</span>( . ,<span class="at">Weight_lb =</span> Weight, <span class="at">Length_inch =</span> Length)</span>
<span id="cb202-9"><a href="#cb202-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb202-10"><a href="#cb202-10" aria-hidden="true" tabindex="-1"></a>overweight.rabbits.tidy</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Name EarType Sex Age Weight_lb Length_inch Vaccinated Weight_kg Length_cm
1      Bug      up   M 1.5       2.5         8.0       TRUE  1.133981     20.32
2   Wicket      up   M 0.5       2.6         7.5      FALSE  1.179340     19.05
3   Wesley      up   M 0.8       3.2         9.0       TRUE  1.451496     22.86
4 Cinnabun      up   M 1.3       2.7         8.0      FALSE  1.224699     20.32
5    Daisy      up   F 2.5       2.9         8.5       TRUE  1.315418     21.59</code></pre>
</div>
<div class="sourceCode cell-code" id="cb204"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb204-1"><a href="#cb204-1" aria-hidden="true" tabindex="-1"></a><span class="co">#You can also aggregate values easily using tidy.</span></span>
<span id="cb204-2"><a href="#cb204-2" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb204-3"><a href="#cb204-3" aria-hidden="true" tabindex="-1"></a><span class="do">##Base-R</span></span>
<span id="cb204-4"><a href="#cb204-4" aria-hidden="true" tabindex="-1"></a>rabbits.mean.weight.by.sex.ear <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(rabbits<span class="sc">$</span>Weight, </span>
<span id="cb204-5"><a href="#cb204-5" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">by =</span> <span class="fu">list</span>(rabbits<span class="sc">$</span>Sex, rabbits<span class="sc">$</span>EarType), </span>
<span id="cb204-6"><a href="#cb204-6" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">FUN =</span> mean)</span>
<span id="cb204-7"><a href="#cb204-7" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(rabbits.mean.weight.by.sex.ear) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Sex"</span>, <span class="st">"EarType"</span>, <span class="st">"Mean_Weight"</span>)</span>
<span id="cb204-8"><a href="#cb204-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb204-9"><a href="#cb204-9" aria-hidden="true" tabindex="-1"></a>rabbits.count.by.sex.ear <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">table</span>(rabbits<span class="sc">$</span>Sex, rabbits<span class="sc">$</span>EarType))</span>
<span id="cb204-10"><a href="#cb204-10" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(rabbits.count.by.sex.ear) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Sex"</span>, <span class="st">"EarType"</span>, <span class="st">"n"</span>)</span>
<span id="cb204-11"><a href="#cb204-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb204-12"><a href="#cb204-12" aria-hidden="true" tabindex="-1"></a>rabbits.summary.weight.by.sex.ear.base <span class="ot">&lt;-</span> <span class="fu">merge</span>(<span class="at">x =</span> rabbits.mean.weight.by.sex.ear, </span>
<span id="cb204-13"><a href="#cb204-13" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">y =</span> rabbits.count.by.sex.ear, </span>
<span id="cb204-14"><a href="#cb204-14" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Sex"</span>, <span class="st">"EarType"</span>))</span>
<span id="cb204-15"><a href="#cb204-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb204-16"><a href="#cb204-16" aria-hidden="true" tabindex="-1"></a>rabbits.summary.weight.by.sex.ear.base</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Sex EarType Mean_Weight n
1   F     lop      3.8500 2
2   F      up      4.8250 8
3   M     lop      2.7500 2
4   M      up      3.3625 8</code></pre>
</div>
<div class="sourceCode cell-code" id="cb206"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb206-1"><a href="#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="do">##Tidy R</span></span>
<span id="cb206-2"><a href="#cb206-2" aria-hidden="true" tabindex="-1"></a>rabbits.summary.weight.by.sex.ear.tidy <span class="ot">&lt;-</span> rabbits <span class="sc">%&gt;%</span></span>
<span id="cb206-3"><a href="#cb206-3" aria-hidden="true" tabindex="-1"></a>                                          <span class="fu">group_by</span>( . , Sex, EarType) <span class="sc">%&gt;%</span></span>
<span id="cb206-4"><a href="#cb206-4" aria-hidden="true" tabindex="-1"></a>                                          <span class="fu">summarize</span>( . , <span class="at">Mean_Weight =</span> <span class="fu">mean</span>(Weight),</span>
<span id="cb206-5"><a href="#cb206-5" aria-hidden="true" tabindex="-1"></a>                                                    <span class="at">n =</span> <span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Sex'. You can override using the `.groups`
argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb208"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb208-1"><a href="#cb208-1" aria-hidden="true" tabindex="-1"></a>rabbits.summary.weight.by.sex.ear.tidy</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 4
# Groups:   Sex [2]
  Sex   EarType Mean_Weight     n
  &lt;chr&gt; &lt;chr&gt;         &lt;dbl&gt; &lt;int&gt;
1 F     lop            3.85     2
2 F     up             4.82     8
3 M     lop            2.75     2
4 M     up             3.36     8</code></pre>
</div>
</div>
<p>I’ll break down the two sets of tidy code so that you can see what is going on. Because a data frame is produced after every new line of tidy code, you can always run a part of the tidy code by just selecting everything before the last pipe (%&gt;%) that you want to include.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb210"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb210-1"><a href="#cb210-1" aria-hidden="true" tabindex="-1"></a><span class="co">#The first section of code that filters and creates a new variable.</span></span>
<span id="cb210-2"><a href="#cb210-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb210-3"><a href="#cb210-3" aria-hidden="true" tabindex="-1"></a><span class="do">##Begin with the rabbits data frame and then filter it, only including </span></span>
<span id="cb210-4"><a href="#cb210-4" aria-hidden="true" tabindex="-1"></a><span class="do">###rows of "Overweight" and "Very Overweight" rabbits.</span></span>
<span id="cb210-5"><a href="#cb210-5" aria-hidden="true" tabindex="-1"></a>overweight.rabbits.tidy <span class="ot">&lt;-</span> rabbits <span class="sc">%&gt;%</span> </span>
<span id="cb210-6"><a href="#cb210-6" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">filter</span>( . , BMI_category <span class="sc">%in%</span> </span>
<span id="cb210-7"><a href="#cb210-7" aria-hidden="true" tabindex="-1"></a>                                    <span class="fu">c</span>(<span class="st">"Overweight"</span>, <span class="st">"Very Overweight"</span>))</span>
<span id="cb210-8"><a href="#cb210-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb210-9"><a href="#cb210-9" aria-hidden="true" tabindex="-1"></a>overweight.rabbits.tidy</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Name EarType Sex BondPartner Weight Length Age      BMI    BMI_category
1      Bug      up   M        &lt;NA&gt;    2.5    8.0 1.5 27.46094      Overweight
2   Wicket      up   M        &lt;NA&gt;    2.6    7.5 0.5 32.49422 Very Overweight
3   Wesley      up   M        &lt;NA&gt;    3.2    9.0 0.8 27.77284      Overweight
4 Cinnabun      up   M        &lt;NA&gt;    2.7    8.0 1.3 29.65781      Overweight
5    Daisy      up   F        &lt;NA&gt;    2.9    8.5 2.5 28.21730      Overweight
  Vaccinated Date_Entered
1       TRUE   2022-06-24
2      FALSE   2022-06-24
3       TRUE   2022-06-24
4      FALSE   2022-06-24
5       TRUE   2022-06-24</code></pre>
</div>
<div class="sourceCode cell-code" id="cb212"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb212-1"><a href="#cb212-1" aria-hidden="true" tabindex="-1"></a><span class="do">##After the filter, only select the columns listed. Note that columns can be </span></span>
<span id="cb212-2"><a href="#cb212-2" aria-hidden="true" tabindex="-1"></a><span class="do">###excluded by putting a `-` in front of them.</span></span>
<span id="cb212-3"><a href="#cb212-3" aria-hidden="true" tabindex="-1"></a>overweight.rabbits.tidy <span class="ot">&lt;-</span> rabbits <span class="sc">%&gt;%</span> </span>
<span id="cb212-4"><a href="#cb212-4" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">filter</span>( . , BMI_category <span class="sc">%in%</span> </span>
<span id="cb212-5"><a href="#cb212-5" aria-hidden="true" tabindex="-1"></a>                                    <span class="fu">c</span>(<span class="st">"Overweight"</span>, <span class="st">"Very Overweight"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb212-6"><a href="#cb212-6" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">select</span>( . , Name, EarType, Sex, Age, </span>
<span id="cb212-7"><a href="#cb212-7" aria-hidden="true" tabindex="-1"></a>                                  Weight, Length, Vaccinated) </span>
<span id="cb212-8"><a href="#cb212-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-9"><a href="#cb212-9" aria-hidden="true" tabindex="-1"></a>overweight.rabbits.tidy</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Name EarType Sex Age Weight Length Vaccinated
1      Bug      up   M 1.5    2.5    8.0       TRUE
2   Wicket      up   M 0.5    2.6    7.5      FALSE
3   Wesley      up   M 0.8    3.2    9.0       TRUE
4 Cinnabun      up   M 1.3    2.7    8.0      FALSE
5    Daisy      up   F 2.5    2.9    8.5       TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb214"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb214-1"><a href="#cb214-1" aria-hidden="true" tabindex="-1"></a><span class="do">##Mutate has a strange name, but this just means create a new column that is some</span></span>
<span id="cb214-2"><a href="#cb214-2" aria-hidden="true" tabindex="-1"></a><span class="do">###function of other columns. You can also use this to change existing columns by </span></span>
<span id="cb214-3"><a href="#cb214-3" aria-hidden="true" tabindex="-1"></a><span class="do">###just listing an existing column in the list of columns to mutate.</span></span>
<span id="cb214-4"><a href="#cb214-4" aria-hidden="true" tabindex="-1"></a>overweight.rabbits.tidy <span class="ot">&lt;-</span> rabbits <span class="sc">%&gt;%</span> </span>
<span id="cb214-5"><a href="#cb214-5" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">filter</span>( . , BMI_category <span class="sc">%in%</span> </span>
<span id="cb214-6"><a href="#cb214-6" aria-hidden="true" tabindex="-1"></a>                                    <span class="fu">c</span>(<span class="st">"Overweight"</span>, <span class="st">"Very Overweight"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb214-7"><a href="#cb214-7" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">select</span>( . , Name, EarType, Sex, Age, </span>
<span id="cb214-8"><a href="#cb214-8" aria-hidden="true" tabindex="-1"></a>                                  Weight, Length, Vaccinated) <span class="sc">%&gt;%</span></span>
<span id="cb214-9"><a href="#cb214-9" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">mutate</span>( . , <span class="at">Weight_kg =</span> Weight <span class="sc">*</span> <span class="fl">0.45359237</span>,</span>
<span id="cb214-10"><a href="#cb214-10" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">Length_cm =</span> Length <span class="sc">*</span> <span class="fl">2.54</span>)</span>
<span id="cb214-11"><a href="#cb214-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb214-12"><a href="#cb214-12" aria-hidden="true" tabindex="-1"></a>overweight.rabbits.tidy</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Name EarType Sex Age Weight Length Vaccinated Weight_kg Length_cm
1      Bug      up   M 1.5    2.5    8.0       TRUE  1.133981     20.32
2   Wicket      up   M 0.5    2.6    7.5      FALSE  1.179340     19.05
3   Wesley      up   M 0.8    3.2    9.0       TRUE  1.451496     22.86
4 Cinnabun      up   M 1.3    2.7    8.0      FALSE  1.224699     20.32
5    Daisy      up   F 2.5    2.9    8.5       TRUE  1.315418     21.59</code></pre>
</div>
<div class="sourceCode cell-code" id="cb216"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb216-1"><a href="#cb216-1" aria-hidden="true" tabindex="-1"></a><span class="do">##Finally this renames Weight and Length columns so that they have a similar </span></span>
<span id="cb216-2"><a href="#cb216-2" aria-hidden="true" tabindex="-1"></a><span class="do">###convention as Weight_kg and Length_cm that were created with mutate.</span></span>
<span id="cb216-3"><a href="#cb216-3" aria-hidden="true" tabindex="-1"></a><span class="do">###The new column name is on the left of the '='. You can also rename in this </span></span>
<span id="cb216-4"><a href="#cb216-4" aria-hidden="true" tabindex="-1"></a><span class="do">###way using the select function.</span></span>
<span id="cb216-5"><a href="#cb216-5" aria-hidden="true" tabindex="-1"></a>overweight.rabbits.tidy <span class="ot">&lt;-</span> rabbits <span class="sc">%&gt;%</span> </span>
<span id="cb216-6"><a href="#cb216-6" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">filter</span>( . , BMI_category <span class="sc">%in%</span> </span>
<span id="cb216-7"><a href="#cb216-7" aria-hidden="true" tabindex="-1"></a>                                    <span class="fu">c</span>(<span class="st">"Overweight"</span>, <span class="st">"Very Overweight"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb216-8"><a href="#cb216-8" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">select</span>( . , Name, EarType, Sex, Age, </span>
<span id="cb216-9"><a href="#cb216-9" aria-hidden="true" tabindex="-1"></a>                                  Weight, Length, Vaccinated) <span class="sc">%&gt;%</span></span>
<span id="cb216-10"><a href="#cb216-10" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">mutate</span>( . , <span class="at">Weight_kg =</span> Weight <span class="sc">*</span> <span class="fl">0.45359237</span>,</span>
<span id="cb216-11"><a href="#cb216-11" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">Length_cm =</span> Length <span class="sc">*</span> <span class="fl">2.54</span>) <span class="sc">%&gt;%</span></span>
<span id="cb216-12"><a href="#cb216-12" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">rename</span>( . ,<span class="at">Weight_lb =</span> Weight, <span class="at">Length_inch =</span> Length)</span>
<span id="cb216-13"><a href="#cb216-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb216-14"><a href="#cb216-14" aria-hidden="true" tabindex="-1"></a>overweight.rabbits.tidy</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Name EarType Sex Age Weight_lb Length_inch Vaccinated Weight_kg Length_cm
1      Bug      up   M 1.5       2.5         8.0       TRUE  1.133981     20.32
2   Wicket      up   M 0.5       2.6         7.5      FALSE  1.179340     19.05
3   Wesley      up   M 0.8       3.2         9.0       TRUE  1.451496     22.86
4 Cinnabun      up   M 1.3       2.7         8.0      FALSE  1.224699     20.32
5    Daisy      up   F 2.5       2.9         8.5       TRUE  1.315418     21.59</code></pre>
</div>
<div class="sourceCode cell-code" id="cb218"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb218-1"><a href="#cb218-1" aria-hidden="true" tabindex="-1"></a><span class="co">#The second section of code that filters and creates a new variable.</span></span>
<span id="cb218-2"><a href="#cb218-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb218-3"><a href="#cb218-3" aria-hidden="true" tabindex="-1"></a><span class="do">##Begin by using group_by to group the data for later analysis. Note that</span></span>
<span id="cb218-4"><a href="#cb218-4" aria-hidden="true" tabindex="-1"></a><span class="do">###This does not change the data at all, it just changes the data frame </span></span>
<span id="cb218-5"><a href="#cb218-5" aria-hidden="true" tabindex="-1"></a><span class="do">###structure telling any aggregation functions to use these groups.</span></span>
<span id="cb218-6"><a href="#cb218-6" aria-hidden="true" tabindex="-1"></a>rabbits.summary.weight.by.sex.ear.tidy <span class="ot">&lt;-</span> rabbits <span class="sc">%&gt;%</span></span>
<span id="cb218-7"><a href="#cb218-7" aria-hidden="true" tabindex="-1"></a>                                          <span class="fu">group_by</span>( . , Sex, EarType)</span>
<span id="cb218-8"><a href="#cb218-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb218-9"><a href="#cb218-9" aria-hidden="true" tabindex="-1"></a><span class="do">##The groups are used in the summarize statement. This produces a data frame </span></span>
<span id="cb218-10"><a href="#cb218-10" aria-hidden="true" tabindex="-1"></a><span class="do">###that aggregates the data in whatever ways you specify (here the mean weight and </span></span>
<span id="cb218-11"><a href="#cb218-11" aria-hidden="true" tabindex="-1"></a><span class="do">###the number of rows using the n() function.)</span></span>
<span id="cb218-12"><a href="#cb218-12" aria-hidden="true" tabindex="-1"></a>rabbits.summary.weight.by.sex.ear.tidy <span class="ot">&lt;-</span> rabbits <span class="sc">%&gt;%</span></span>
<span id="cb218-13"><a href="#cb218-13" aria-hidden="true" tabindex="-1"></a>                                          <span class="fu">group_by</span>( . , Sex, EarType) <span class="sc">%&gt;%</span></span>
<span id="cb218-14"><a href="#cb218-14" aria-hidden="true" tabindex="-1"></a>                                          <span class="fu">summarize</span>( . , <span class="at">Mean_Weight =</span> <span class="fu">mean</span>(Weight),</span>
<span id="cb218-15"><a href="#cb218-15" aria-hidden="true" tabindex="-1"></a>                                                    <span class="at">n =</span> <span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Sex'. You can override using the `.groups`
argument.</code></pre>
</div>
</div>
</section>
<section id="useful-tidy-functions" class="level3">
<h3 class="anchored" data-anchor-id="useful-tidy-functions">Useful Tidy Functions</h3>
<p>One of the reasons why the tidyverse is great is the handy set of functions that allow you to do complex data processing and analysis with ease. Note that most functions listed in the Base-R function section will also work (some of them are even part of the tidyverse). Below I list and then demonstrate just a few of the functions that can be found in the tidyverse. If you need something that isn’t listed, google is one of the best sources.</p>
<ul>
<li>select(., columns): Select columns listed, separated by a ‘,’. ‘-’ in front of the column means that it is excluded.</li>
<li>rename(., new_column_name = old_column_name): Rename column(s), listed columns separated by a ‘,’.</li>
<li>mutate(., created_column = calculation): Create a new calculated column using a calculation. Multiple calculated columns separated by a ‘,’.</li>
<li>group_by(., columns): Set the columns by which to group aggregations.</li>
<li>summarize(., created_column = aggregation): calculate aggregation in the created_column. Will transform the data frame into a aggregation of the original data.</li>
<li>inner_join(x = data_frame1, y = data_frame2, by = columns): Like a SQL inner join using specified columns. Equivalent to merge(…,all.x = FALSE, all.y = FALSE), or the default merge.</li>
<li>left_join(x = data_frame1, y = data_frame2, by = columns): Like a SQL left join using specified columns. Equivalent to merge(…,all.x = TRUE).</li>
<li>right_join(x = data_frame1, y = data_frame2, by = columns): Like a SQL right join using specified columns. Equivalent to merge(…,all.y = TRUE).</li>
<li>full_join(x = data_frame1, y = data_frame2, by = columns): Like a SQL full outer join using specified columns. Equivalent to merge(…,all.x = TRUE, all.y = TRUE).</li>
<li>spread(., key, value ): Change data from long to wide, with each value in key becoming a column, with the column in value becoming the value. Note that this is deprecated to pivot_longer but still works.</li>
<li>gather(., key, value, columns to gather ): Change data from wide to long, specifying a new key and value columns and making the columns to gather into values of the key.</li>
</ul>
<p>I will demonstrate each function above separately without using pipes %&gt;%. This means that the data frame will be in place of the <code>.</code> I used above. But remember that any one of these functions can be used as part of a tidy data process that uses the pipe.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb220"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb220-1"><a href="#cb220-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select only Name, EarType, and Sex columns from rabbits data frame. </span></span>
<span id="cb220-2"><a href="#cb220-2" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(<span class="at">.data =</span> rabbits, Name, EarType, Sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             Name EarType Sex
1          Ruthie     lop   F
2          Smokey      up   F
3             Bug      up   M
4          Wicket      up   M
5          Wesley      up   M
6         Heather     lop   F
7             Ava      up   F
8        Cinnabun      up   M
9          Oliver     lop   M
10       Chestnut      up   F
11          Daisy      up   F
12        Cadbury      up   F
13       Chickpea      up   F
14          Storm      up   M
15 Mr. Fuzzy Foot      up   M
16        Bouncer      up   M
17       Midnight      up   F
18          Willy     lop   M
19          Dotty      up   F
20         Rabbit      up   M</code></pre>
</div>
<div class="sourceCode cell-code" id="cb222"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb222-1"><a href="#cb222-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select can also be used to rename and select at the same time.</span></span>
<span id="cb222-2"><a href="#cb222-2" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(<span class="at">.data =</span> rabbits, <span class="at">Rabbit_Name =</span> Name, EarType, Sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Rabbit_Name EarType Sex
1          Ruthie     lop   F
2          Smokey      up   F
3             Bug      up   M
4          Wicket      up   M
5          Wesley      up   M
6         Heather     lop   F
7             Ava      up   F
8        Cinnabun      up   M
9          Oliver     lop   M
10       Chestnut      up   F
11          Daisy      up   F
12        Cadbury      up   F
13       Chickpea      up   F
14          Storm      up   M
15 Mr. Fuzzy Foot      up   M
16        Bouncer      up   M
17       Midnight      up   F
18          Willy     lop   M
19          Dotty      up   F
20         Rabbit      up   M</code></pre>
</div>
<div class="sourceCode cell-code" id="cb224"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb224-1"><a href="#cb224-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using a '-' in front of a  column will eliminate it instead of select it.</span></span>
<span id="cb224-2"><a href="#cb224-2" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(<span class="at">.data =</span> rabbits,  <span class="sc">-</span>Name, <span class="sc">-</span>EarType, <span class="sc">-</span>Sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      BondPartner Weight Length Age      BMI    BMI_category Vaccinated
1            &lt;NA&gt;    3.5   10.0 2.0 24.60500  Healthy Weight      FALSE
2            &lt;NA&gt;    5.8   17.0 5.0 14.10865     Underweight       TRUE
3            &lt;NA&gt;    2.5    8.0 1.5 27.46094      Overweight       TRUE
4            &lt;NA&gt;    2.6    7.5 0.5 32.49422 Very Overweight      FALSE
5            &lt;NA&gt;    3.2    9.0 0.8 27.77284      Overweight       TRUE
6            &lt;NA&gt;    4.2   14.0 2.0 15.06429  Healthy Weight       TRUE
7            &lt;NA&gt;    3.9   12.0 3.0 19.03958  Healthy Weight       TRUE
8            &lt;NA&gt;    2.7    8.0 1.3 29.65781      Overweight      FALSE
9            &lt;NA&gt;    3.3   10.0 0.7 23.19900  Healthy Weight       TRUE
10           &lt;NA&gt;    4.5   13.0 2.0 18.71893  Healthy Weight       TRUE
11           &lt;NA&gt;    2.9    8.5 2.5 28.21730      Overweight       TRUE
12       Chickpea    6.0   18.0 3.0 13.01852     Underweight       TRUE
13        Cadbury    5.9   19.0 3.0 11.48947     Underweight       TRUE
14           &lt;NA&gt;    4.9   14.0 1.5 17.57500  Healthy Weight       TRUE
15        Bouncer    3.9   12.0 1.0 19.03958  Healthy Weight       TRUE
16 Mr. Fuzzy Foot    4.0   12.0 1.0 19.52778  Healthy Weight       TRUE
17           &lt;NA&gt;    4.3   14.0 2.5 15.42296  Healthy Weight       TRUE
18          Dotty    2.2    9.0 4.0 19.09383  Healthy Weight       TRUE
19          Willy    5.3   18.0 5.0 11.49969     Underweight       TRUE
20           &lt;NA&gt;    3.1   12.0 2.0 15.13403  Healthy Weight      FALSE
   Date_Entered
1    2022-06-24
2    2022-06-24
3    2022-06-24
4    2022-06-24
5    2022-06-24
6    2022-06-24
7    2022-06-24
8    2022-06-24
9    2022-06-24
10   2022-06-24
11   2022-06-24
12   2022-06-24
13   2022-06-24
14   2022-06-24
15   2022-06-24
16   2022-06-24
17   2022-06-24
18   2022-07-25
19   2022-07-25
20   2022-07-25</code></pre>
</div>
<div class="sourceCode cell-code" id="cb226"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb226-1"><a href="#cb226-1" aria-hidden="true" tabindex="-1"></a><span class="co"># rename will rename a set of columns without changing the columns selected</span></span>
<span id="cb226-2"><a href="#cb226-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rename</span>(<span class="at">.data =</span> rabbits, <span class="at">Rabbit_Name =</span> Name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Rabbit_Name EarType Sex    BondPartner Weight Length Age      BMI
1          Ruthie     lop   F           &lt;NA&gt;    3.5   10.0 2.0 24.60500
2          Smokey      up   F           &lt;NA&gt;    5.8   17.0 5.0 14.10865
3             Bug      up   M           &lt;NA&gt;    2.5    8.0 1.5 27.46094
4          Wicket      up   M           &lt;NA&gt;    2.6    7.5 0.5 32.49422
5          Wesley      up   M           &lt;NA&gt;    3.2    9.0 0.8 27.77284
6         Heather     lop   F           &lt;NA&gt;    4.2   14.0 2.0 15.06429
7             Ava      up   F           &lt;NA&gt;    3.9   12.0 3.0 19.03958
8        Cinnabun      up   M           &lt;NA&gt;    2.7    8.0 1.3 29.65781
9          Oliver     lop   M           &lt;NA&gt;    3.3   10.0 0.7 23.19900
10       Chestnut      up   F           &lt;NA&gt;    4.5   13.0 2.0 18.71893
11          Daisy      up   F           &lt;NA&gt;    2.9    8.5 2.5 28.21730
12        Cadbury      up   F       Chickpea    6.0   18.0 3.0 13.01852
13       Chickpea      up   F        Cadbury    5.9   19.0 3.0 11.48947
14          Storm      up   M           &lt;NA&gt;    4.9   14.0 1.5 17.57500
15 Mr. Fuzzy Foot      up   M        Bouncer    3.9   12.0 1.0 19.03958
16        Bouncer      up   M Mr. Fuzzy Foot    4.0   12.0 1.0 19.52778
17       Midnight      up   F           &lt;NA&gt;    4.3   14.0 2.5 15.42296
18          Willy     lop   M          Dotty    2.2    9.0 4.0 19.09383
19          Dotty      up   F          Willy    5.3   18.0 5.0 11.49969
20         Rabbit      up   M           &lt;NA&gt;    3.1   12.0 2.0 15.13403
      BMI_category Vaccinated Date_Entered
1   Healthy Weight      FALSE   2022-06-24
2      Underweight       TRUE   2022-06-24
3       Overweight       TRUE   2022-06-24
4  Very Overweight      FALSE   2022-06-24
5       Overweight       TRUE   2022-06-24
6   Healthy Weight       TRUE   2022-06-24
7   Healthy Weight       TRUE   2022-06-24
8       Overweight      FALSE   2022-06-24
9   Healthy Weight       TRUE   2022-06-24
10  Healthy Weight       TRUE   2022-06-24
11      Overweight       TRUE   2022-06-24
12     Underweight       TRUE   2022-06-24
13     Underweight       TRUE   2022-06-24
14  Healthy Weight       TRUE   2022-06-24
15  Healthy Weight       TRUE   2022-06-24
16  Healthy Weight       TRUE   2022-06-24
17  Healthy Weight       TRUE   2022-06-24
18  Healthy Weight       TRUE   2022-07-25
19     Underweight       TRUE   2022-07-25
20  Healthy Weight      FALSE   2022-07-25</code></pre>
</div>
<div class="sourceCode cell-code" id="cb228"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb228-1"><a href="#cb228-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mutate creates a calculated column.</span></span>
<span id="cb228-2"><a href="#cb228-2" aria-hidden="true" tabindex="-1"></a><span class="do">## I'm going to select only a few columns using a base function for easy reading.</span></span>
<span id="cb228-3"><a href="#cb228-3" aria-hidden="true" tabindex="-1"></a><span class="do">## Remember that you can overwrite existing variables by just using that variable's name</span></span>
<span id="cb228-4"><a href="#cb228-4" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="at">.data =</span> rabbits[,<span class="fu">c</span>(<span class="st">"Name"</span>, <span class="st">"Weight"</span>)], <span class="at">Weight_kg =</span> Weight <span class="sc">*</span> <span class="fl">0.45359237</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             Name Weight Weight_kg
1          Ruthie    3.5 1.5875733
2          Smokey    5.8 2.6308357
3             Bug    2.5 1.1339809
4          Wicket    2.6 1.1793402
5          Wesley    3.2 1.4514956
6         Heather    4.2 1.9050880
7             Ava    3.9 1.7690102
8        Cinnabun    2.7 1.2246994
9          Oliver    3.3 1.4968548
10       Chestnut    4.5 2.0411657
11          Daisy    2.9 1.3154179
12        Cadbury    6.0 2.7215542
13       Chickpea    5.9 2.6761950
14          Storm    4.9 2.2226026
15 Mr. Fuzzy Foot    3.9 1.7690102
16        Bouncer    4.0 1.8143695
17       Midnight    4.3 1.9504472
18          Willy    2.2 0.9979032
19          Dotty    5.3 2.4040396
20         Rabbit    3.1 1.4061363</code></pre>
</div>
<div class="sourceCode cell-code" id="cb230"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb230-1"><a href="#cb230-1" aria-hidden="true" tabindex="-1"></a><span class="co"># You can create summary stats to use in your mutate calculations.</span></span>
<span id="cb230-2"><a href="#cb230-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="at">.data =</span> rabbits[,<span class="fu">c</span>(<span class="st">"Name"</span>, <span class="st">"Weight"</span>)], </span>
<span id="cb230-3"><a href="#cb230-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">Weight_above_median =</span> Weight <span class="sc">-</span> <span class="fu">median</span>(Weight))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             Name Weight Weight_above_median
1          Ruthie    3.5                -0.4
2          Smokey    5.8                 1.9
3             Bug    2.5                -1.4
4          Wicket    2.6                -1.3
5          Wesley    3.2                -0.7
6         Heather    4.2                 0.3
7             Ava    3.9                 0.0
8        Cinnabun    2.7                -1.2
9          Oliver    3.3                -0.6
10       Chestnut    4.5                 0.6
11          Daisy    2.9                -1.0
12        Cadbury    6.0                 2.1
13       Chickpea    5.9                 2.0
14          Storm    4.9                 1.0
15 Mr. Fuzzy Foot    3.9                 0.0
16        Bouncer    4.0                 0.1
17       Midnight    4.3                 0.4
18          Willy    2.2                -1.7
19          Dotty    5.3                 1.4
20         Rabbit    3.1                -0.8</code></pre>
</div>
<div class="sourceCode cell-code" id="cb232"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb232-1"><a href="#cb232-1" aria-hidden="true" tabindex="-1"></a><span class="co"># You can use group_by to set the groups for the aggregation in mutate as well.</span></span>
<span id="cb232-2"><a href="#cb232-2" aria-hidden="true" tabindex="-1"></a><span class="do">## This finds the amount of weight a rabbit is above the median by sex.</span></span>
<span id="cb232-3"><a href="#cb232-3" aria-hidden="true" tabindex="-1"></a><span class="do">## Here I'll use pipes, because of the multiple steps.</span></span>
<span id="cb232-4"><a href="#cb232-4" aria-hidden="true" tabindex="-1"></a><span class="do">## The mutate statement is the same as above.</span></span>
<span id="cb232-5"><a href="#cb232-5" aria-hidden="true" tabindex="-1"></a>rabbits[,<span class="fu">c</span>(<span class="st">"Name"</span>, <span class="st">"Sex"</span>,<span class="st">"Weight"</span>)] <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(., Sex) <span class="sc">%&gt;%</span></span>
<span id="cb232-6"><a href="#cb232-6" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="at">.data =</span> ., <span class="at">Weight_above_median =</span> Weight <span class="sc">-</span> <span class="fu">median</span>(Weight))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 20 × 4
# Groups:   Sex [2]
   Name           Sex   Weight Weight_above_median
   &lt;chr&gt;          &lt;chr&gt;  &lt;dbl&gt;               &lt;dbl&gt;
 1 Ruthie         F        3.5             -0.9   
 2 Smokey         F        5.8              1.4   
 3 Bug            M        2.5             -0.65  
 4 Wicket         M        2.6             -0.55  
 5 Wesley         M        3.2              0.0500
 6 Heather        F        4.2             -0.200 
 7 Ava            F        3.9             -0.500 
 8 Cinnabun       M        2.7             -0.45  
 9 Oliver         M        3.3              0.150 
10 Chestnut       F        4.5              0.100 
11 Daisy          F        2.9             -1.5   
12 Cadbury        F        6                1.6   
13 Chickpea       F        5.9              1.5   
14 Storm          M        4.9              1.75  
15 Mr. Fuzzy Foot M        3.9              0.750 
16 Bouncer        M        4                0.85  
17 Midnight       F        4.3             -0.100 
18 Willy          M        2.2             -0.95  
19 Dotty          F        5.3              0.900 
20 Rabbit         M        3.1             -0.0500</code></pre>
</div>
<div class="sourceCode cell-code" id="cb234"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb234-1"><a href="#cb234-1" aria-hidden="true" tabindex="-1"></a><span class="co"># You can find summary  statistics using summarize</span></span>
<span id="cb234-2"><a href="#cb234-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summarize</span>(<span class="at">.data =</span> rabbits, <span class="at">Mean_weight =</span> <span class="fu">mean</span>(Weight), <span class="at">Median_weight =</span> <span class="fu">median</span>(Weight))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Mean_weight Median_weight
1       3.935           3.9</code></pre>
</div>
<div class="sourceCode cell-code" id="cb236"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb236-1"><a href="#cb236-1" aria-hidden="true" tabindex="-1"></a><span class="co"># If you want to group the data in the summary output use group_by (with a pipe)</span></span>
<span id="cb236-2"><a href="#cb236-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Note that the summarize statement is the same as above.</span></span>
<span id="cb236-3"><a href="#cb236-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb236-4"><a href="#cb236-4" aria-hidden="true" tabindex="-1"></a>rabbits <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(. , Sex) <span class="sc">%&gt;%</span></span>
<span id="cb236-5"><a href="#cb236-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">.data =</span> ., <span class="at">Mean_weight =</span> <span class="fu">mean</span>(Weight), <span class="at">Median_weight =</span> <span class="fu">median</span>(Weight))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  Sex   Mean_weight Median_weight
  &lt;chr&gt;       &lt;dbl&gt;         &lt;dbl&gt;
1 F            4.63          4.4 
2 M            3.24          3.15</code></pre>
</div>
<div class="sourceCode cell-code" id="cb238"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb238-1"><a href="#cb238-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Inner Join keeps only rows shared between both data frames. </span></span>
<span id="cb238-2"><a href="#cb238-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Note the by for when columns names are not identical between data frames.</span></span>
<span id="cb238-3"><a href="#cb238-3" aria-hidden="true" tabindex="-1"></a><span class="fu">inner_join</span>(<span class="at">x =</span> rabbits[,<span class="fu">c</span>(<span class="st">"Name"</span>, <span class="st">"Weight"</span>)], <span class="at">y =</span> adoption.applications,</span>
<span id="cb238-4"><a href="#cb238-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Name"</span> <span class="ot">=</span> <span class="st">"rabbit_name"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Name Weight     applicants OtherPets Children
1   Ruthie    3.5     Liz Cooper      TRUE    FALSE
2   Wicket    2.6     Liz Cooper      TRUE    FALSE
3 Cinnabun    2.7 Fred Flinstone     FALSE    FALSE
4   Oliver    3.3     John Smith      TRUE    FALSE
5   Oliver    3.3   Jane Goodwin     FALSE     TRUE
6  Cadbury    6.0   Katie Walker     FALSE    FALSE
7 Chickpea    5.9   Katie Walker     FALSE    FALSE
8    Storm    4.9     Liz Cooper      TRUE    FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb240"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb240-1"><a href="#cb240-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Keeps all rows in rabbits</span></span>
<span id="cb240-2"><a href="#cb240-2" aria-hidden="true" tabindex="-1"></a><span class="fu">left_join</span>(<span class="at">x =</span> rabbits[,<span class="fu">c</span>(<span class="st">"Name"</span>, <span class="st">"Weight"</span>)], <span class="at">y =</span> adoption.applications,</span>
<span id="cb240-3"><a href="#cb240-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Name"</span> <span class="ot">=</span> <span class="st">"rabbit_name"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             Name Weight     applicants OtherPets Children
1          Ruthie    3.5     Liz Cooper      TRUE    FALSE
2          Smokey    5.8           &lt;NA&gt;        NA       NA
3             Bug    2.5           &lt;NA&gt;        NA       NA
4          Wicket    2.6     Liz Cooper      TRUE    FALSE
5          Wesley    3.2           &lt;NA&gt;        NA       NA
6         Heather    4.2           &lt;NA&gt;        NA       NA
7             Ava    3.9           &lt;NA&gt;        NA       NA
8        Cinnabun    2.7 Fred Flinstone     FALSE    FALSE
9          Oliver    3.3     John Smith      TRUE    FALSE
10         Oliver    3.3   Jane Goodwin     FALSE     TRUE
11       Chestnut    4.5           &lt;NA&gt;        NA       NA
12          Daisy    2.9           &lt;NA&gt;        NA       NA
13        Cadbury    6.0   Katie Walker     FALSE    FALSE
14       Chickpea    5.9   Katie Walker     FALSE    FALSE
15          Storm    4.9     Liz Cooper      TRUE    FALSE
16 Mr. Fuzzy Foot    3.9           &lt;NA&gt;        NA       NA
17        Bouncer    4.0           &lt;NA&gt;        NA       NA
18       Midnight    4.3           &lt;NA&gt;        NA       NA
19          Willy    2.2           &lt;NA&gt;        NA       NA
20          Dotty    5.3           &lt;NA&gt;        NA       NA
21         Rabbit    3.1           &lt;NA&gt;        NA       NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb242"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb242-1"><a href="#cb242-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Keeps all rows in adoption.applications</span></span>
<span id="cb242-2"><a href="#cb242-2" aria-hidden="true" tabindex="-1"></a><span class="fu">right_join</span>(<span class="at">x =</span> rabbits[,<span class="fu">c</span>(<span class="st">"Name"</span>, <span class="st">"Weight"</span>)], <span class="at">y =</span> adoption.applications,</span>
<span id="cb242-3"><a href="#cb242-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Name"</span> <span class="ot">=</span> <span class="st">"rabbit_name"</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       Name Weight     applicants OtherPets Children
1    Ruthie    3.5     Liz Cooper      TRUE    FALSE
2    Wicket    2.6     Liz Cooper      TRUE    FALSE
3  Cinnabun    2.7 Fred Flinstone     FALSE    FALSE
4    Oliver    3.3     John Smith      TRUE    FALSE
5    Oliver    3.3   Jane Goodwin     FALSE     TRUE
6   Cadbury    6.0   Katie Walker     FALSE    FALSE
7  Chickpea    5.9   Katie Walker     FALSE    FALSE
8     Storm    4.9     Liz Cooper      TRUE    FALSE
9               NA   Dylan Strong     FALSE     TRUE
10              NA      Amy Cohen      TRUE     TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb244"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb244-1"><a href="#cb244-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Keeps all rows in both data frames</span></span>
<span id="cb244-2"><a href="#cb244-2" aria-hidden="true" tabindex="-1"></a><span class="fu">full_join</span>(<span class="at">x =</span> rabbits[,<span class="fu">c</span>(<span class="st">"Name"</span>, <span class="st">"Weight"</span>)], <span class="at">y =</span> adoption.applications,</span>
<span id="cb244-3"><a href="#cb244-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Name"</span> <span class="ot">=</span> <span class="st">"rabbit_name"</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             Name Weight     applicants OtherPets Children
1          Ruthie    3.5     Liz Cooper      TRUE    FALSE
2          Smokey    5.8           &lt;NA&gt;        NA       NA
3             Bug    2.5           &lt;NA&gt;        NA       NA
4          Wicket    2.6     Liz Cooper      TRUE    FALSE
5          Wesley    3.2           &lt;NA&gt;        NA       NA
6         Heather    4.2           &lt;NA&gt;        NA       NA
7             Ava    3.9           &lt;NA&gt;        NA       NA
8        Cinnabun    2.7 Fred Flinstone     FALSE    FALSE
9          Oliver    3.3     John Smith      TRUE    FALSE
10         Oliver    3.3   Jane Goodwin     FALSE     TRUE
11       Chestnut    4.5           &lt;NA&gt;        NA       NA
12          Daisy    2.9           &lt;NA&gt;        NA       NA
13        Cadbury    6.0   Katie Walker     FALSE    FALSE
14       Chickpea    5.9   Katie Walker     FALSE    FALSE
15          Storm    4.9     Liz Cooper      TRUE    FALSE
16 Mr. Fuzzy Foot    3.9           &lt;NA&gt;        NA       NA
17        Bouncer    4.0           &lt;NA&gt;        NA       NA
18       Midnight    4.3           &lt;NA&gt;        NA       NA
19          Willy    2.2           &lt;NA&gt;        NA       NA
20          Dotty    5.3           &lt;NA&gt;        NA       NA
21         Rabbit    3.1           &lt;NA&gt;        NA       NA
22                    NA   Dylan Strong     FALSE     TRUE
23                    NA      Amy Cohen      TRUE     TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb246"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb246-1"><a href="#cb246-1" aria-hidden="true" tabindex="-1"></a><span class="co"># The syntax is simpler when join columns have the same names.</span></span>
<span id="cb246-2"><a href="#cb246-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rename</span>(<span class="at">.data =</span> rabbits, <span class="at">rabbit_name =</span> Name) <span class="sc">%&gt;%</span></span>
<span id="cb246-3"><a href="#cb246-3" aria-hidden="true" tabindex="-1"></a><span class="fu">inner_join</span>(<span class="at">x =</span> ., <span class="at">y =</span> adoption.applications,</span>
<span id="cb246-4"><a href="#cb246-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">by =</span> <span class="st">"rabbit_name"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  rabbit_name EarType Sex BondPartner Weight Length Age      BMI
1      Ruthie     lop   F        &lt;NA&gt;    3.5   10.0 2.0 24.60500
2      Wicket      up   M        &lt;NA&gt;    2.6    7.5 0.5 32.49422
3    Cinnabun      up   M        &lt;NA&gt;    2.7    8.0 1.3 29.65781
4      Oliver     lop   M        &lt;NA&gt;    3.3   10.0 0.7 23.19900
5      Oliver     lop   M        &lt;NA&gt;    3.3   10.0 0.7 23.19900
6     Cadbury      up   F    Chickpea    6.0   18.0 3.0 13.01852
7    Chickpea      up   F     Cadbury    5.9   19.0 3.0 11.48947
8       Storm      up   M        &lt;NA&gt;    4.9   14.0 1.5 17.57500
     BMI_category Vaccinated Date_Entered     applicants OtherPets Children
1  Healthy Weight      FALSE   2022-06-24     Liz Cooper      TRUE    FALSE
2 Very Overweight      FALSE   2022-06-24     Liz Cooper      TRUE    FALSE
3      Overweight      FALSE   2022-06-24 Fred Flinstone     FALSE    FALSE
4  Healthy Weight       TRUE   2022-06-24     John Smith      TRUE    FALSE
5  Healthy Weight       TRUE   2022-06-24   Jane Goodwin     FALSE     TRUE
6     Underweight       TRUE   2022-06-24   Katie Walker     FALSE    FALSE
7     Underweight       TRUE   2022-06-24   Katie Walker     FALSE    FALSE
8  Healthy Weight       TRUE   2022-06-24     Liz Cooper      TRUE    FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb248"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb248-1"><a href="#cb248-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Here is an example of joining on more than one column using a summary data frame.</span></span>
<span id="cb248-2"><a href="#cb248-2" aria-hidden="true" tabindex="-1"></a><span class="do">## I use this example (using pipes) just because I don't have another convenient </span></span>
<span id="cb248-3"><a href="#cb248-3" aria-hidden="true" tabindex="-1"></a><span class="do">## data frame to join on two columns.</span></span>
<span id="cb248-4"><a href="#cb248-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-5"><a href="#cb248-5" aria-hidden="true" tabindex="-1"></a>rabbits <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(<span class="at">.data =</span> ., Sex, EarType) <span class="sc">%&gt;%</span> </span>
<span id="cb248-6"><a href="#cb248-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">.data =</span> ., <span class="at">Sex_EarType_Mean_Weight =</span> <span class="fu">mean</span>(Weight)) <span class="sc">%&gt;%</span></span>
<span id="cb248-7"><a href="#cb248-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(<span class="at">x =</span> ., <span class="at">y =</span> rabbits, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Sex"</span>, <span class="st">"EarType"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Sex'. You can override using the `.groups`
argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 20 × 12
# Groups:   Sex [2]
   Sex   EarType Sex_E…¹ Name  BondP…² Weight Length   Age   BMI BMI_c…³ Vacci…⁴
   &lt;chr&gt; &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;    &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;lgl&gt;  
 1 F     lop        3.85 Ruth… &lt;NA&gt;       3.5   10     2    24.6 Health… FALSE  
 2 F     lop        3.85 Heat… &lt;NA&gt;       4.2   14     2    15.1 Health… TRUE   
 3 F     up         4.82 Smok… &lt;NA&gt;       5.8   17     5    14.1 Underw… TRUE   
 4 F     up         4.82 Ava   &lt;NA&gt;       3.9   12     3    19.0 Health… TRUE   
 5 F     up         4.82 Ches… &lt;NA&gt;       4.5   13     2    18.7 Health… TRUE   
 6 F     up         4.82 Daisy &lt;NA&gt;       2.9    8.5   2.5  28.2 Overwe… TRUE   
 7 F     up         4.82 Cadb… Chickp…    6     18     3    13.0 Underw… TRUE   
 8 F     up         4.82 Chic… Cadbury    5.9   19     3    11.5 Underw… TRUE   
 9 F     up         4.82 Midn… &lt;NA&gt;       4.3   14     2.5  15.4 Health… TRUE   
10 F     up         4.82 Dotty Willy      5.3   18     5    11.5 Underw… TRUE   
11 M     lop        2.75 Oliv… &lt;NA&gt;       3.3   10     0.7  23.2 Health… TRUE   
12 M     lop        2.75 Willy Dotty      2.2    9     4    19.1 Health… TRUE   
13 M     up         3.36 Bug   &lt;NA&gt;       2.5    8     1.5  27.5 Overwe… TRUE   
14 M     up         3.36 Wick… &lt;NA&gt;       2.6    7.5   0.5  32.5 Very O… FALSE  
15 M     up         3.36 Wesl… &lt;NA&gt;       3.2    9     0.8  27.8 Overwe… TRUE   
16 M     up         3.36 Cinn… &lt;NA&gt;       2.7    8     1.3  29.7 Overwe… FALSE  
17 M     up         3.36 Storm &lt;NA&gt;       4.9   14     1.5  17.6 Health… TRUE   
18 M     up         3.36 Mr. … Bouncer    3.9   12     1    19.0 Health… TRUE   
19 M     up         3.36 Boun… Mr. Fu…    4     12     1    19.5 Health… TRUE   
20 M     up         3.36 Rabb… &lt;NA&gt;       3.1   12     2    15.1 Health… FALSE  
# … with 1 more variable: Date_Entered &lt;date&gt;, and abbreviated variable names
#   ¹​Sex_EarType_Mean_Weight, ²​BondPartner, ³​BMI_category, ⁴​Vaccinated</code></pre>
</div>
<div class="sourceCode cell-code" id="cb251"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb251-1"><a href="#cb251-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I'll needlessly name the columns something different to show how the syntax works</span></span>
<span id="cb251-2"><a href="#cb251-2" aria-hidden="true" tabindex="-1"></a><span class="do">## with more than one column</span></span>
<span id="cb251-3"><a href="#cb251-3" aria-hidden="true" tabindex="-1"></a>rabbits <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(<span class="at">.data =</span> ., Sex, EarType) <span class="sc">%&gt;%</span> </span>
<span id="cb251-4"><a href="#cb251-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">.data =</span> ., <span class="at">Sex_EarType_Mean_Weight =</span> <span class="fu">mean</span>(Weight)) <span class="sc">%&gt;%</span></span>
<span id="cb251-5"><a href="#cb251-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">.data =</span> ., <span class="at">Rabbit_Sex =</span> Sex, <span class="at">Rabbit_EarType =</span> EarType) <span class="sc">%&gt;%</span></span>
<span id="cb251-6"><a href="#cb251-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(<span class="at">x =</span> ., <span class="at">y =</span> rabbits, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Rabbit_Sex"</span> <span class="ot">=</span> <span class="st">"Sex"</span>, </span>
<span id="cb251-7"><a href="#cb251-7" aria-hidden="true" tabindex="-1"></a>                                    <span class="st">"Rabbit_EarType"</span> <span class="ot">=</span> <span class="st">"EarType"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Sex'. You can override using the `.groups`
argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 20 × 12
# Groups:   Rabbit_Sex [2]
   Rabbit_Sex Rabbit_E…¹ Sex_E…² Name  BondP…³ Weight Length   Age   BMI BMI_c…⁴
   &lt;chr&gt;      &lt;chr&gt;        &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;    &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;  
 1 F          lop           3.85 Ruth… &lt;NA&gt;       3.5   10     2    24.6 Health…
 2 F          lop           3.85 Heat… &lt;NA&gt;       4.2   14     2    15.1 Health…
 3 F          up            4.82 Smok… &lt;NA&gt;       5.8   17     5    14.1 Underw…
 4 F          up            4.82 Ava   &lt;NA&gt;       3.9   12     3    19.0 Health…
 5 F          up            4.82 Ches… &lt;NA&gt;       4.5   13     2    18.7 Health…
 6 F          up            4.82 Daisy &lt;NA&gt;       2.9    8.5   2.5  28.2 Overwe…
 7 F          up            4.82 Cadb… Chickp…    6     18     3    13.0 Underw…
 8 F          up            4.82 Chic… Cadbury    5.9   19     3    11.5 Underw…
 9 F          up            4.82 Midn… &lt;NA&gt;       4.3   14     2.5  15.4 Health…
10 F          up            4.82 Dotty Willy      5.3   18     5    11.5 Underw…
11 M          lop           2.75 Oliv… &lt;NA&gt;       3.3   10     0.7  23.2 Health…
12 M          lop           2.75 Willy Dotty      2.2    9     4    19.1 Health…
13 M          up            3.36 Bug   &lt;NA&gt;       2.5    8     1.5  27.5 Overwe…
14 M          up            3.36 Wick… &lt;NA&gt;       2.6    7.5   0.5  32.5 Very O…
15 M          up            3.36 Wesl… &lt;NA&gt;       3.2    9     0.8  27.8 Overwe…
16 M          up            3.36 Cinn… &lt;NA&gt;       2.7    8     1.3  29.7 Overwe…
17 M          up            3.36 Storm &lt;NA&gt;       4.9   14     1.5  17.6 Health…
18 M          up            3.36 Mr. … Bouncer    3.9   12     1    19.0 Health…
19 M          up            3.36 Boun… Mr. Fu…    4     12     1    19.5 Health…
20 M          up            3.36 Rabb… &lt;NA&gt;       3.1   12     2    15.1 Health…
# … with 2 more variables: Vaccinated &lt;lgl&gt;, Date_Entered &lt;date&gt;, and
#   abbreviated variable names ¹​Rabbit_EarType, ²​Sex_EarType_Mean_Weight,
#   ³​BondPartner, ⁴​BMI_category</code></pre>
</div>
<div class="sourceCode cell-code" id="cb254"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb254-1"><a href="#cb254-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I'll take the mean weight long table and make it wide by pivoting Sex.</span></span>
<span id="cb254-2"><a href="#cb254-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb254-3"><a href="#cb254-3" aria-hidden="true" tabindex="-1"></a>rabbits <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(<span class="at">.data =</span> ., Sex, EarType) <span class="sc">%&gt;%</span> </span>
<span id="cb254-4"><a href="#cb254-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">.data =</span> ., <span class="at">Sex_EarType_Mean_Weight =</span> <span class="fu">mean</span>(Weight)) <span class="sc">%&gt;%</span></span>
<span id="cb254-5"><a href="#cb254-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">spread</span>(<span class="at">data =</span> ., <span class="at">key =</span> Sex, <span class="at">value =</span> Sex_EarType_Mean_Weight)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Sex'. You can override using the `.groups`
argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  EarType     F     M
  &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt;
1 lop      3.85  2.75
2 up       4.82  3.36</code></pre>
</div>
<div class="sourceCode cell-code" id="cb257"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb257-1"><a href="#cb257-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I'll make that wide data long again. </span></span>
<span id="cb257-2"><a href="#cb257-2" aria-hidden="true" tabindex="-1"></a><span class="do">## The first part is just from above and is saved into a variable.</span></span>
<span id="cb257-3"><a href="#cb257-3" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb257-4"><a href="#cb257-4" aria-hidden="true" tabindex="-1"></a>wide.mean.weights <span class="ot">&lt;-</span> rabbits <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(<span class="at">.data =</span> ., Sex, EarType) <span class="sc">%&gt;%</span> </span>
<span id="cb257-5"><a href="#cb257-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">.data =</span> ., <span class="at">Sex_EarType_Mean_Weight =</span> <span class="fu">mean</span>(Weight)) <span class="sc">%&gt;%</span></span>
<span id="cb257-6"><a href="#cb257-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">spread</span>(<span class="at">data =</span> ., <span class="at">key =</span> Sex, <span class="at">value =</span> Sex_EarType_Mean_Weight)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Sex'. You can override using the `.groups`
argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb259"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb259-1"><a href="#cb259-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Note that key and value canned be named whatever you want in the new table.</span></span>
<span id="cb259-2"><a href="#cb259-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gather</span>(<span class="at">data =</span> wide.mean.weights, <span class="at">key =</span> <span class="st">"Sex"</span>, </span>
<span id="cb259-3"><a href="#cb259-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">value =</span> <span class="st">"Mean_Weight"</span>, M, F )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
  EarType Sex   Mean_Weight
  &lt;chr&gt;   &lt;chr&gt;       &lt;dbl&gt;
1 lop     M            2.75
2 up      M            3.36
3 lop     F            3.85
4 up      F            4.82</code></pre>
</div>
</div>
</section>
</section>
<section id="connecting-to-data" class="level2">
<h2 class="anchored" data-anchor-id="connecting-to-data">Connecting to Data</h2>
<section id="storing-credentials" class="level3">
<h3 class="anchored" data-anchor-id="storing-credentials">Storing Credentials</h3>
<p>Typically you do not want to have to enter credentials manually when connecting to databases and other data sources. There are several ways of storing credentials securely in R. I demonstrate a method that also allows for scripts that reference an individual’s credentials without typing user names into the script. So those scripts can be used by multiple people without any changes to the text.</p>
<p>The first step is to store database user names (which do not need to be encrypted) in the R environment file (.Renviron). This is usually stored in your Documents folder, but because it has a “.” in front of the name, it is hidden by Windows. There is an easy way to access and edit this, however, using the usethis package (it should be installed with the devtools package you have already installed).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb261"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb261-1"><a href="#cb261-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Run the below command (commented) and add your database usernames.</span></span>
<span id="cb261-2"><a href="#cb261-2" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">edit_r_environ</span>()</span>
<span id="cb261-3"><a href="#cb261-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb261-4"><a href="#cb261-4" aria-hidden="true" tabindex="-1"></a><span class="co">#When .Renviron opens enter the following lines </span></span>
<span id="cb261-5"><a href="#cb261-5" aria-hidden="true" tabindex="-1"></a><span class="co">#with your user names (NOT passwords) in </span></span>
<span id="cb261-6"><a href="#cb261-6" aria-hidden="true" tabindex="-1"></a><span class="co">#place of &lt;usr&gt; and &lt;netid@wisc.edu&gt;</span></span>
<span id="cb261-7"><a href="#cb261-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb261-8"><a href="#cb261-8" aria-hidden="true" tabindex="-1"></a>INFOACCESS <span class="ot">=</span> <span class="st">"&lt;usr&gt;"</span></span>
<span id="cb261-9"><a href="#cb261-9" aria-hidden="true" tabindex="-1"></a>DARSP <span class="ot">=</span> <span class="st">"&lt;usr&gt;"</span></span>
<span id="cb261-10"><a href="#cb261-10" aria-hidden="true" tabindex="-1"></a>BadgerAnalytics <span class="ot">=</span> <span class="st">"&lt;netid@wisc.edu&gt;"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Putting user names in your R environment file makes it easy to access user names with generic r commands, regardless of who is using the script. I’ll show you how to do that below.</p>
<p>Next, I’ll show how to add your passwords to your encrypted Windows or Mac keyring. One benefit of this is that it uses your default system method of storing credentials in a secure location. The AIMutils package contains helper functions for saving these passwords. BadgerAnalytics uses Single Sign On credentials through your browser, so is not included here.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb262"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb262-1"><a href="#cb262-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Install the keyring package if it isn't already installed.</span></span>
<span id="cb262-2"><a href="#cb262-2" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages("keyring")</span></span>
<span id="cb262-3"><a href="#cb262-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Install the AIMutils package (from gitlab) if it isn't already installed.</span></span>
<span id="cb262-4"><a href="#cb262-4" aria-hidden="true" tabindex="-1"></a><span class="co">#library(devtools)</span></span>
<span id="cb262-5"><a href="#cb262-5" aria-hidden="true" tabindex="-1"></a><span class="co">#install_gitlab(repo = "lsaim/AIMutils",host="git.doit.wisc.edu")</span></span>
<span id="cb262-6"><a href="#cb262-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(AIMutils)</span>
<span id="cb262-7"><a href="#cb262-7" aria-hidden="true" tabindex="-1"></a><span class="co">#This will save a password using the username in the .Renviron file</span></span>
<span id="cb262-8"><a href="#cb262-8" aria-hidden="true" tabindex="-1"></a><span class="fu">save.INFOACCESS.password</span>()</span>
<span id="cb262-9"><a href="#cb262-9" aria-hidden="true" tabindex="-1"></a><span class="fu">save.DARSP.password</span>()</span>
<span id="cb262-10"><a href="#cb262-10" aria-hidden="true" tabindex="-1"></a><span class="co">#This will save a password using the username given in &lt;usr&gt;.</span></span>
<span id="cb262-11"><a href="#cb262-11" aria-hidden="true" tabindex="-1"></a><span class="fu">save.INFOACCESS.password</span>(<span class="st">"&lt;usr&gt;"</span>)</span>
<span id="cb262-12"><a href="#cb262-12" aria-hidden="true" tabindex="-1"></a><span class="fu">save.DARSP.password</span>(<span class="st">"&lt;usr&gt;"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="connecting-to-uw-madison-data-sources" class="level3">
<h3 class="anchored" data-anchor-id="connecting-to-uw-madison-data-sources">Connecting to UW-Madison Data Sources</h3>
<p>The easiest way to connect to campus data sources in R is using the odbc connection tools in the <strong>dbplyr</strong> package. I will discuss how to connect to Oracle campus databases (InfoAccess and DARSP) as well as Snowflake (Badger Analytics). I will also present several helper functions in the <strong>AIMutils</strong> package available through gitlab. Install that with the following command:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb263"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb263-1"><a href="#cb263-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install_gitlab</span>(<span class="at">repo =</span> <span class="st">"lsaim/AIMutils"</span>,<span class="at">host=</span><span class="st">"git.doit.wisc.edu"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The first step is to set up ODBC connections in your Windows or Mac ODBC Data Sources program. Make sure to run the 64-bit version and to run it with administrative privileges. This is the same setup for ODBC data sources used in Toad, Tableau, and other campus data tools. For instructions of how to do this for Badger Analytics see [the KB provided by ODMAS]{https://kb.wisc.edu/msndata/page.php?i d=120845}. Connections to Oracle databases follow a similar procedure, except you need to select the TNSNames.ora entry for the database you are interested in. Additionally, in order to use the database helper packages in AIMutils you need to give the collections the following names:</p>
<ul>
<li>INFOACCESS</li>
<li>DARSP</li>
<li>BadgerAnalytics</li>
</ul>
<p>R will connect using the ODBC connection and a database interface package called DBI. AIMutils contains a number of helper functions that autmatically set the parameters necessary to connect to the databases I’ve listed above. It will also use your username from your .Renviron file and your password in your system keyring. To connect to these databases do the following.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb264"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb264-1"><a href="#cb264-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Install DBI if it isn't already installed.</span></span>
<span id="cb264-2"><a href="#cb264-2" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages("DBI")</span></span>
<span id="cb264-3"><a href="#cb264-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(AIMutils)</span>
<span id="cb264-4"><a href="#cb264-4" aria-hidden="true" tabindex="-1"></a><span class="co">#These commands will open campus database connections </span></span>
<span id="cb264-5"><a href="#cb264-5" aria-hidden="true" tabindex="-1"></a><span class="do">##using your stored credentials and store them in a variable.</span></span>
<span id="cb264-6"><a href="#cb264-6" aria-hidden="true" tabindex="-1"></a><span class="do">##You will use this variable when querying</span></span>
<span id="cb264-7"><a href="#cb264-7" aria-hidden="true" tabindex="-1"></a>INFOACCESScon <span class="ot">&lt;-</span> <span class="fu">open.INFOACCESS.connection</span>()</span>
<span id="cb264-8"><a href="#cb264-8" aria-hidden="true" tabindex="-1"></a>DARSPcon <span class="ot">&lt;-</span> <span class="fu">open.DARSP.connection</span>()</span>
<span id="cb264-9"><a href="#cb264-9" aria-hidden="true" tabindex="-1"></a><span class="co">#The Badger Analytics connections will open up a browser window</span></span>
<span id="cb264-10"><a href="#cb264-10" aria-hidden="true" tabindex="-1"></a><span class="do">##so that you can log in with Single Sign On.</span></span>
<span id="cb264-11"><a href="#cb264-11" aria-hidden="true" tabindex="-1"></a>BadgerAnalyticscon <span class="ot">&lt;-</span> <span class="fu">open.BadgerAnalytics.connection</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="querying-databases." class="level3">
<h3 class="anchored" data-anchor-id="querying-databases.">Querying Databases.</h3>
<p>The simplest way to query databases in R is simply writing SQL into character string variables and then using that string as a parameter along with the database connection in the DBI::dbGetQuery function. Additionally, the dbplyr package contains lots of handy tools for working with SQL in R. It may be worth your time to explore its functions.</p>
<p>Here is how you would make a simple query to INFOACCESS and then save that data to a variable. I will not actually run this query, but try it yourself if you have credentials.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb265"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb265-1"><a href="#cb265-1" aria-hidden="true" tabindex="-1"></a>query1_SQL <span class="ot">&lt;-</span> <span class="st">"SELECT DISTINCT</span></span>
<span id="cb265-2"><a href="#cb265-2" aria-hidden="true" tabindex="-1"></a><span class="st">                UW.STDNT_DIRECTORY_MULTITERM.ID,</span></span>
<span id="cb265-3"><a href="#cb265-3" aria-hidden="true" tabindex="-1"></a><span class="st">                UW.STDNT_DIRECTORY_MULTITERM.TERM</span></span>
<span id="cb265-4"><a href="#cb265-4" aria-hidden="true" tabindex="-1"></a><span class="st">                FROM UW.STDNT_DIRECTORY_MULTITERM</span></span>
<span id="cb265-5"><a href="#cb265-5" aria-hidden="true" tabindex="-1"></a><span class="st">                WHERE UW.STDNT_DIRECTORY_MULTITERM.TERM = '1224'"</span></span>
<span id="cb265-6"><a href="#cb265-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb265-7"><a href="#cb265-7" aria-hidden="true" tabindex="-1"></a>directory.data <span class="ot">&lt;-</span> DBI<span class="sc">::</span><span class="fu">dbGetQuery</span>(INFOACCESScon, query1_SQL)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!-- ::: -->
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>